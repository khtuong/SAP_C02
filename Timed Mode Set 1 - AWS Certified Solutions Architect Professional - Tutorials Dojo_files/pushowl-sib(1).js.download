!function(){"use strict";var e,t;!function(e){e.CHROME="chrome",e.FIREFOX="firefox",e.SAFARI="safari",e.OTHER="other"}(e||(e={})),function(e){e.ONE_STEP="oneStep",e.TWO_STEP="twoStep",e.OFF="off"}(t||(t={}));var n,i,o,r,s,a;!function(e){e.CUSTOM_BUTTONS="custom-buttons",e.FLYOUT_WIDGET="flyout-widget",e.PARTNER_JS_API="partner-js-api"}(n||(n={})),function(e){e.NOT_SHOPIFY="not_shopify",e.STORAGE_NOT_DEFINED="storage_not_defined",e.LOCALSTORAGE_NOT_AVAILABLE="localstorage_not_available",e.IN_COMAPTIBLE_BROWSER="incompatible_browser",e.NO_SERVICE_WORKER="no_service_worker",e.NO_SUBDOMAIN="no_subdomain",e.OLD_IOS_DEVICE="old_ios_device",e.MICROSOFT_EDGE="microsoft_edge",e.NOT_ADDED_TO_HOME_SCREEN="not_added_to_home_screen",e.INCOGNITO="incognito",e.NOTIFICATION_NOT_DEFINED="notification_not_defined",e.NO_FILE_SYSTEM="no_file_system",e.DISABLED_RESYNC="disable_resync"}(i||(i={})),function(e){e.NO_SUBSCRIBER_TOKEN="no_subsriber_token",e.INVALID_SUBSCRIBER_TOKEN="invalid_subscriber_token",e.PERMISSION_DENIED="permission_denied",e.PERMISSION_NOT_GRANTED="permission_not_granted",e.INVALID_STATE_ERROR="InvalidStateError",e.UNKNOWN_EVENT="unknown_event"}(o||(o={})),function(e){e.BACK_IN_STOCK="back_in_stock",e.PRICE_DROP="price_drop"}(r||(r={})),function(e){e.SILENT="silent",e.DEBUG="debug"}(s||(s={})),function(e){e.CART_DELETED="cart_deleted",e.CART_UPDATED="cart_updated",e.PRODUCT_VIEWED="product_viewed"}(a||(a={}));const l=[{name:"track"},{name:"identify"},{name:"trackLink"},{name:"page"},{name:"viewProduct",isEcommerce:!0},{name:"viewCategory",isEcommerce:!0},{name:"search",isEcommerce:!0}],c={WIDGET_CONFIG_KEY:{HOME:"home",PRICE_DROP:"price_drop",BACK_IN_STOCK:"back_in_stock"},EVENT_API_PATH:{PRICE_DROP:"price-drop",BACK_IN_STOCK:"back-in-stock"},ENVIRONMENT:{staging:"staging",production:"production"},STORAGE_KEYS:{NETWORK_REQUEST_QUEUE:"pushowl_network_request_queue",VISITOR_TOKEN:"pushowl_visitor_token",SESSION_TOKEN:"pushowl_session_token",SUBSCRIBER_TOKEN:"pushowl_subscriber_token",SUBSCRIPTION:"pushowl_subscription",SW_SUBSCRIPTION:"pushowl_sw_subscription",SW_SUBSCRIBER_TOKEN:"pushowl_sw_subscriber_token",EMAIL:"pushowl_email",BACK_IN_STOCK_SUBSCRIPTIONS:"pushowl_back_in_stock_subscriptions",PRICE_DROP_SUBSCRIPTIONS:"pushowl_price_drop_subscriptions",SYNCED_CART_JSON:"pushowl_synced_cart_json",SYNCED_CUSTOMER_ID:"pushowl_synced_customer_id",SYNCED_AC_EVENTS:"pushowl_ac_events",SESSION_PAGEVIEW_COUNT:"pushowl_session_pageview_count",SESSION_SUBSCRIBER_CHECK:"pushowl_session_subscriber_check",OPTIN_DEFERRED_UNTIL:"pushowl_optin_deferred_until",LOG_LEVEL:"pushowl_log_level",HAS_RAISED_UNSUBSCRIPTION_EVENT:"pushowl_has_raised_unsubscription_event",IS_PERMISSION_GRANTED:"pushowl_is_permission_granted",REFERRER:"pushowl_referrer",LANDING_PAGE_URL:"pushowl_landing_page_url",LANDING_PAGE_URL_PARAMS:"pushowl_landing_page_url_params",ORIGINAL_URL_PARAMS:"pushowl_original_url_params",IOS_STANDALONE_MODE_LOG:"pushowl_ios_standalone_mode_log",INSTALL_PROMPT_SEEN_COUNT:"pushowl_install_prompt_seen_count",INSTALL_PROMPT_DISMISSED:"pushowl_install_prompt_dismissed",CONSENT:"pushowl_channels_consent",PUSHOWL_SUBDOMAIN:"pushowl_subdomain",PUSHOWL_ENVIRONMENT:"pushowl_environment",CURRENT_CONFIG_KEY:"pushowl_current_config_key",PHONE:"pushowl_phone"},NOTIFICATION_PERMISSION:{DEFAULT:"default",GRANTED:"granted",DENIED:"denied",DISMISSED:"dismissed",SERVICE_WORKER_FAILURE:"service_worker_failure"},DEFAULT_TIMEOUT:{DEFAULT:0,MOBILE:10}},d={CLICK:"click",ANIMATION_END:"animationend",TRANSITION_END:"transitionend"},u={MINIMIZE:"minimize",MAXIMIZE:"maximize"},p={[c.ENVIRONMENT.staging]:"https://api-staging.pushowl.com",[c.ENVIRONMENT.production]:"https://api.pushowl.com"},h={[c.ENVIRONMENT.staging]:"https://cdn-staging.pushowl.com/config",[c.ENVIRONMENT.production]:"https://cdn.pushowl.com/config"},m={[c.ENVIRONMENT.staging]:"web.com.pushowl.staging",[c.ENVIRONMENT.production]:"web.com.pushowl.prod"},g={HOME:"home",COLLECTION:"collection",PRODUCT:"product",CART:"cart",CHECKOUT:"checkout",ORDER:"order",ORDERS:"orders",THANK_YOU:"thank_you"},b={CART:"cart",ACCOUNT:"account",ORDERS:"orders"},f="subscribe",_="unsubscribe",w="debug",v="disabled",y="browser-prompt",S="custom-prompt",E="optin-flyout",I="price-drop-flyout",x="back-in-stock-flyout",T="wordpress",O="prestashop";function N(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))}function C(e){return new Promise((function(t,n){e.oncomplete=e.onsuccess=function(){return t(e.result)},e.onabort=e.onerror=function(){return n(e.error)}}))}var P;function M(){return P||(P=function(e,t){var n=indexedDB.open(e);n.onupgradeneeded=function(){return n.result.createObjectStore(t)};var i=C(n);return function(e,n){return i.then((function(i){return n(i.transaction(t,e).objectStore(t))}))}}("keyval-store","keyval")),P}const k=Object.prototype.toString,A=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function L(e){var t;return!(!e||(t=e,"[object Error]"!==k.call(t))||"TypeError"!==e.name||"string"!=typeof e.message)&&("Load failed"===e.message?void 0===e.stack:A.has(e.message))}class j{constructor(e){this.key=e,window.localStorage.getItem(e)?this.subscriptions=window.localStorage.getItem(this.key).split(","):this.subscriptions=[]}subscribe(e){this.isSubscribed(e)||(this.subscriptions.push(e.id.toString()),window.localStorage[this.key]=this.subscriptions)}isSubscribed(e){return this.subscriptions.indexOf(e.id.toString())>-1}}class D{constructor(){this.back_in_stock=new j(c.STORAGE_KEYS.BACK_IN_STOCK_SUBSCRIPTIONS),this.price_drop=new j(c.STORAGE_KEYS.PRICE_DROP_SUBSCRIPTIONS),Promise.all([Y.get(c.STORAGE_KEYS.SW_SUBSCRIPTION),Y.get(c.STORAGE_KEYS.SW_SUBSCRIBER_TOKEN)]).then((e=>{var[t,n]=e;t&&n&&(this.sw_subscription_data=t,this.sw_subscriber_token=n)})).catch((e=>{ge("Error while fetching subscription data",e)}))}static getOrCreateToken(e,t){var n=e.getItem(t);if(n)return n;var i=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},o="".concat(i()+i(),"-").concat(i(),"-4").concat(i().substr(0,3),"-").concat(i(),"-").concat(i()).concat(i()).concat(i()).toLowerCase();return e.setItem(t,o),o}static get queue(){try{var e=localStorage.getItem(c.STORAGE_KEYS.NETWORK_REQUEST_QUEUE);return e?JSON.parse(e):[]}catch(e){return[]}}static set queue(e){e?localStorage.setItem(c.STORAGE_KEYS.NETWORK_REQUEST_QUEUE,JSON.stringify(e)):localStorage.removeItem(c.STORAGE_KEYS.NETWORK_REQUEST_QUEUE)}static get email(){return localStorage.getItem(c.STORAGE_KEYS.EMAIL)}static set email(e){localStorage.setItem(c.STORAGE_KEYS.EMAIL,e)}static get phone(){return localStorage.getItem(c.STORAGE_KEYS.PHONE)}static set phone(e){localStorage.setItem(c.STORAGE_KEYS.PHONE,e)}static set pushowlEnvironment(e){localStorage.setItem(c.STORAGE_KEYS.PUSHOWL_ENVIRONMENT,e)}static get consent(){var e=localStorage.getItem(c.STORAGE_KEYS.CONSENT);if(e)try{return JSON.parse(e)}catch(e){return[]}return[]}static set consent(e){localStorage.setItem(c.STORAGE_KEYS.CONSENT,JSON.stringify(e))}static get subscriberToken(){return this.sw_subscriber_token||localStorage.getItem(c.STORAGE_KEYS.SUBSCRIBER_TOKEN)}static set subscriberToken(e){e?(localStorage.setItem(c.STORAGE_KEYS.SUBSCRIBER_TOKEN,e),Y.set(c.STORAGE_KEYS.SUBSCRIBER_TOKEN,e)):(localStorage.removeItem(c.STORAGE_KEYS.SUBSCRIBER_TOKEN),Y.del(c.STORAGE_KEYS.SUBSCRIBER_TOKEN))}static get installPromptDismissed(){return Boolean(localStorage.getItem(c.STORAGE_KEYS.INSTALL_PROMPT_DISMISSED))}static set installPromptDismissed(e){localStorage.setItem(c.STORAGE_KEYS.INSTALL_PROMPT_DISMISSED,"".concat(e))}static get hasLoggediOSStandaloneMode(){return localStorage.getItem(c.STORAGE_KEYS.IOS_STANDALONE_MODE_LOG)}static set hasLoggediOSStandaloneMode(e){localStorage.setItem(c.STORAGE_KEYS.IOS_STANDALONE_MODE_LOG,e)}static get originalURLParams(){return localStorage.getItem(c.STORAGE_KEYS.ORIGINAL_URL_PARAMS)}static set originalURLParams(e){localStorage.setItem(c.STORAGE_KEYS.ORIGINAL_URL_PARAMS,e)}static get visitorToken(){return F()?this.getOrCreateToken(localStorage,c.STORAGE_KEYS.VISITOR_TOKEN):(localStorage.removeItem(c.STORAGE_KEYS.VISITOR_TOKEN),null)}static get sessionToken(){return this.getOrCreateToken(sessionStorage,c.STORAGE_KEYS.SESSION_TOKEN)}static get syncedCustomerId(){return localStorage.getItem(c.STORAGE_KEYS.SYNCED_CUSTOMER_ID)}static set syncedCustomerId(e){localStorage.setItem(c.STORAGE_KEYS.SYNCED_CUSTOMER_ID,e.toString())}static get synced_cart_json(){var e=localStorage.getItem(c.STORAGE_KEYS.SYNCED_CART_JSON);return e?JSON.parse(e):void 0}static set synced_cart_json(e){e&&("[object String]"!==Object.prototype.toString.call(e)&&(e=JSON.stringify(e)),localStorage.setItem(c.STORAGE_KEYS.SYNCED_CART_JSON,e))}static get ac_events(){try{return JSON.parse(localStorage.getItem(c.STORAGE_KEYS.SYNCED_AC_EVENTS))||[]}catch(e){return[]}}static set ac_events(e){var t="string"==typeof e?e:JSON.stringify(e);localStorage.setItem(c.STORAGE_KEYS.SYNCED_AC_EVENTS,t)}static get subscription(){var e=this.sw_subscription_data||localStorage.getItem(c.STORAGE_KEYS.SUBSCRIPTION),t=null;if(e)try{t=JSON.parse(e)}catch(n){t=e}return t}static set subscription(e){var t="string"==typeof e?e:JSON.stringify(e);localStorage.setItem(c.STORAGE_KEYS.SUBSCRIPTION,t),Y.set(c.STORAGE_KEYS.SW_SUBSCRIPTION,t)}static get optinDeferredUntil(){return parseInt(localStorage.getItem(c.STORAGE_KEYS.OPTIN_DEFERRED_UNTIL)||0,10)}static set optinDeferredUntil(e){null===e?localStorage.removeItem(c.STORAGE_KEYS.OPTIN_DEFERRED_UNTIL):localStorage.setItem(c.STORAGE_KEYS.OPTIN_DEFERRED_UNTIL,e)}static get logLevel(){return localStorage.getItem(c.STORAGE_KEYS.LOG_LEVEL)}static set logLevel(e){localStorage.setItem(c.STORAGE_KEYS.LOG_LEVEL,e)}static get hasRaisedUnsubscriptionEvent(){return localStorage.getItem(c.STORAGE_KEYS.HAS_RAISED_UNSUBSCRIPTION_EVENT)}static set hasRaisedUnsubscriptionEvent(e){localStorage.setItem(c.STORAGE_KEYS.HAS_RAISED_UNSUBSCRIPTION_EVENT,e)}static get isPermissionGranted(){return"true"===localStorage.getItem(c.STORAGE_KEYS.IS_PERMISSION_GRANTED)}static set isPermissionGranted(e){e?localStorage.setItem(c.STORAGE_KEYS.IS_PERMISSION_GRANTED,e):localStorage.removeItem(c.STORAGE_KEYS.IS_PERMISSION_GRANTED)}static handlePostSubscription(e,t){D.subscription=e,D.subscriberToken=t,D.hasRaisedUnsubscriptionEvent=""}}const R=()=>{const e=new Error("network error");return e.name="TypeError",e},U=({path:e,method:t,appendPlatform:n=!0,url:i=null,payload:o=null,contentType:r="application/json",acceptType:s="application/json",retryCount:a=null})=>N(void 0,void 0,void 0,(function*(){const l=i?new URL(i):new URL(`${(()=>{const{subdomain:e}=z;return`${z.apiEndpoint}/api/v1/${e}`})()}${e}`);return n&&l.searchParams.append("platform",z.platform),a&&l.searchParams.append("retry_count",`${a}`),new Promise(((e,n)=>{let i=new XMLHttpRequest;i.open(t,l.href,!0),i.setRequestHeader("Content-Type",r),i.setRequestHeader("Accept",s),o?i.send(r.match(/json/)?JSON.stringify(o):o):i.send(),i.onload=function(){let t=i.responseText;if(429===i.status&&n(R()),i.status>=200&&i.status<400){const n=s.match(/json/)?JSON.parse(t):t;e(n)}else n(t)},i.onerror=function(){n(R())},i.onabort=function(){n("Request Aborted")}}))}));class B{static run(){(D.queue||[]).forEach((e=>{setTimeout((()=>{this._request(e)}),1e3*e.retryCount)}))}static _enqueue(e){let t=e;return void 0===e.id&&(t=Object.assign({id:ce()},e)),D.queue=[...D.queue.slice(0,5),t],t}static _retryRequest(e){return N(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},e),{retryCount:((null==e?void 0:e.retryCount)||0)+1});if(t.retryCount>5){return fe("APIRequestEventually",{request:t,connectionType:navigator.connection?navigator.connection.effectiveType:"NA"}),Promise.reject()}const n=this._enqueue(t);setTimeout((()=>{this._request(n)}),1e3*n.retryCount)}))}static _dequeue(e){D.queue=D.queue.filter((t=>t.id!==e.id))}static _request(e){return N(this,void 0,void 0,(function*(){try{this._dequeue(e);return yield U(e)}catch(t){return L(t)?this._retryRequest(e):(fe("APIRequestEventuallyError",{error:t,request:e}),Promise.reject(t))}}))}static get(e){const t=this._enqueue(e);return this._request(Object.assign(Object.assign({},t),{method:"GET"}))}static post(e){const t=this._enqueue(e);return this._request(Object.assign(Object.assign({},t),{method:"POST"}))}static put(e){const t=this._enqueue(e);return this._request(Object.assign(Object.assign({},t),{method:"PUT"}))}}class z{static get scriptUrl(){let e=document.getElementsByTagName("script");for(let t=0;t<e.length;t++){let n=e[t].src||"";if(n.match(/pushowl-\w+.js/))return n.match(/^http/)||(n=n.replace(/^\/\//,"https://")),n}return window.location.href}static get environment(){if(!z.scriptUrl)return c.ENVIRONMENT.production;let e=oe(new URL(z.scriptUrl).search.substring(1)).environment;e&&(e=c.ENVIRONMENT[e]);const t=window.pushowlEnvironment||e||c.ENVIRONMENT.production;return t!==c.ENVIRONMENT.production&&(D.pushowlEnvironment=t),t}static get isProduction(){return z.environment==c.ENVIRONMENT.production}static get apiEndpoint(){return p[z.environment]}static get configApiEndpoint(){return h[z.environment]}static get subdomain(){let e={};z.scriptUrl&&(e=oe(new URL(z.scriptUrl).search.substring(1))),window.pushowl&&window.pushowl.subdomain&&(window.pushowlSubdomain=window.pushowl.subdomain);const t=window.pushowlSubdomain||e.subdomain;return window.pushowlSubdomain=t,window.pushowlSubdomain||e.subdomain}static get platform(){if(!z.scriptUrl)return"shopify";const e=oe(new URL(z.scriptUrl).search.substring(1)).platform;return e&&!["shopify","sendinblue","bigcommerce"].includes(e)&&z.logToServer({message:"unknown platform detected",subdomain:z.subdomain,data:{platform:e,script_url:z.scriptUrl}}),e||"shopify"}static get plugin(){if(!z.scriptUrl)return null;return oe(new URL(z.scriptUrl).search.substring(1)).plugin}static get guid(){if(!z.scriptUrl)return null;let e=oe(new URL(z.scriptUrl).search.substring(1));return window.pushowlGUID||e.guid}static get visitorId(){if(!z.scriptUrl)return null;return oe(new URL(z.scriptUrl).search.substring(1)).visitor_id}static get shopUrl(){return location.protocol+"//"+location.host}static serviceWorkerUrl(e={}){if(e.custom_sw_path&&"disabled"!==e.custom_sw_path)return`${z.shopUrl}${e.custom_sw_path}?v=2&subdomain=${this.subdomain}`;if("bigcommerce"===z.platform)return`${z.shopUrl}/pushowl-service-worker.js?v=2&subdomain=${this.subdomain}`;if("headless"===z.mode){const t=z.platform,n=z.plugin;return"enabled"===e.root_service_worker?`${window.location.origin}/service-worker.js?v=2&subdomain=${this.subdomain}`:"sendinblue"===t&&window.__st&&window.Shopify?`${z.shopUrl}/apps/sendinblue/service-worker.js?v=2&subdomain=${this.subdomain}`:"sendinblue"===t&&n===T?`${z.shopUrl}/wp-content/plugins/mailin/js/service-worker.js?v=2&subdomain=${this.subdomain}`:"sendinblue"===t&&n===O?`${z.shopUrl}/modules/sendinblue/views/js/service-worker.js?v=2&subdomain=${this.subdomain}`:`${z.shopUrl}/${"sendinblue"===t?"sendinblue":"pushowl"}/service-worker.js?v=2&subdomain=${this.subdomain}`}return"enabled"===e.should_log?`${z.shopUrl}/apps/pushowl/sdks/service-worker-logsink.js?v=2&subdomain=${this.subdomain}`:`${z.shopUrl}/apps/pushowl/sdks/service-worker.js?v=2&subdomain=${this.subdomain}`}static get isWorkerAvailable(){return se().isApnsSafari?Promise.resolve(!0):new Promise((e=>{const t=((new G).config||{}).flags,n=z.serviceWorkerUrl(t),i="enabled"===t.sw_get_request;fetch(n,{method:i?"GET":"HEAD"}).then((t=>{if(t.status>=200&&t.status<300)return e(!0);e(!1)}))}))}static get webPushId(){return m[this.environment]||m[c.ENVIRONMENT.production]}static getServiceWorkerUrlWithIntergrations(e,t={}){const n=Object.keys(t).filter((e=>"enabled"===t[e].status));if(!n.length)return e;return`${e}${new URL(e).search?"&":"?"}integrations=${n.join(",")}`}static logToServer({message:e,subdomain:t,sessionHash:n="session",data:i}){return B.post({url:`${z.apiEndpoint}/logs/v1/`,acceptType:"text/plain",payload:[{level:"warn",subscriber_token:window.localStorage&&window.localStorage.getItem("pushowl_subscriber_token"),subdomain:t,message:e,session_hash:n,timestamp:(new Date).toISOString(),data:Object.assign({release:"88a67b0"},i)}]})}static getPreviewLib(e){const t=z.getPreviewBranch();return sessionStorage.setItem("pushowl_branch",t),"local"===t?`https://localhost:3008/latest/sdks/${e}?environment=staging&platform=${z.platform}`:null}static loadPreviewLib(e){const t=document.createElement("script"),n=this.getPreviewLib(e);t.onload=()=>{},n&&(t.src=n,t.setAttribute("async",""),document.head.appendChild(t),window.pushowlPreviewLoaded=!0)}static getPreviewBranch(){const e=new URLSearchParams(window.location.search).get("pushowl_branch")||sessionStorage.getItem("pushowl_branch");return window.pushowlPreviewLoaded?null:e}static isDisabled(){const e=new URLSearchParams(window.location.search).get("poTaskType")||sessionStorage.getItem("poTaskType");sessionStorage.setItem("pushowl_task_type",e);return e===v}}const F=()=>"shopify"!==z.platform||!z.guid||!!window.Shopify.customerPrivacy&&window.Shopify.customerPrivacy.userCanBeTracked(),H=()=>!!window.indexedDB;class Y{static set(e,t){return N(this,void 0,void 0,(function*(){if(H())try{!function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:M())("readwrite",(function(n){return n.put(t,e),C(n.transaction)}))}(e,t)}catch(e){ge("error in indexedDBUtil",e)}}))}static get(e){return N(this,void 0,void 0,(function*(){if(H())try{return function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:M())("readonly",(function(t){return C(t.get(e))}))}(e)}catch(e){return ge("error in indexedDBUtil",e),Promise.reject(e)}}))}static del(e){return N(this,void 0,void 0,(function*(){if(H())try{!function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:M())("readwrite",(function(t){return t.delete(e),C(t.transaction)}))}(e)}catch(e){ge("error in indexedDBUtil",e)}}))}}class G{constructor(){this.configKey="pushowl_shopify_config-".concat(1.5,"-").concat(z.guid),this.permissionKey="pushowl_permission_not_granted-".concat(1.5,"-").concat(z.guid),this.subscriptionVerifiedKey="pushowl_subscription_verified-".concat(1.5,"-").concat(z.guid),this.optinSeenCountKey="pushowl_optin_seen_count",window.sessionStorage.setItem(c.STORAGE_KEYS.CURRENT_CONFIG_KEY,this.configKey),this.embedded_form_viewed_key_prefix="pushowl_embedded_form_viewed"}get config(){var e=window.sessionStorage.getItem(this.configKey),t=null;if(e)try{t=JSON.parse(e)}catch(e){t=null}return t}set config(e){var t="string"==typeof e?e:JSON.stringify(e);window.sessionStorage.setItem(this.configKey,t)}get isPermissionNotGranted(){return"true"===window.sessionStorage.getItem(this.permissionKey)}set isPermissionNotGranted(e){window.sessionStorage.setItem(this.permissionKey,e),window.localStorage.setItem(this.permissionKey,e)}get subscriptionVerified(){return!!window.sessionStorage.getItem(this.subscriptionVerifiedKey)}set subscriptionVerified(e){window.sessionStorage.setItem(this.subscriptionVerifiedKey,e)}get optinSeenCount(){return parseInt(window.sessionStorage.getItem(this.optinSeenCountKey)||0,10)}set optinSeenCount(e){window.sessionStorage.setItem(this.optinSeenCountKey,e)}mark_embedded_form_viewed(e){window.sessionStorage.setItem("".concat(this.embedded_form_viewed_key_prefix,"-").concat(e),!0)}has_viewed_embedded_form(e){return"true"===window.sessionStorage.getItem("".concat(this.embedded_form_viewed_key_prefix,"-").concat(e))}static get installPromptSeenCount(){return parseInt(window.sessionStorage.getItem(c.STORAGE_KEYS.INSTALL_PROMPT_SEEN_COUNT)||0,10)}static set installPromptSeenCount(e){window.sessionStorage.setItem(c.STORAGE_KEYS.INSTALL_PROMPT_SEEN_COUNT,e)}static get landingPageURL(){return sessionStorage.getItem(c.STORAGE_KEYS.LANDING_PAGE_URL)}static set landingPageURL(e){sessionStorage.setItem(c.STORAGE_KEYS.LANDING_PAGE_URL,e)}static get referrer(){return sessionStorage.getItem(c.STORAGE_KEYS.REFERRER)}static set referrer(e){sessionStorage.setItem(c.STORAGE_KEYS.REFERRER,e)}static get landingPageURLParams(){return sessionStorage.getItem(c.STORAGE_KEYS.LANDING_PAGE_URL_PARAMS)}static set landingPageURLParams(e){sessionStorage.setItem(c.STORAGE_KEYS.LANDING_PAGE_URL_PARAMS,e)}static set windowVariablesForOwly(e){sessionStorage.setItem(c.STORAGE_KEYS.PUSHOWL_SUBDOMAIN,e)}}const $=e=>e.startsWith("https://")?e:e.replace("//cdn.shopify.com","https://cdn.shopify.com"),V=e=>"object"==typeof e&&null!==e&&"src"in e?$(e.src):"string"==typeof e?$(e):null;class K extends class{constructor(){}}{constructor(e){super(),this.id=e.id,this.name=e.name,this.price=e.price/100,this.available=e.available,this.featured_image=V(e.featured_image)}}class q extends class{constructor(){}currentVariant(){}}{constructor(e){super(),this.id=e.id,this.title=e.title,this.featured_image=V(e.featured_image),this.price=_e(e.price);const t=e.variants;this.variants=t.map((e=>new K(e)))}getVariant(e){return e=parseInt(e),this.variants.find((t=>t.id==e))}currentVariant(){const e=re("variant");if(!e){for(const e of this.variants)if(e.available)return e;return this.variants[0]}return this.getVariant(e)}}const W=/checkouts\/c\/([^\/]*)\/thank_you/;class Q extends class{constructor(){this.product=null}static get section(){return"home"}static get productAlias(){return"all"}static get customerId(){}static getCart(){}getProductDetails(e=!1,t){}getRawCurrentProductDetails(){}}{constructor(){super(),this.productCache={}}static get section(){try{let{pageType:e}=window.ShopifyAnalytics.meta.page;if(e)return e!==g.PRODUCT&&/\/products\/(\S)/.test(location.pathname)&&(e=g.PRODUCT),e}catch(e){}if(void 0!==window.Shopify&&window.Shopify.Checkout&&("thank_you"===window.Shopify.Checkout.page||"checkout_one_thank_you"===window.Shopify.Checkout.page))return g.THANK_YOU;const{hostname:e}=location,t=location.pathname,n=t.split("/")[0],i=t.split("/")[1];if(W.test(t))return g.THANK_YOU;if(""===n)return g.HOME;if(n===b.CART)return g.CART;if(n===b.ACCOUNT&&i===b.ORDERS)return g.ORDER;if("account"===n&&!n)return g.ORDERS;if("checkout.shopify.com"===e||"checkouts"===i||t.indexOf("checkouts")>=0)return g.CHECKOUT;if(void 0!==window.__st&&window.__st.s){const e=window.__st.s.split("-")[0];if("collections"===e)return g.COLLECTION;if("products"===e)return g.PRODUCT}}static get productAlias(){let e=location.pathname.split("/");e=e.filter((e=>e));const t=e.map((e=>e.toLocaleLowerCase())).lastIndexOf("products");return-1===t?"":e[t+1]}static get customerId(){if("headless"===z.mode)return window.pushowl?window.pushowl.customerId:"";let e=null;return void 0!==window.__st&&window.__st.cid?e=window.__st.cid:void 0!==window.Shopify&&void 0!==window.Shopify.checkout&&window.Shopify.checkout.customer_id&&(e=window.Shopify.checkout.customer_id.toString()),e}static getCart(){return le({url:`/cart.js?random=${Date.now()}`}).then((e=>(e.updated_at=(new Date).toISOString(),e)),(()=>"Cart API failed"))}static get pageName(){const e=window.location.pathname.match(/\/pages\/([a-z0-9_-]+)$/);return e?e[1]:void 0}static get collectionName(){const e=window.location.pathname.match(/collections\/([a-z0-9_-]+)$/);return e?e[1]:void 0}static get collectionId(){return window.ShopifyAnalytics&&window.ShopifyAnalytics.meta&&window.ShopifyAnalytics.meta.page?window.ShopifyAnalytics.meta.page.resourceId:null}getProductDetails(e=!1,t){const n=t||Q.productAlias;return this.productCache[n]&&!e?Promise.resolve(this.productCache[n]):le({url:`/products/${n}.js`}).then((e=>this.productCache[n]=new q(e)))}getRawCurrentProductDetails(){return Promise.resolve(window.ShopifyAnalytics.meta.product)}}function Z(e,t){window.sib&&window.sib[e]?window.sib[e](...t):window.sib.equeue.push({[e]:t})}class J{static loadTracker({isNewTracker:e,maKey:t}){if(e){const e=document.createElement("script");return e.type="text/javascript",e.async=!0,e.src="https://cdn.brevo.com/js/sdk-loader.js",document.body.appendChild(e),window.Brevo=window.Brevo||[],window.Brevo.push(["init",{client_key:t}]),!0}return window.sib={equeue:[],client_key:t},window.sendinblue={ecommerce:{}},l.forEach((function(e){const t=e.name;e.isEcommerce?window.sendinblue.ecommerce[t]=(...e)=>{Z(t,e)}:window.sendinblue[t]=(...e)=>{Z(t,e)};const n=document.createElement("script");n.type="text/javascript",n.id="sendinblue-js",n.async=!0,n.src=`https://sibautomation.com/sa.js?key=${window.sib.client_key}`,document.body.appendChild(n)})),!0}static set emailId(e){window.sib?window.sib.email_id=e:window.Brevo&&(window.Brevo.email_id=e)}static get emailId(){return window.sib?window.sib.email_id:window.Brevo?window.Brevo.email_id:null}}J.track=({eventName:e,eventData:t})=>{try{const n=new G,i={};if(n.config.privacy&&Q.customerId&&(i.customerId=Q.customerId),D.email&&(i.email=D.email),"enabled"!==n.config.flags.brevo_email)return;window.sendinblue?window.sendinblue.track(e,i,t):window.Brevo&&window.Brevo.push(["track",e,i,t])}catch(e){ge("Error in brevoTrack",e)}},J.identify=(e,t)=>{window.sendinblue?window.sendinblue.identify(e,t):window.Brevo&&window.Brevo.push((function(){window.Brevo.identify({identifiers:{email_id:e},attributes:t})}))},J.viewPage=e=>{window.sendinblue?window.sendinblue.page(e):window.Brevo&&window.Brevo.push(["page",e||window.location.pathname])},J.viewCategory=e=>{window.sendinblue?window.sendinblue.ecommerce.viewCategory(String(e)):window.Brevo&&window.Brevo.push(["viewCategory",String(e)])},J.search=(e,t)=>{window.sendinblue?window.sendinblue.ecommerce.search(e,t):window.Brevo&&window.Brevo.push(["search",e,t])},J.viewProduct=e=>{window.sendinblue?window.sendinblue.ecommerce.viewProduct(String(e)):window.Brevo&&window.Brevo.push(["viewProduct",String(e)])};const X=function(){function e(e){e=e||{};const t={url:location.href,headers:{"User-Agent":navigator.userAgent}};return{event_id:"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),platform:"javascript",release:"88a67b0",extra:e,request:t}}function t(e){return Math.random()<.95?Promise.resolve():fetch("https://o79286.ingest.sentry.io/api/1527936/store/?sentry_version=7&sentry_key=8f53de1cdf86490fb8e55518e1a5d035",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function n(n,i){const o=e(i);return o.message=n,t(o)}return{log:n,logException:function(i,o){if(i)try{(o=o||{}).errorDump={str:String(i),stack:i&&i.stack};const n=e(o);return n.exception=function(e){const t=e.stack||"";if(!t)return;const n=t.split("\n").map((e=>e.trim())),i=n.filter((e=>e.startsWith("at"))),o=i.map((function(e){let t="",n=0,i=0,o="";const r=e.split(/[ ]+/);if("at"===r[0].trim()&&r.length>1){let e="";r.length>2?(t=r[1],e=r[2]):e=r[1],e=e.replace("(","").replace(")","");const s=e.split(":");s.length>1&&(n=parseInt(s[s.length-1],0),i=parseInt(s[s.length-2],0),o=s.slice(0,s.length-2).join(":"))}return{in_app:!0,function:t,colno:Number(n)||n,lineno:Number(i)||i,filename:o}}));return o.reverse(),{values:[{type:e.name||"Error",value:e.message||String(e),stacktrace:{frames:o}}]}}(i),t(n)}catch(e){n(String(e),e),n(String(i),i)}}}}();function ee({position:e,device:t,customConfig:n,isExpanded:i}){if("desktop"===t){const t="15px",o="15px",r="15px",s="15px",a=68,l=`calc(50% - ${568}px / 2)`,c=`calc(50% - ${a}px / 2)`,d=`calc(50% - ${a}px / 2)`;if(n.hasOwnProperty("bottom")&&25===n.bottom&&15===n.left&&"auto"===n.right)switch(e){case"bottom-left":return{bottom:o,left:r};case"bottom-right":return{bottom:o,right:s};case"bottom-center":return i?{bottom:o,left:l}:{bottom:o,left:c};case"top-left":return{top:t,left:r};case"top-right":return{top:t,right:s};case"top-center":return i?{top:t,left:l}:{top:t,left:c};case"center-left":return{top:d,left:r};case"center-right":return{top:d,right:s};default:return n}let u={left:r};for(let e in n)u[e]=`${n[e]}px`;return u}if("mobile"===t){const t="8px",i="8px",o="8px",r="8px",s=`calc(50% - ${48}px / 2)`;if(n.hasOwnProperty("bottom")&&n.hasOwnProperty("left")&&15===n.bottom&&15===n.left)switch(e){case"bottom-left":return{bottom:i,left:o};case"bottom-right":return{bottom:i,right:r};case"top-left":return{top:t,left:o};case"top-right":return{top:t,right:r};case"center-left":return{top:s,left:o};case"center-right":return{top:s,right:r};default:return n}let a={isCustomConfig:!0};for(let e in n)a[e]=`${n[e]}px`;return a}}function te(e){let t=document.implementation.createHTMLDocument();return t.body.innerHTML=e,t.body.children[0]}function ne(){let e=navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(e)}function ie(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return null}}function oe(e){return[...new URLSearchParams(e).entries()].reduce(((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:n})),{})}function re(e,t=null){t||(t=window.location.href);return oe(new URL(t).search)[e]}function se(){let t=navigator.userAgent,n=t.search("Firefox")>=0,i=!!window.chrome;const o=void 0!==window.PushManager,r=(({ua:e,maxTouchPoints:t})=>{if(!(/iPad|iPhone|iPod|Mac OS X/.test(e)&&t>0))return!1;const n=e.match(/EdgiOS\/(\d+\.\d+)/);if(n&&n.length>=2)return parseFloat(n[1])>=112;const i=e.match(/Version\/(\d+\.\d+)/);if(i&&i.length>=2)return parseFloat(i[1])>=16.4;const o=e.match(/CPU iPhone OS (\d+_\d+)/);if(o&&o.length>=2)return parseFloat(o[1].replace("_","."))>=16.4;return!1})({ua:t,maxTouchPoints:navigator.maxTouchPoints});let s=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&!r,a=!!window.safari;return{isiOS:r,isSafari:a,isApnsSafari:a&&!o,isFirefox:n,isChrome:i,isOldIOS:s,name:i?e.CHROME:a?e.SAFARI:n?e.FIREFOX:e.OTHER,isAndroid:/(android)/i.test(t.toLowerCase())}}function ae(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),i=new Uint8Array(n.length);for(let e=0;e<n.length;++e)i[e]=n.charCodeAt(e);return i}function le({method:e="GET",url:t,contentType:n="application/json",acceptType:i="application/json",payload:o}){return new Promise(((r,s)=>{let a=new XMLHttpRequest;a.open(e,t,!0),a.setRequestHeader("Content-Type",n),a.setRequestHeader("Accept",i),o?a.send(n.match(/json/)?JSON.stringify(o):o):a.send(),a.onload=function(){let e=a.responseText;if(a.status>=200&&a.status<400){const t=i.match(/json/)?JSON.parse(e):e;r(t)}else s(e)}}))}function ce(e=7){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-",n="",i=e;i--;)n+=t[~~(Math.random()*t.length)];return n}function de({name:e,value:t}){document.cookie=`${e}=${encodeURIComponent(t)};domain=${window.location.hostname}`}function ue({name:e,value:t,days:n=1,path:i="/"}){const o=new Date(Date.now()+864e5*n).toUTCString();document.cookie=e+"="+encodeURIComponent(t)+"; expires="+o+"; path="+i}function pe(e){return document.cookie.split("; ").reduce(((t,n)=>{const i=n.split("=");return i[0]===e?decodeURIComponent(i[1]):t}),"")}function he(e,t){ue({name:e,value:"",days:-1,path:t})}const me=[];function ge(...e){const t=console;me.push(e),(localStorage.getItem("pushowl_log_level")===s.DEBUG||location.href.match(/poTaskType=debug/))&&t.log("%c🦉PushOwl","background: #fb446a; color: white; padding: 2px 0.5em; border-radius: 0.5em;",...e)}function be(e,t){const n=console;me.push([e,t]),(localStorage.getItem("pushowl_log_level")===s.DEBUG||location.href.match(/poTaskType=debug/))&&(e&&ge(e),n.table(t))}function fe(e,t={}){if(navigator.userAgent.match(/Instagram|FBAN/))return;if(L(e))return;if([i.NOTIFICATION_NOT_DEFINED,i.OLD_IOS_DEVICE,i.MICROSOFT_EDGE,i.NO_SERVICE_WORKER,i.INCOGNITO,i.NO_FILE_SYSTEM,i.LOCALSTORAGE_NOT_AVAILABLE].includes(e))return;let n="";window.pushowl&&(n=window.pushowl.getSubdomain?window.pushowl.getSubdomain():window.pushowl.subdomain),X.logException("string"==typeof e?new Error(e):e,Object.assign({breadcrumbs:me,subdomain:n,url:window.location.href},t))}const _e=e=>"number"==typeof e?e/100:e,we=e=>{const t=(e=>2===Object.keys(e).length&&e.hasOwnProperty("items")&&(e.hasOwnProperty("token")||e.hasOwnProperty("checkout_token")))(e),n={id:void 0,data:void 0,checkout_url:void 0},i=0===e.item_count?a.CART_DELETED:a.CART_UPDATED,o=!t&&e.id?e.id:e.token||e.checkout_token;if(o&&(n.id=`cart:${o}`,n.data=e.id&&!t?e:(e=>({affiliation:z.subdomain,currency:_e(e.currency),discount:_e(e.total_discount),total:_e(e.total_price),discount_taxinc:"",items:e.items.map((e=>({available_now:!0,category:null,description_short:e.product_description,disc_amount:_e(e.discounted_price),disc_amount_taxinc:"",disc_rate:"",id:e.id,image:e.image,name:e.title,price:_e(e.price),price_predisc:"",price_predisc_taxinc:"",price_taxinc:"",quantity:e.quantity,size:"",sku:e.sku,tax_amount:"",tax_name:"",tax_rate:"",url:`${window.location.origin}${e.url}`,variant_id:e.variant_id,variant_id_name:e.variant_title}))),shipping:"",shipping_taxinc:"",subtotal:"",subtotal_predisc:"",subtotal_predisc_taxinc:"",subtotal_taxinc:"",tax:"",total_before_tax:"",url:`${window.location.origin}/cart`}))(e)),i===a.CART_UPDATED&&(n||{}).data){const e=n.data.items.reduce(((e,t)=>e?`${e},${t.variant_id}:${t.quantity}`:`${t.variant_id}:${t.quantity}`),"");n.data.checkout_url=`${window.location.origin}/cart/${e}`}J.track({eventName:i,eventData:n})};function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Ee(e,t,n,i,o,r,s){try{var a=e[r](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(i,o)}function Ie(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){Ee(r,i,o,s,a,"next",e)}function a(e){Ee(r,i,o,s,a,"throw",e)}s(void 0)}))}}function xe(e,t,n){return(t=Se(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}class Oe{static _request(e){return N(this,void 0,void 0,(function*(){return yield U(e)}))}static get(e){return this._request(Object.assign(Object.assign({},e),{method:"GET"}))}static post(e){return this._request(Object.assign(Object.assign({},e),{method:"POST"}))}static put(e){return this._request(Object.assign(Object.assign({},e),{method:"PUT"}))}}class Ne{static createRequestObj(e){let t=e;return void 0===e.id&&(t=Object.assign({id:ce()},e)),t}static _retryRequest(e){return N(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},e),{retryCount:((null==e?void 0:e.retryCount)||0)+1});if(t.retryCount>5){return fe("APIRequestSimpleRetry",{request:t,connectionType:navigator.connection?navigator.connection.effectiveType:"NA"}),Promise.reject()}const n=this.createRequestObj(t);setTimeout((()=>{this._request(n)}),1e3*n.retryCount)}))}static _request(e){return N(this,void 0,void 0,(function*(){try{return yield U(e)}catch(t){if(L(t))return this._retryRequest(e);fe("APIRequestSimpleRetryError",{error:t,request:e}),Promise.reject(t)}}))}static get(e){return this._request(Object.assign(Object.assign({},e),{method:"GET"}))}static post(e){return this._request(Object.assign(Object.assign({},e),{method:"POST"}))}static put(e){return this._request(Object.assign(Object.assign({},e),{method:"PUT"}))}}class Ce{constructor(){var{subdomain:e}=z;this.endpoint=z.apiEndpoint,this.subscriber_refresh_endpoint="".concat(this.endpoint,"/api/v1/accounts/").concat(e,"/subscriber/refresh/"),this.checkout_sync_endpoint="".concat(this.endpoint,"/api/v1/").concat(e,"/subscriber/event/checkout-sync/"),Y.set("subscriber_refresh_endpoint",this.subscriber_refresh_endpoint),G.landingPageURL||(G.landingPageURL=document.URL),G.referrer||(G.referrer=document.referrer),G.landingPageURLParams||(G.landingPageURLParams=window.location.search),D.originalURLParams||(D.originalURLParams=window.location.search)}config(){return"headless"===z.mode?Oe.get({path:"/subscriber/config/widget/?guid=".concat(z.guid)}):Ne.get({url:"".concat(z.configApiEndpoint,"/api/v1/").concat(z.subdomain,"/subscriber/config/widget/?guid=").concat(z.guid)})}sendSubscription(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=new G;if(s.config&&s.config.flags&&"enabled"===s.config.flags.disable_resync&&t)return Promise.reject(i.DISABLED_RESYNC);var a={};G.landingPageURLParams.slice(1).split("&").filter((e=>e.includes("utm_"))).forEach((e=>{var[t,n]=e.split("=");a[t]=n}));var l={};D.originalURLParams.slice(1).split("&").filter((e=>e.includes("po_"))).forEach((e=>{var[t,n]=e.split("=");l[t]=n}));var c=window.location.href,d=new URLSearchParams(window.location.search),u=!0;if(d.get("po_url")&&(u=!1,c=d.get("po_url")),se().isOldIOS)return ge("PushOwl does not support iOS before 16.4","platform: ".concat(navigator.platform),"Browser: ".concat(se().name)),Promise.reject(i.OLD_IOS_DEVICE);var p={subscription:e,browser:se().name,previous_token:D.subscriberToken,website_push_id:n||z.webPushId,customer_id:s.config.privacy?Q.customerId:null,language:window.navigator.language,timezone:ie(),dispatch_method:se().isApnsSafari?"apns":"vapid",user_agent:navigator.userAgent,guid:z.guid,optin_seen_count:s.optinSeenCount,context:ye(ye({isPushowlThemeAppExtentionEnabled:!!window.isPushowlThemeAppExtentionEnabled,isiOS:se().isiOS,is_resync:t,subscribe_url:c,session_token:D.sessionToken,visitor_token:D.visitorToken,sib_visitor_id:z.visitorId,widget_source:window.poSubscriptionSource,worker_available:u},a),{},{permanent:ye({},l),temporary:{referrer:G.referrer,landing_url:G.landingPageURL}}),source:o,source_id:r};return Ne.post({url:"".concat(z.apiEndpoint,"/api/v2/accounts/").concat(z.subdomain,"/subscribers/webpush/"),payload:p}).then((e=>(e&&e.result||ge("Invalid /subscribe response. response:",e),e.result.token))).catch((()=>Promise.reject("Send Subscription API Failed")))}refreshSubscription(e,t,n){var o={previous_token:e,previous_subscription:t,current_subscription:n};return o.context={subscribe_url:window.location.href,session_token:D.sessionToken,visitor_token:D.visitorToken,sib_visitor_id:z.visitorId},se().isOldIOS?(ge("PushOwl does not support iOS before 16.4","platform: ".concat(navigator.platform),"Browser: ".concat(se().name)),Promise.reject(i.OLD_IOS_DEVICE)):Oe.post({url:this.subscriber_refresh_endpoint,payload:o}).then((e=>e.result.token)).catch((()=>Promise.reject("Refresh Subscription API Failed")))}syncSubscriber(){var e={data:[{key:"customer_id",value:Q.customerId}],token:D.subscriberToken,context:{subscribe_url:window.location.href,session_token:D.sessionToken,visitor_token:D.visitorToken}};return Ne.put({url:"".concat(z.apiEndpoint,"/api/v1/accounts/").concat(z.subdomain,"/subscriber/"),payload:e})}syncCart(e,t){var n=new G,i={subscriber_token:D.subscriberToken,customer_id:n.config.privacy?t||Q.customerId:null,browser:se().name,cart_json:e,origin:window.location.origin,store_root:((window.Shopify||{}).routes||{}).root||"/"};return Oe.post({path:"/subscriber/event/cart-sync/",payload:i})}syncProductView(e){e.variants&&e.variants.length>0&&(e.variants[0].price=_e(e.variants[0].price));var t={subscriber_token:D.subscriberToken,session:D.sessionToken,viewed_time:~~(Date.now()/1e3),product_data:e,store_root:((window.Shopify||{}).routes||{}).root||"/"};return Oe.post({path:"/subscriber/event/product-view/",payload:t})}sendEvent(e,t){return Ie((function*(){return Ne.post({path:"/subscriber/event/".concat(e,"/"),payload:t}).catch((e=>Promise.reject("Event Update failed")))}))()}unsubscribe(e){return B.post({url:"".concat(z.apiEndpoint,"/api/v1/accounts/").concat(z.subdomain,"/subscriber/unsubscribe/"),payload:{token:e,sib_visitor_id:z.visitorId}})}syncSubscriberTokenAndCheckoutId(e){var t=JSON.stringify({subscriber_token:D.subscriberToken,checkout_token:e});navigator.sendBeacon(this.checkout_sync_endpoint,t)}debugLog(e){return B.post({path:"/subscriber/debug/",payload:e})}subscribeThroughPopup(e){var{subscriptionData:t,flowId:n,nodeId:i,source:o="optin_flows"}=e,r={subscription_data:t,token:D.subscriberToken,source:o,source_id:i};return Oe.post({path:"/dashboard/optin-flows/".concat(n,"/subscribers/"),payload:r})}identifyBrevoContactThroughPhoneNumber(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(new G).config.brevo_ma_key,i=pe("sib_cuid");if(n&&i&&e){var o=D.email?D.email:"".concat(e.replace(/\D/g,""),"@mailin-sms.com");return J.emailId||(J.emailId=o),Oe.post({url:"https://in-automate.brevo.com/p",appendPlatform:!1,payload:{key:n,sib_type:"identify",cuid:i,ma_url:document.location.href,contact:ye(ye({},t),{},{sms:e}),email_id:o}})}}}class Pe{constructor(e){this.inclusions=e.inclusions,this.exclusions=e.exclusions}}class Me{constructor(e){this.url=new Pe(e.url)}processCondition(e,t){var n=t.inclusions,i=t.exclusions;return n.some((t=>new RegExp(t).test(e)))&&!i.some((t=>new RegExp(t).test(e)))}processUrlActivationRule(){try{var e=this.url,t=window.location.href,n=this.processCondition(t,e);return ge("[Checking page url condition]","Condition: ",this.url," / Result: ".concat(n?"✅":"❌")),n}catch(e){return!0}}}class ke{constructor(e){this.sku=e.sku||[],this.url=new Pe(e.url)}processCondition(e,t){var n=t.inclusions,i=t.exclusions;return n.some((t=>new RegExp(t).test(e)))&&!i.some((t=>new RegExp(t).test(e)))}processUrlActivationRule(){try{var e=this.url,t=window.location.href,n=this.processCondition(t,e);return ge("[Checking page url condition]","Condition: ",this.url," / Result: ".concat(n?"✅":"❌")),n}catch(e){return!0}}processSKU(e){return this.sku.includes(e)}}class Ae{constructor(e){this.flyout=new Ge(e.flyout)}}class Le{constructor(e){this.type=e.type,e.config&&(this.config=e.config,this.config.overlay=new je(this.config.overlay))}}class je{constructor(e){this.enabled=e.enabled,this.title=e.title,this.subtitle=e.description||e.subtitle,this.branding=e.branding}}class De{constructor(e){this.money_format=e.money_format}}class Re{constructor(e){this.enabled=e.enabled,this.text=e.text}}class Ue{constructor(e){this.unsubscribe=new Re(e.unsubscribe),this.access_data=new Re(e.access_data),this.delete_data=new Re(e.delete_data)}}class Be{constructor(e){this.enabled=e.enabled,this.message=e.message,this.actions=new Ue(e.actions)}}class ze{constructor(e){this.notification_preference=new Be(e.notification_preference),this.customer_id=e.customer_id}}class Fe{constructor(e){this.bottom=e.bottom||15,this.diameter=e.diameter||68,this.left=e.left||15,this.right=e.right||"auto"}}class He{constructor(e){this.bottom=e.bottom||15,this.left=e.left||15,this.diameter=e.diameter||48}}class Ye{constructor(e){this.desktop=new Fe(e.desktop),this.mobile=new He(e.mobile),this.color=e.color||"rgb(51, 51, 51)",this.overlay=e.overlay}}class Ge{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.enabled=e.enabled,this.is_viewed=e.is_viewed,this.title=e.title,this.buttonText=e.button_text||e.buttonText,this.postSubscriptionTitle=e.post_subscription_message||e.postSubscriptionTitle,this.theme=e.theme,this.position=e.position,this.overlay=e.overlay}static create_instance(e){var t=new Ge;t.enabled=e.enabled,t.is_viewed=e.is_viewed;var n=e.metadata;return t.metadata=n,t.title=e.title||n.title,t.buttonText=e.buttonText||n.yes_button.text,t.postSubscriptionTitle=e.postSubscriptionTitle||n.post_subscription.post_subscription_widget.title,t}}class $e{constructor(e){var t;e=this.preProcess(e),this.home=new Ae(e.home),this.optin=e.optin?new Le(e.optin):null,this.brevo_ma_key=e.brevo_ma_key,this.price_drop=Ge.create_instance(e.price_drop),this.back_in_stock=Ge.create_instance(e.back_in_stock),this.shop=new De(e.shop),this.abandoned_cart_enabled=e.abandoned_cart_enabled,this.browse_abandonment_enabled=e.browse_abandonment_enabled,this.optin_report_enabled=e.optin_report_enabled,this.is_beta=e.is_beta||!1,this.privacy=new ze(e.privacy),this.vapid_public_key=e.vapid_public_key,this.activation_rule=e.activation_rule&&new Me(e.activation_rule),this.automation_rule=e.automation_rule&&new ke(e.automation_rule),this.flyout_config=e.flyout_config&&new Ye(e.flyout_config),this.branding=void 0===e.branding||e.branding,this.logo=e.logo,this.flags=e.flags,this.wid=e.wid,this.integrations=e.integrations,this.website_push_id=e.website_push_id,this.service_worker=e.service_worker,this.ios_prompt=e.ios_prompt,this.optin_flows=e.optin_flows,this.subscription_confirmation=e.subscription_confirmation,this.embedded_forms=e.embedded_forms,this.is_free_plan=null!==(t=e.is_free_plan)&&void 0!==t&&t}preProcess(e){var t=void 0===e.branding||e.branding;return e.optin&&e.optin.config&&e.optin.config.overlay&&(e.optin.config.overlay.branding=t),e}}var Ve={get(e){var t=new G,n=new Ce;return new Promise((i=>{var o=e?null:t.config,r=()=>n.config().then((e=>{var n=new $e(e.result);t.config=n,i(n),ge("Config fetched: from backend.",n)})).catch((e=>{ge("Error on fetching config",e),fe(e)}));if(o){ge("Config fetched: from local cache.",o);try{i(new $e(o))}catch(e){r()}}else r()}))}};function Ke(e){var{subdomain:t}=e;return new Promise(((e,n)=>{"undefined"==typeof Storage&&n(i.STORAGE_NOT_DEFINED),!0!==function(){let e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}()&&n(i.LOCALSTORAGE_NOT_AVAILABLE),/Edge/.test(navigator.userAgent)&&n(i.MICROSOFT_EDGE),t||n(i.NO_SUBDOMAIN),e()}))}var qe=()=>void 0===window.Notification?(ge(i.NOTIFICATION_NOT_DEFINED),!1):se().isOldIOS||se().isApnsSafari||"serviceWorker"in navigator?se().isOldIOS?(ge(i.OLD_IOS_DEVICE),!1):!(se().isiOS&&!navigator.standalone)||(ge(i.NOT_ADDED_TO_HOME_SCREEN),!1):(ge(i.NO_SERVICE_WORKER),!1);function We(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=new Ce;return new Promise(((s,a)=>{r.sendSubscription(e,t,n,i,o).then((t=>{D.handlePostSubscription(e,t),de({name:c.STORAGE_KEYS.SUBSCRIBER_TOKEN,value:t}),s(t)})).catch((e=>{ge("🔴 Send Subscription Failed",e),a(e)}))}))}var Qe={validateOrSyncSubscription(e){var{subscription:t,websitePushId:n}=e;return new Promise(((e,i)=>{var o=D.subscription;if(o)if(t.endpoint===o.endpoint)e();else{var r=new Ce;ge("Refreshing old subscription on server..."),r.refreshSubscription(D.subscriberToken,o,t).then((n=>{D.handlePostSubscription(t,n),de({name:c.STORAGE_KEYS.SUBSCRIBER_TOKEN,value:n}),e()})).catch((e=>{i(e)}))}else ge("Syncing new subscription to server"),We(t,!1,n).then(e)}))},verifySubscriber(e){var{browserHandler:t}=e,n=new G;return ge("Verifying subscriber..."),new Promise(((e,i)=>{D.subscriberToken?D.subscriberToken.match(/failed/i)?(ge("🔴 Subscriber could not be verified. Reason: ",o.INVALID_SUBSCRIBER_TOKEN),i(o.INVALID_SUBSCRIBER_TOKEN)):n.subscriptionVerified?e():se().isApnsSafari?t.isPermissionGranted?e():i():z.isWorkerAvailable.then((n=>{n?t.getSubscription().then((t=>{this.validateOrSyncSubscription({subscription:t}).then((()=>{e(),ge("🟢 Subscriber verified.")})).catch((()=>{i(),ge("🔴 Subscriber could not be verified.")}))})).catch(((e,t)=>{i(e,t),ge("🔴 Subscription could not be fetched.",e,t)})):t.isPermissionGranted?e():i()})):(i(o.NO_SUBSCRIBER_TOKEN),ge("🔴 Subscriber could not be verified. Reason: ",o.NO_SUBSCRIBER_TOKEN))}))},handleSubscription(e){var{browserHandler:t,resolve:n,reject:i,areWeResyncing:o,websitePushId:r,showHintScreenOnError:s,hintscreenHandler:a,enableHintScreen:l,source:c,source_id:d}=e,u=new G,p=new Date;t.getSubscription().then((e=>{l&&a.purge(),We(e,o,r,c,d).then((()=>{var{subscriberToken:e}=D;n({subscriberToken:e}),new BroadcastChannel("pushowl").postMessage({subscriberToken:e,subdomain:z.subdomain})})).catch(i),o?ge("🟢 Resync-subscription successfull. (bcoz permission was granted but didn't have a valid subscription)",e):(ge("🟢 Subscription successfull",e),document.dispatchEvent(new Event("SubscribedToPushOwl")),this.trackBrowserPromptAnalytics(new Date-p,"allowed"))})).catch((e=>{a&&a.purge(),s&&a.show(),u.isPermissionNotGranted=!0,ge("🔴 Subscription failed",e),o||this.trackBrowserPromptAnalytics(new Date-p,e),i(e)}))},subscribe(e){var{enableHintScreen:t=!1,hintScreenData:n=null,showHintScreenOnError:i=!1,websitePushId:o,browserHandler:r,source:s,source_id:a}=e,l=new G,c=r.isPermissionGranted;return new Promise(((e,d)=>{var u;t?Promise.resolve().then((function(){return In})).then((p=>{var{PushowlHintScreenHandler:h}=p;(u=new h({onDismiss:()=>{l.isPermissionNotGranted=!0,l.config.optin_report_enabled&&window.poAnalytics.track("BrowserPromptOverlayDismissed",{optinSeenCount:l.optinSeenCount})}})).show(n),this.handleSubscription({browserHandler:r,resolve:e,reject:d,areWeResyncing:c,websitePushId:o,showHintScreenOnError:i,hintscreenHandler:u,enableHintScreen:t,source:s,source_id:a})})):this.handleSubscription({browserHandler:r,resolve:e,reject:d,areWeResyncing:c,websitePushId:o,showHintScreenOnError:i,hintscreenHandler:null,enableHintScreen:t,source:s,source_id:a})})).catch((e=>{ge("Error encountered in loading Pushowl Hint Screen: ".concat(e.message))}))},subscribeIfNotAlready(e){var{enableHintScreen:t=!1,showHintScreenOnError:n=!0,websitePushId:i,browserHandler:o,hintScreenData:r=null}=e;return new Promise(((e,s)=>{o.isPermissionGranted?D.subscriberToken?e(!0):this.subscribe({enableHintScreen:!1,showHintScreenOnError:!1,websitePushId:i,browserHandler:o,hintScreenData:r}).then((()=>e(!0))).catch((e=>s(e))):this.subscribe({enableHintScreen:t,showHintScreenOnError:n,websitePushId:i,browserHandler:o,hintScreenData:r}).then((()=>e(!0))).catch((e=>s(e)))}))},update(e,t){var n=new Ce;return t.subscriber_token=D.subscriberToken,n.sendEvent(e,t)},subscribeProduct(e){var{context:t,automation:n,product:i,variant:o,source:r}=e;return this.subscribeIfNotAlready({enableHintScreen:!0,websitePushId:t.config.website_push_id,browserHandler:t.browserHandler}).then((()=>this.update(n,{product_id:i.id,product:i,variant:o,source:r,permission:window.Notification&&window.Notification.permission}).then((e=>{var{token:t}=e.result;t&&(D.subscriberToken=t),ge("Product subscribed for ".concat(n,". Product ").concat(i.id,". Variant ").concat(o.id,". Source: ").concat(r))})).catch(fe)))},unsubscribe(e){var t=new Ce;e.isPermissionGranted?t.unsubscribe(D.subscriberToken).then((()=>{ge("🟢 Unsubscription successfull")})).catch((e=>{ge("🔴 Unsubscription failed",e)})):ge("🟢 Unsubscription successfull")},trackBrowserPromptAnalytics(e,t){var n=new G;if(n.config.optin_report_enabled){window.poAnalytics.track("BrowserPromptShown",{delay:e,optinSeenCount:n.optinSeenCount});var i={allowed:"BrowserPromptAllowClicked",denied:"BrowserPromptDenyClicked",default:"BrowserPromptCloseClicked"};i[t]&&window.poAnalytics.track(i[t],{delay:e,optinSeenCount:n.optinSeenCount})}}},Ze=["type"];const Je="po_visitor";class Xe{constructor({endpoint:e,props:t}){this.endpoint=e,this.meta={},this.initVisitor(),this.setVisitorProperties(t);let n=null;F()?n=pe(Je):he(Je,"/"),this.setVisitorProperties({sessionId:n,language:navigator.language})}initVisitor(){let e=null;F()?e=pe(Je):he(Je,"/"),e||(this.meta.isNewVisitor=!0,e=ce(12),F()&&ue({name:Je,value:e,days:365})),this.visitorId=e}setVisitorProperties(e){this.properties=Object.assign(Object.assign({},this.properties),e)}track(e,t,n){if(F()&&this.visitorId&&this.properties.visitorToken)if(this.properties.wid){if(n){const n={sessionId:this.visitorId,sessionToken:this.properties.sessionToken,visitorToken:D.visitorToken,subdomain:z.subdomain,wid:this.properties.wid,language:this.properties.language,flowId:t.flowId,formId:t.formId,nodeId:t.nodeId,channelType:t.channelType,optinType:t.optinType,formStepType:t.formStepType,event:e,platform:z.platform,timestamp:(new Date).toISOString(),uuid:ce()},i=new URL(this.endpoint);return i.searchParams.set("subdomain",n.subdomain),i.searchParams.set("event",n.event),void Oe.post({url:i.toString(),payload:n,acceptType:"text/plain"})}Oe.post({url:this.endpoint,payload:Object.assign(Object.assign({event:e,sessionId:this.visitorId,uuid:ce(15),properties:t},this.properties),{platform:z.platform,timestamp:(new Date).toISOString()}),acceptType:"text/plain"})}else z.logToServer({message:"wid empty",subdomain:z.subdomain,data:Object.assign(Object.assign({},t),{breadcrumbs:me})})}}var et={isSubscribed(e){var{context:t,product:n,featureStorageManager:i}=e;if(!n)return t.browserHandler.isPermissionGranted;if(i){var o=n.currentVariant();return t.browserHandler.isPermissionGranted&&i.isSubscribed(o)}return!1},handlePushOwlButtons(e){var{buttons:t,onClick:n,isSubscribed:i}=e;if(!(se().isiOS&&!navigator.standalone||se().isOldIOS))for(var o of Array.from(t)){var r=o.dataset.pushowlPreDisplay,s=o.dataset.pushowlPreVisibility,a=o.dataset.pushowlPostDisplay,l=o.dataset.pushowlPostVisibility,c=o.dataset.pushowlPostSubscriptionMessage;i?(a&&(o.style.display=a),l&&(o.style.visibility=l),c&&(o.innerText=c)):("none"===o.style.display&&(o.style.display=r||"block"),"hidden"===o.style.visibility&&(o.style.visibility=s||"visible")),o.addEventListener("click",n)}},subscribeButtons(e){var{context:t}=e,n=document.querySelectorAll(".js-pushowl--subscribe");ge("".concat(n.length," custom subscribe button(s) detected."),n),document.addEventListener("SubscribedToPushOwl",(()=>{n.forEach((e=>{var t=e.dataset.pushowlPostSubscriptionMessage;t&&(e.innerText=t)}))})),this.handlePushOwlButtons({buttons:n,onClick:e=>{Qe.subscribeIfNotAlready({enableHintScreen:"false"!==e.target.dataset.pushowlOverlay,websitePushId:t.config.website_push_id,browserHandler:t.browserHandler}).then((()=>{var t=e.target.dataset.pushowlPostSubscriptionMessage;t&&(e.target.innerText=t)}),null)},isSubscribed:this.isSubscribed({context:t})})},priceDropButtons(e){var{context:t,onSuccess:i}=e,o=document.querySelectorAll(".js-pushowl--pd");o.length&&(ge("".concat(o.length," custom price drop button(s) detected."),o),t.storeLib.getProductDetails().then((e=>{this.handlePushOwlButtons({buttons:o,onClick:o=>{var r=e.currentVariant();Qe.subscribeProduct({context:t,automation:c.EVENT_API_PATH.PRICE_DROP,product:e,variant:r,source:n.CUSTOM_BUTTONS}).then((()=>{t.storageManager.price_drop.subscribe(r);var n=o.target.dataset.pushowlPostSubscriptionMessage;n&&(o.target.innerText=n),i(e)})).catch(fe)},isSubscribed:this.isSubscribed({context:t,product:e,featureStorageManager:t.storageManager.price_drop})})})))},backInStockButtons(e){var{context:t,onSuccess:i}=e,o=document.querySelectorAll(".js-pushowl--bis");o.length&&(ge("".concat(o.length," custom back-in-stock button(s) detected."),o),t.storeLib.getProductDetails().then((e=>{this.handlePushOwlButtons({buttons:o,onClick:o=>{var r=e.currentVariant();Qe.subscribeProduct({context:t,automation:c.EVENT_API_PATH.BACK_IN_STOCK,product:e,variant:r,source:n.CUSTOM_BUTTONS}).then((()=>{t.storageManager.back_in_stock.subscribe(r);var n=o.target.dataset.pushowlPostSubscriptionMessage;n&&(o.target.innerText=n),i(e)})).catch(fe)},isSubscribed:this.isSubscribed({context:t,product:e,featureStorageManager:t.storageManager.back_in_stock})})})))}};const tt=(e,t,n)=>{let i=n.replace("{{amount}}",parseFloat(t).toFixed(2));return e.replace("{{product_price}}",i).replace("{{variant_price}}",i)};var nt={renderFlyout(e){var{flyoutHandler:t,title:n,buttonText:i,automationType:o,buttonListener:r,theme:s,position:a,overlay:l}=e;document.querySelectorAll(".pushowl-widget-node").forEach((e=>{e&&e.remove()})),n&&(t.setState({title:n,buttonText:i,buttonListener:r,theme:s,position:a,overlay:l}),ge("Product flyout shown for: ",o),ge("🟠 Optin prompt was not shown. Reason: Product flyout shown"))},renderOptin(e){var{rootContext:t,flyoutHandler:n}=e,i=t.config.home.flyout,{title:o,theme:r,position:s,buttonText:a,overlay:l}=i;window.Notification&&window.Notification.permission===c.NOTIFICATION_PERMISSION.DEFAULT?(n.setState({title:o,buttonText:a,theme:r,position:s,overlay:l,buttonListener:()=>{window.poSubscriptionSource=E,Qe.subscribeIfNotAlready({enableHintScreen:l&&l.enabled,websitePushId:t.config.website_push_id,browserHandler:t.browserHandler,hintScreenData:l}).then((()=>{n.setState({title:i.postSubscriptionTitle,position:s,theme:r})})).catch((e=>{fe(e)}))}}),ge("Flyout shown.","Config: ",i)):ge("Flyout not shown.","Config: ",i,"Permission: ",window.Notification.permission)},renderBackInStock(e){var{rootContext:t,flyoutHandler:i,product:o,variant:s}=e,a=new D,{back_in_stock:l,flyout_config:d}=t.config,u=l.enabled,p=a.back_in_stock.isSubscribed(s);if(u)if(window.Notification&&window.Notification.permission===c.NOTIFICATION_PERMISSION.GRANTED&&p){var h=tt(l.postSubscriptionTitle,s.price,t.config.shop.money_format),{theme:m,position:g,overlay:b}=l.metadata;this.renderFlyout({flyoutHandler:i,title:h,theme:m,position:g,overlay:b,automationType:r.BACK_IN_STOCK})}else{var{theme:f,position:_,overlay:w}=l.metadata;this.renderFlyout({flyoutHandler:i,title:l.title,buttonText:l.buttonText,theme:f,position:_,overlay:w,buttonListener:()=>{i.setState({title:l.postSubscriptionTitle,position:_,theme:f});var{overlay:e}=l.metadata;window.Notification&&"default"===window.Notification.permission&&(window.poSubscriptionSource=x),Qe.subscribeIfNotAlready({enableHintScreen:!!d.overlay,showHintScreenOnError:!!d.overlay,websitePushId:t.config.website_push_id,browserHandler:t.browserHandler,hintScreenData:e}).then((()=>{Qe.update(c.EVENT_API_PATH.BACK_IN_STOCK,{product_id:o.id,product:o,variant:s,source:n.FLYOUT_WIDGET,permission:window.Notification&&window.Notification.permission}).then((e=>{a.back_in_stock.subscribe(s);var{token:t}=e.result;t&&(D.subscriberToken=t),ge("Product subscribed for ".concat(c.EVENT_API_PATH.BACK_IN_STOCK,". Product ").concat(o.id,". Variant ").concat(s.id,". Source: ").concat(n.FLYOUT_WIDGET))})).catch((e=>{fe(e)}))}))},automationType:r.BACK_IN_STOCK})}},renderPriceDrop(e){var{rootContext:t,flyoutHandler:i,product:o,variant:s}=e,a=new D,{price_drop:l,flyout_config:d}=t.config,u=l.enabled,p=a.price_drop.isSubscribed(s),h=l.is_viewed;if(u&&!h)if(window.Notification&&window.Notification.permission===c.NOTIFICATION_PERMISSION.GRANTED&&p){var{theme:m,position:g,overlay:b}=l.metadata;this.renderFlyout({flyoutHandler:i,theme:m,position:g,overlay:b,title:l.postSubscriptionTitle,automationType:r.PRICE_DROP})}else{var f=t.config.price_drop.metadata,{theme:_,position:w,overlay:v}=f;this.renderFlyout({theme:_,position:w,overlay:v,flyoutHandler:i,title:tt(l.title,s.price,t.config.shop.money_format),buttonText:l.buttonText,buttonListener:()=>{i.setState({title:l.postSubscriptionTitle,position:w,theme:_});var{overlay:e}=l.metadata;window.Notification&&"default"===window.Notification.permission&&(window.poSubscriptionSource=I),Qe.subscribeIfNotAlready({enableHintScreen:!!d.overlay,showHintScreenOnError:!!d.overlay,websitePushId:t.config.website_push_id,browserHandler:t.browserHandler,hintScreenData:e}).then((()=>{Qe.update(c.EVENT_API_PATH.PRICE_DROP,{product_id:o.id,product:o,variant:s,subscribed_price:s.price,source:n.FLYOUT_WIDGET,permission:window.Notification&&window.Notification.permission}).then((e=>{a.price_drop.subscribe(s);var{token:t}=e.result;t&&(D.subscriberToken=t),ge("Product subscribed for ".concat(c.EVENT_API_PATH.PRICE_DROP,". Product ").concat(o.id,". Variant ").concat(s.id,". Source: ").concat(n.FLYOUT_WIDGET))})).catch((e=>{fe(e)}))}))},automationType:r.PRICE_DROP})}}};const it={name:"Pushowl Web Notifications",short_name:"PushOwl",description:"",icons:[],start_url:"/",scope:"/",display:"standalone",orientation:"portrait",background_color:"#fff",theme_color:"#000000"};class ot{constructor(e){this.syncTriggerManager=e,this.activeFlows=new Map,this.triggeredFlows=new Set,this.triggerSources=new Map}setup(e,t){var n=this;if(e&&t&&!this.triggeredFlows.has(e.id)){var i=e.id,o={flow:e,callback:function(){for(var e=n.triggerSources.get(i),o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];t(e,...r)},triggered:!1,enabledConditions:{exitIntent:Boolean(e.exitIntent),scrollDepth:Boolean(e.scrollDepthEnabled),timeSpent:Boolean(e.timeSpentEnabled)},metConditions:{exitIntent:!1,scrollDepth:!1,timeSpent:!1}};this.activeFlows.set(i,o),e.exitIntent&&this._setupExitIntent(i,e.requireAllConditions),e.scrollDepthEnabled&&this._setupScrollDepth(i,e.requireAllConditions),e.timeSpentEnabled&&this._setupTimeSpent(i,e.requireAllConditions)}}_setupExitIntent(e,t){var n=this.activeFlows.get(e),i=i=>{i.clientY<=0&&(t?(n.metConditions.exitIntent=!0,this._checkEnabledConditions(e)):this._triggerFlow(e,"exitIntent"))};n.exitIntentHandler=i,document.documentElement.addEventListener("mouseleave",i)}_setupScrollDepth(e,t){var n,i=this.activeFlows.get(e),o=i.flow.scrollDepth,r=()=>{clearTimeout(n),n=setTimeout((()=>{var n=this._calculateScrollPercentage();ge("[AsyncTriggerManager] Current scroll depth: ".concat(n.toFixed(2),"%, Target: ").concat(o,"%")),n>=o&&(t?(i.metConditions.scrollDepth=!0,this._checkEnabledConditions(e)):this._triggerFlow(e,"scrollDepth"))}),100)};i.scrollHandler=r,window.addEventListener("scroll",r)}_setupTimeSpent(e,t){var n=this.activeFlows.get(e),i=setTimeout((()=>{t?(n.metConditions.timeSpent=!0,this._checkEnabledConditions(e)):this._triggerFlow(e,"timeSpent")}),1e3*n.flow.timeSpent);n.timeoutId=i}_checkEnabledConditions(e){var t=this.activeFlows.get(e);t&&!t.triggered&&(Object.entries(t.enabledConditions).every((e=>{var[n,i]=e;return!i||t.metConditions[n]}))&&this._triggerFlow(e,"allConditions"))}_triggerFlow(e,t){var n=this.activeFlows.get(e);!n||n.triggered||this.triggeredFlows.has(e)||(ge("[AsyncTriggerManager] Flow ".concat(e," triggered by: ").concat(t)),this.triggerSources.set(e,t),n.triggered=!0,this.triggeredFlows.add(e),n.callback(),this._cleanupFlowListeners(e),this.activeFlows.delete(e))}_calculateScrollPercentage(){var e=window.innerHeight,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);return(window.pageYOffset||document.documentElement.scrollTop)/(t-e)*100}_cleanupFlowListeners(e){var t=this.activeFlows.get(e);t&&(t.exitIntentHandler&&document.documentElement.removeEventListener("mouseleave",t.exitIntentHandler),t.scrollHandler&&window.removeEventListener("scroll",t.scrollHandler),t.timeoutId&&clearTimeout(t.timeoutId))}getTriggerSource(e){return this.triggerSources.get(e)}cleanup(e){this._cleanupFlowListeners(e),this.activeFlows.delete(e),this.triggeredFlows.delete(e)}cleanupAll(){this.activeFlows.forEach(((e,t)=>{this.cleanup(t)}))}}class rt{constructor(){this.conditions=new Map,ge("🪵 SyncTriggerManager initialized")}setup(e){ge("🪵 Setting up sync conditions for flow:",e.id),this.conditions.set(e.id,{urlTargeting:{inclusionUrls:e.inclusionUrls||[],exclusionUrls:e.exclusionUrls||[],inclusionUrlsEnabled:e.inclusionUrlsEnabled||!1,exclusionUrlsEnabled:e.exclusionUrlsEnabled||!1},deviceType:this._normalizeDeviceType(e.deviceType)})}_normalizeDeviceType(e){return!e||0===e.length||e.includes("all")?[]:e}checkAllConditions(e){var t=this.conditions.get(e.id);if(ge("🪵 Checking conditions for flow:",{flowId:e.id,conditions:t}),!t)return ge("🪵 No conditions found for flow:",e.id),!0;var n=this.checkUrlConditions(t.urlTargeting),i=this.checkDeviceTargetingConditions(t.deviceType);return ge("🪵 Condition check results:",{flowId:e.id,urlCheck:n,deviceCheck:i}),n&&i}checkUrlConditions(e){var t,n,i=window.location.href,o=!e.inclusionUrlsEnabled;if(e.exclusionUrlsEnabled&&(null===(t=e.exclusionUrls)||void 0===t?void 0:t.length)>0)for(var r of e.exclusionUrls)if(this._matchUrl(r,i))return!1;if(e.inclusionUrlsEnabled&&(null===(n=e.inclusionUrls)||void 0===n?void 0:n.length)>0)for(var s of(o=!1,e.inclusionUrls))if(this._matchUrl(s,i)){o=!0;break}return o}_matchUrl(e,t){var n=t.replace(/^https?:\/\//,""),i=e.url.replace(/^https?:\/\//,"");switch(e.type){case"contains":return n.includes(i);case"exact":return n===i;default:return!1}}checkDeviceTargetingConditions(e){return null==e||!e.length||e.some((e=>{switch(e){case"mobile":return ne();case"desktop":return!ne();case"mobile_ios":return se().isiOS||se().isOldIOS;case"mobile_android":return se().isAndroid;default:return!0}}))}}class st{constructor(e){this.config=e,this.flows=new Map,this.syncTriggerManager=new rt,this.asyncTriggerManager=new ot(this.syncTriggerManager),ge("🪵 OptinFlowManager initialized")}addOptinFlow(e,t){ge("🪵 Adding flow:",e.id),this.flows.set(e.id,{flow:e,renderCallback:t}),this.syncTriggerManager.setup(e)}initialize(){ge("🪵 Initializing flows, total flows:",this.flows.size),this.flows.forEach((e=>{var t,n,i,{flow:o,renderCallback:r}=e;if(ge("🪵 Processing flow:",o.id),null!==(t=o.exclusion_countries_enabled&&o.exclusion_countries.includes(null===(n=window)||void 0===n||null===(i=n.Shopify)||void 0===i?void 0:i.country))&&void 0!==t&&t)ge("🪵 User in restricted country, skipping flow:",o.id);else{var s=o.exitIntent||o.scrollDepthEnabled||o.timeSpentEnabled,a=o.inclusionUrlsEnabled||o.exclusionUrlsEnabled||o.deviceType&&o.deviceType.length>0;if(ge("🪵 Flow triggers:",{hasAsyncTriggers:s,hasSyncConditions:a,flow:o.id}),!s&&!a)return ge("🪵 No triggers configured, rendering immediately for flow:",o.id),void r();if(a){var l=this.syncTriggerManager.checkAllConditions(o);if(ge("🪵 Sync conditions check result:",{flowId:o.id,passed:l}),!l)return void ge("🪵 Sync conditions failed for flow:",o.id)}s?(ge("🪵 Setting up async triggers for flow:",o.id),this.asyncTriggerManager.setup(o,r)):a&&(ge("🪵 Only sync conditions exist and passed, rendering flow:",o.id),r())}}))}}var at,lt,ct;function dt(e,t){if(ct=new Date,e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return"html";var n={root:document.body,idName:e=>!0,className:e=>!0,tagName:e=>!0,attr:(e,t)=>!1,seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4,timeoutMs:void 0};at=ye(ye({},n),t),lt=function(e,t){if(e.nodeType===Node.DOCUMENT_NODE)return e;if(e===t.root)return e.ownerDocument;return e}(at.root,n);var i=ut(e,"all",(()=>ut(e,"two",(()=>ut(e,"one",(()=>ut(e,"none")))))));if(i){var o=yt(St(i,e));return o.length>0&&(i=o[0]),ht(i)}throw new Error("Selector was not found.")}function ut(e,t,n){for(var i=null,o=[],r=e,s=0,a=function(){var e=(new Date).getTime()-ct.getTime();if(void 0!==at.timeoutMs&&e>at.timeoutMs)throw new Error("Timeout: Can't find a unique selector after ".concat(e,"ms"));var a=_t(function(e){var t=e.getAttribute("id");if(t&&at.idName(t))return{name:"#"+CSS.escape(t),penalty:0};return null}(r))||_t(...function(e){var t=Array.from(e.attributes).filter((e=>at.attr(e.name,e.value)));return t.map((e=>({name:"[".concat(CSS.escape(e.name),'="').concat(CSS.escape(e.value),'"]'),penalty:.5})))}(r))||_t(...function(e){return Array.from(e.classList).filter(at.className).map((e=>({name:"."+CSS.escape(e),penalty:1})))}(r))||_t(function(e){var t=e.tagName.toLowerCase();if(at.tagName(t))return{name:t,penalty:2};return null}(r))||[{name:"*",penalty:3}],l=function(e){var t=e.parentNode;if(!t)return null;var n=t.firstChild;if(!n)return null;var i=0;for(;n&&(n.nodeType===Node.ELEMENT_NODE&&i++,n!==e);)n=n.nextSibling;return i}(r);if("all"==t)l&&(a=a.concat(a.filter(ft).map((e=>bt(e,l)))));else if("two"==t)a=a.slice(0,1),l&&(a=a.concat(a.filter(ft).map((e=>bt(e,l)))));else if("one"==t){var[c]=a=a.slice(0,1);l&&ft(c)&&(a=[bt(c,l)])}else"none"==t&&(a=[{name:"*",penalty:3}],l&&(a=[bt(a[0],l)]));for(var d of a)d.level=s;if(o.push(a),o.length>=at.seedMinLength&&(i=pt(o,n)))return"break";r=r.parentElement,s++};r;){if("break"===a())break}return i||(i=pt(o,n)),!i&&n?n():i}function pt(e,t){var n=yt(vt(e));if(n.length>at.threshold)return t?t():null;for(var i of n)if(gt(i))return i;return null}function ht(e){for(var t=e[0],n=t.name,i=1;i<e.length;i++){var o=e[i].level||0;n=t.level===o-1?"".concat(e[i].name," > ").concat(n):"".concat(e[i].name," ").concat(n),t=e[i]}return n}function mt(e){return e.map((e=>e.penalty)).reduce(((e,t)=>e+t),0)}function gt(e){var t=ht(e);switch(lt.querySelectorAll(t).length){case 0:throw new Error("Can't select any node with this selector: ".concat(t));case 1:return!0;default:return!1}}function bt(e,t){return{name:e.name+":nth-child(".concat(t,")"),penalty:e.penalty+1}}function ft(e){return"html"!==e.name&&!e.name.startsWith("#")}function _t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.filter(wt);return i.length>0?i:null}function wt(e){return null!=e}function*vt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.length>0)for(var n of e[0])yield*vt(e.slice(1,e.length),t.concat(n));else yield t}function yt(e){return[...e].sort(((e,t)=>mt(e)-mt(t)))}function*St(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{counter:0,visited:new Map};if(e.length>2&&e.length>at.optimizedMinLength)for(var i=1;i<e.length-1;i++){if(n.counter>at.maxNumberOfTries)return;n.counter+=1;var o=[...e];o.splice(i,1);var r=ht(o);if(n.visited.has(r))return;gt(o)&&Et(o,t)&&(yield o,n.visited.set(r,!0),yield*St(o,t,n))}}function Et(e,t){return lt.querySelector(ht(e))===t}const It="pushowl-optin-container";var xt;!function(e){e.CONSENT_EMAIL_COPY="consent-email-copy",e.CONSENT_SMS_COPY="consent-sms-copy"}(xt||(xt={}));const Tt="root",Ot=(xt.CONSENT_EMAIL_COPY,xt.CONSENT_SMS_COPY,"logo"),Nt="wheel",Ct={email:"Enter your Email address",phone:"9123456789"},Pt={0:0,xs:10,sm:12,md:16,lg:20,xl:26,"2xl":30,"3xl":36,"4xl":42,"5xl":48,"6xl":54},Mt="#0475fd";var kt,At;!function(e){e.BOX="BOX",e.TEXT="TEXT",e.INPUT="INPUT",e.IMAGE="IMAGE",e.BUTTON="BUTTON",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.HTML="HTML",e.DISCOUNT="DISCOUNT",e.CATEGORY="CATEGORY",e.MULTI_SELECT="MULTI_SELECT",e.WHEEL="WHEEL"}(kt||(kt={})),function(e){e.CENTERED="centered",e.BOTTOM_LEFT="bottom_left",e.BOTTOM_CENTERED="bottom_centered",e.BOTTOM_RIGHT="bottom_right",e.TOP_LEFT="top_left",e.TOP_CENTERED="top_centered",e.TOP_RIGHT="top_right"}(At||(At={}));const Lt=(e,t=14)=>{const n={textOverflow:"ellipsis",overflow:"hidden",fontSize:`${t}px`,lineHeight:1.2*t+"px",paddingBlockEnd:"0px"};if(!e)return n;const i={"4xl":"10px","3xl":"10px","2xl":"8px",xl:"6px",lg:"2px",md:"0px",sm:"0px",xs:"0px",0:"0px"}[e]||"0px",o=Pt[e]||t,r=o>16?"bold":"normal";return Object.assign(Object.assign({},n),{fontSize:`${o}px`,lineHeight:1.2*o+"px",fontWeight:r,paddingBlockEnd:i})},jt=e=>{var t;if(!e)return 0;return null!==(t={0:0,xs:1,sm:2,md:3,lg:4,xl:5,"2xl":6,"3xl":7,"4xl":8,"5xl":9,"6xl":10}[e])&&void 0!==t?t:0},Dt=(e,t)=>e&&t?{border:`${jt(t)}px solid ${e}`}:{},Rt=e=>{if("full"===e)return"100%";return`${{0:0,xs:2,sm:4,md:6,lg:8,xl:10,"2xl":12,"3xl":14,"4xl":16,"5xl":20,"6xl":26}[e]||0}px`},Ut=e=>{var t,n;const i=!(null==e?void 0:e.type)||"auto"===(null==e?void 0:e.type)||!(null==e?void 0:e.zoom);return{backgroundPosition:`${(null===(t=null==e?void 0:e.pos)||void 0===t?void 0:t[0])||0}% ${(null===(n=null==e?void 0:e.pos)||void 0===n?void 0:n[1])||0}%`,backgroundSize:i?"cover":`${null==e?void 0:e.zoom}%`}},Bt=(e,t,n)=>{var i;const{align:o,dir:r,bgUrl:s,pad:a,bgColor:l,css:c,fill:d,borderCol:u,borderWidth:p,radius:h,hidden:m,bgDims:g,bgHidden:b,redirectURL:f}=e.attr||{},_=!Vt(e,Nt)&&s&&t&&e.id!==Tt,w=((e,t)=>{if(!e||0===(null==e?void 0:e.length))return{};const n={},i="string"==typeof e?["left",e]:e;return"LR"===t?(i.forEach(((e,t)=>{switch(e){case"center":n.alignItems="center",0===t&&(n.textAlign="center");break;case"left":n.justifyContent="flex-start",0===t&&(n.textAlign="left");break;case"right":n.justifyContent="flex-end",0===t&&(n.textAlign="right");break;case"bottom":n.alignItems="flex-end";break;case"top":n.alignItems="flex-start";break;default:return n}return{}})),n):(i.forEach(((e,t)=>{switch(e){case"center":n.justifyContent="center",0===t&&(n.textAlign="center",n.alignItems="center");break;case"left":n.alignItems="flex-start",0===t&&(n.textAlign="left");break;case"right":n.alignItems="flex-end",0===t&&(n.textAlign="right");break;case"bottom":n.justifyContent="flex-end";break;case"top":n.justifyContent="flex-start";break;default:return n}return{}})),n)})(o,r),v=((e,t)=>e?{flexDirection:"column"}:{flexDirection:"LR"===t?"row":"column"})(t,r),y=_?{}:(({url:e,bgColor:t,bgHidden:n,isRootNode:i,bgDims:o})=>{const r=i?t||"#fff":t||"inherit",s=o?Ut(o):{};return!e||n?{background:r,backgroundImage:"unset"}:e?Object.assign({backgroundImage:`url("${e}") ${i?`, linear-gradient(to right, ${r}, ${r})`:""}`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center center"},s):{}})({url:s,bgColor:l,bgHidden:b,isRootNode:e.id===Tt,bgDims:g}),S=(e=>{var t;return e?{padding:`${null!==(t={0:0,xs:2,sm:4,md:6,lg:8,xl:10,"2xl":12,"3xl":14,"4xl":16,"5xl":20,"6xl":26}[e])&&void 0!==t?t:6}px`}:{padding:"6px"}})(a),E=(e=>"string"==typeof e?e:"boolean"==typeof e?e?"50%":"":"50%")(d);let I=0;const x=Dt(u||"#ffffff",p||"0");let T="flex";const O="boolean"==typeof m&&m;return e.id!==Tt?((O||_)&&(T="none"),!s||(null==n?void 0:n.pad)&&"0"===(null==n?void 0:n.pad)||!(null==n?void 0:n.radius)||"0"===(null==n?void 0:n.radius)?s||(I=Rt(h||"0")):I=((e,t)=>{const n=parseInt(Rt(e).split("px")[0],10),i=parseInt(Rt(t).split("px")[0],10),o=Math.abs(n-i);return 0===o?i/2:o})((null==n?void 0:n.radius)||"0",(null==n?void 0:n.pad)||"0")):I=Rt(h||"0"),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({position:"relative",borderRadius:I,display:T,flex:E,flexShrink:s?0:1,minHeight:s?"200px":"unset",minWidth:0,width:"text_content"===e.id?"100%":"unset",overflow:e.id===Tt?"hidden":"unset",transform:`scale(${(null===(i=null==n?void 0:n.theme)||void 0===i?void 0:i.scale)/100||1})`,cursor:f?"pointer":"unset"},x),v),S),w),y),c||{})},zt=(e,t,n,i=!1)=>{if(i)return e?{width:"100%",alignItems:"center",margin:"0 auto",height:(null==n?void 0:n.fixedHeight)?`${null==n?void 0:n.height}px`:"unset"}:{width:"100%",maxWidth:"600px",margin:"0 auto",height:(null==n?void 0:n.fixedHeight)?`${null==n?void 0:n.height}px`:"unset"};if(e)switch(t){case"step_1":case"step_2":return{minWidth:"90%",minHeight:"450px"};case"teaser":return{width:(null==n?void 0:n.width)?`${null==n?void 0:n.width}px`:"360px",minHeight:"72px"};default:return{minWidth:"100%",minHeight:"450px"}}return"teaser"===t?{width:(null==n?void 0:n.width)?`${null==n?void 0:n.width}px`:"360px",minHeight:"72px"}:{maxWidth:(null==n?void 0:n.width)?`${null==n?void 0:n.width}px`:"530px",minWidth:(null==n?void 0:n.width)?`${null==n?void 0:n.width}px`:"530px",minHeight:(null==n?void 0:n.fixedHeight)?`${null==n?void 0:n.height}px`:"500px",height:(null==n?void 0:n.fixedHeight)?`${null==n?void 0:n.height}px`:"unset"}},Ft=e=>{const t="12px",n="50%";switch(e){case At.CENTERED:return{left:n,top:n,transform:"translate(-50%, -50%)"};case At.BOTTOM_LEFT:return{left:t,bottom:t};case At.BOTTOM_RIGHT:return{right:t,bottom:t};case At.TOP_RIGHT:return{right:t,top:t};case At.TOP_LEFT:return{left:t,top:t};case At.TOP_CENTERED:return{top:t,left:n,transform:"translateX(-50%)"};case At.BOTTOM_CENTERED:return{bottom:t,left:n,transform:"translateX(-50%)"};default:return{left:n,top:n,transform:"translate(-50%, -50%)"}}},Ht=e=>{const t={},n=i=>{if(i.id.startsWith("custom_field")&&(t[i.id]=i.attr),i.children){if(!Array.isArray(i.children)||e.type===kt.HTML)return t;i.children.forEach((e=>"string"!=typeof e&&n(e)))}};return n(e),t},Yt=e=>{switch(e){case"DD/MM/YYYY":return"^(0[1-9]|[12][0-9]|3[01])/(0[1-9]|1[0-2])/([0-9]{4})$";case"MM/DD/YYYY":return"^(0[1-9]|1[0-2])/(0[1-9]|[12][0-9]|3[01])/([0-9]{4})$";case"YYYY/MM/DD":return"^([0-9]{4})/(0[1-9]|1[0-2])/(0[1-9]|[12][0-9]|3[01])$"}},Gt=e=>{const t=parseInt(e.slice(1),16);return.299*(t>>16&255)+.587*(t>>8&255)+.114*(255&t)<128};function $t(e){return"type"in e}const Vt=(e,t,n=8,i)=>{if(!Array.isArray(e)){if(i?i(e.id,t):e.id===t)return e;if(0===n||!e.children)return null;const o=Array.isArray(e.children)?e.children:[e.children];for(const e of o)if("string"!=typeof e&&$t(e)){const o=Vt(e,t,n-1,i);if(o)return o}}return null},Kt=({nodeId:e,flowId:t,channelType:n,optinType:i})=>({formId:o,event:r,stepType:s})=>{window.poAnalytics.track(r,{flowId:t,nodeId:e,formId:o,channelType:n,optinType:i,formStepType:s},!0)},qt=({event:e,optinType:t,flowId:n,nodeId:i,formId:o})=>{Kt({optinType:t,channelType:["webpush"],flowId:n,nodeId:i})({stepType:"step_1",event:e,formId:o})},Wt=(e,t,n=!1)=>{const i={};return Object.keys(e).forEach((o=>{t[o]&&("date"===e[o].fieldType&&n?i[e[o].mapAttribute]=(e=>{const t=e.split("/");let n,i,o;return 4===t[0].length?[n,i,o]=t:4===t[2].length&&(n=t[2],parseInt(t[1])<=12?[o,i]=t:[i,o]=t),i=i.padStart(2,"0"),o=o.padStart(2,"0"),`${n}-${i}-${o}`})(t[o]):i[e[o].mapAttribute]=t[o])})),i},Qt=e=>{const t=(new DOMParser).parseFromString(e,"text/html");return null==t?void 0:t.body},Zt=e=>"HTML"===(null==e?void 0:e.type),Jt=(e,t)=>{const n=e.children[t];if(!n)return"";const i=Qt(n),o=(e=>{const t=(new DOMParser).parseFromString(e,"text/html").head.getElementsByTagName("style");let n="";for(const e of t)n+=e.textContent;return n})(n),r=document.createElement("style");r.textContent=o,i.appendChild(r);const s=e.attr.button,a=e.attr.input;if(s){const e=s.submit;if(e){const t=Object.keys(e);i.querySelectorAll("button").forEach((e=>{const n=dt(e,{root:i});if(t.includes(n)){i.querySelector(n).setAttribute("type","submit")}else e.setAttribute("type","button")}))}}if(a){let e=[],t=[];a.email&&(e=Object.keys(a.email)),a.phone&&(t=Object.keys(a.phone));const n=Object.keys(a).filter((e=>"email"!==e&&"phone"!==e));i.querySelectorAll("input:not([type=radio]), input:not([type=checkbox])").forEach((o=>{const r=dt(o,{root:i});e.includes(r)?(o.setAttribute("type","email"),o.setAttribute("name","email")):t.includes(r)?(o.setAttribute("type","tel"),o.setAttribute("name","phone")):n.forEach((e=>{Object.keys(a[e]).includes(r)&&o.setAttribute("name",e)}))}))}return i.innerHTML};var Xt=e=>{var{activation_rule:t}=e;return!t||new Me(t).processUrlActivationRule()},en=(e,t)=>ne()?void 0!==(null==e?void 0:e.mobile)?e.mobile:t:void 0!==(null==e?void 0:e.default)?e.default:t,tn=e=>{e>0&&(D.optinDeferredUntil=Date.now()+86400*parseInt(e,10)*1e3)},nn={showNativePrompt(e){var{hintScreenConfig:t,subscribeCallback:n,source:i,nodeId:o,trackWebPushDenied:r,trackWebPushSubmission:s}=e;function a(){return window.poSubscriptionSource=y,n(t,i,o,r,s)}var{isSafari:l,isFirefox:c,isiOS:d}=se();if(!l&&!c&&!d)return a();var u=document.querySelector("body");return ge("This is Safari/Firefox browser. The prompt will only show after the website is clicked somewhere"),new Promise((e=>{u.addEventListener("click",(()=>{a().then(e)}))}))},oldRender(e){var n,{config:i,subscribeCallback:o}=e,r=new G;if(!r.isPermissionNotGranted&&window.Notification&&window.Notification.permission===c.NOTIFICATION_PERMISSION.DEFAULT){if(i.optin.type!==t.OFF){var s=i.optin.config,a=s.timeout,l=a.default,d=i.optin.type,u=s.overlay;ne()&&(l=a.mobile);var p=r.optinSeenCount;-1===l?ge('🟠 Optin prompt was not shown. Reason: timeout set to "never"'):p>=s.maxCountPerSession?ge("🟠 Optin prompt was not shown. Reason: maximum count per session limit reached (".concat(p," / ").concat(s.maxCountPerSession,")")):Date.now()<D.optinDeferredUntil?ge("🟠 Optin prompt was not shown. Reason: deferred till ".concat(new Date(D.optinDeferredUntil))):setTimeout((()=>{Notification.permission!==c.NOTIFICATION_PERMISSION.DEFAULT||D.isPermissionGranted?ge("🟠 Optin prompt was not shown. Reason: permission not default"):d===t.TWO_STEP?Promise.all([Promise.resolve().then((function(){return Tn})),Promise.resolve().then((function(){return jn}))]).then((e=>{var[{OptinPromptWidget:t},{NewCustomPromptWidget:n}]=e,{position:a}=s,l=t,c=new l;if(l===n)c.setState(ye(ye({},s),{},{logo:i.logo})),setTimeout((()=>{o(null),c.changeState(ne()?"mobile-fade":"down"),setTimeout(ne()?c.destroy.bind(c):()=>{c.changeState("fade-top"),setTimeout(c.destroy.bind(c),300)},5e3)}),5e3);else{var d=document.querySelector(".pushowl-optin");d&&(z.logToServer({message:"duplicate custom prompt",subdomain:z.subdomain,data:{breadcrumbs:me}}),d.remove()),c.setState({multilingual_title:s.multilingual_title,multilingual_description:s.multilingual_description,yesButton:s.yesButton,noButton:s.noButton,theme:s.theme,logo:i.logo,branding:i.branding,position:a,autoFocus:i.flags.custom_prompt_screenreader_support,yesButtonListener:()=>{o(u),setTimeout((()=>{c.destroy()}),100),window.poSubscriptionSource=S,i.optin_report_enabled&&window.poAnalytics.track("PNOptinAllowClicked",{optinSeenCount:r.optinSeenCount})},noButtonListener:()=>{setTimeout((()=>{c.destroy()}),100),r.isPermissionNotGranted=!0,i.optin_report_enabled&&window.poAnalytics.track("PNOptinLaterClicked",{optinSeenCount:r.optinSeenCount})}})}r.optinSeenCount+=1,i.optin_report_enabled&&window.poAnalytics.track("PNOptinShown",{optinSeenCount:r.optinSeenCount}),ge("Custom Prompt shown. Config: ",i.optin),tn(s.deferForDays)})).catch((e=>{ge("Error encountered in loading Optin prompt: ".concat(e.message))})):(this.showNativePrompt({hintScreenConfig:u,subscribeCallback:o}),r.optinSeenCount+=1,ge("Browser Prompt shown. Config: ",i.optin),tn(s.deferForDays))}),1e3*l)}}else r.isPermissionNotGranted?n="prompt was dismissed in this session":window.Notification&&window.Notification.permission!==c.NOTIFICATION_PERMISSION.DEFAULT&&(n="permission already ".concat(window.Notification.permission)),ge("🟠 Optin prompt was not shown. Reason: ".concat(n))},renderPopup:e=>Ie((function*(){var{showNextForm:t,deferForDays:n,node:i,shouldIncrementFrequency:o,waitTime:r,flowId:s,openShadowDOM:a,customOptinStep:l,isMerchantOnFreePlan:c}=e;try{var{OptinForm:d}=yield Promise.resolve().then((function(){return io})),u=new G,p=new d(i,t,s,Kt({nodeId:i.id,flowId:s,channelType:i.channels,optinType:"popup"}),a,u.config.subscription_confirmation,l,c);setTimeout((()=>p.render()),1e3*r),tn(n),o&&(u.optinSeenCount+=1)}catch(e){ge("Error encountered in loading New Optin: ".concat(e.message))}}))(),renderEmbeddedFormOnDOM:e=>Ie((function*(){var{showNextForm:t,node:n,flowId:i,DOMContainer:o}=e;try{var{EmbeddedForm:r}=yield Promise.resolve().then((function(){return oo})),s=new G;new r(n,t,i,Kt({nodeId:n.id,flowId:i,channelType:n.channels,optinType:"embedded"}),!0,s.config.subscription_confirmation,o).render()}catch(e){ge("Error encountered in loading New Optin: ".concat(e.message))}}))(),showBrowserPrompt(e){var{subscribeCallback:t,hintScreenConfig:n,shouldIncrementFrequency:i,deferForDays:o,waitTime:r,flowId:s,nodeId:a,formId:l,onDismiss:c}=e;if(qe()){qt({event:"optin_viewed",optinType:"browser_webpush",flowId:s,nodeId:a,formId:l});var d=()=>qt({event:"optin_submitted",optinType:"browser_webpush",flowId:s,nodeId:a,formId:l}),u=()=>{c&&c(),qt({event:"optin_denied",optinType:"browser_webpush",flowId:s,nodeId:a,formId:l})};if(setTimeout((()=>{this.showNativePrompt({hintScreenConfig:n,subscribeCallback:t,source:"optin_flows",nodeId:a,trackWebPushDenied:u,trackWebPushSubmission:d})}),1e3*r),i)(new G).optinSeenCount+=1;tn(o)}},showCustomPrompt:e=>Ie((function*(){var{waitTime:t,shouldIncrementFrequency:n,flowId:i,deferForDays:o,config:r,subscribeCallback:s,custom_prompt_screenreader_support:a,nodeId:l,formId:c,logo:d,onDismiss:u}=e;try{if(!qe())return;var{OptinPromptWidget:p}=yield Promise.resolve().then((function(){return Tn})),h=()=>qt({event:"optin_submitted",optinType:"custom_webpush",flowId:i,nodeId:l,formId:c}),m=()=>{u&&u(),qt({event:"optin_denied",optinType:"custom_webpush",flowId:i,nodeId:l,formId:c})},g=new p,b=new G;if(setTimeout((()=>g.setState(ye(ye({},r),{},{autoFocus:a,yesButtonListener:()=>{s(r.overlay,"optin_flows",l,m,h),setTimeout((()=>{g.destroy()}),100),window.poSubscriptionSource=S},noButtonListener:()=>{m(),setTimeout((()=>{g.destroy()}),100),b.isPermissionNotGranted=!0,u&&u()},logo:d}))),1e3*t),qt({event:"optin_viewed",optinType:"custom_webpush",flowId:i,nodeId:l,formId:c}),tn(o),n)(new G).optinSeenCount+=1}catch(e){ge("Error encountered in loading Custom prompt: ".concat(e.message))}}))(),processNewConfig(e){var t,n=e.find((e=>"active"===e.status));if(!n)return[];for(var i=[],o=n.flow_nodes||[],r=0;r<o.length;r+=1){var s=o[r-1];if(r%2!=0){var a=s.wait_times?en(s.wait_times,s.wait_time):s.wait_time;o[r].wait_time=a,i.push(o[r])}}var l=new G;if(null!=l&&null!==(t=l.config)&&void 0!==t&&t.subscription_confirmation){var c=i.find((e=>e.channels.includes("email"))),d=i.find((e=>e.channels.includes("sms")));if(c&&d&&i.indexOf(c)>i.indexOf(d)){var u=i.indexOf(c),p=i.indexOf(d),h=i[u];i[u]=i[p],i[p]=h}}return[ye(ye({},n),{},{flow_nodes:i})]},newRenderEmbeddedForm(e){var{config:t,embeddedForm:n,DOMContainer:i}=e;if("active"===n.status){var{activation_rule:o}=t;if(Xt({activation_rule:o}))for(var r=()=>{this.newRenderEmbeddedForm({config:t,embeddedForm:n,DOMContainer:i})},{flow_nodes:s}=n,a=0;a<s.length;a+=1){var l=s[a];if("embedded"===l.optin_type)return void this.renderEmbeddedFormOnDOM({node:l,DOMContainer:i,showNextForm:r,flowId:n.id})}}},newRender(e){var t=this,{config:n,optinFlows:i,shouldIncrementFrequency:o,subscribeCallback:r,skippedNodes:s=[],customOptinStep:a=0}=e,l=this.processNewConfig(i||[]).find((e=>"active"===e.status))||{};if(l.flow_nodes){var{flow_nodes:d}=l,{activation_rule:u}=n,p=new G,{optinSeenCount:h}=p,{consent:m}=D,g=l&&d&&Xt({activation_rule:u})&&(e=>{var{deferForDays:t,shouldIncrementFrequency:n}=e;return!(n&&t>0&&Date.now()<D.optinDeferredUntil&&(ge("🟠 Optin prompt was not shown. Reason: deferred till ".concat(new Date(D.optinDeferredUntil))),1))})({deferForDays:l.defer_for_days,shouldIncrementFrequency:o})&&(e=>{var{frequency:t,optinSeenCount:n,shouldIncrementFrequency:i}=e;return!i||n<t||(ge("🟠 Optin prompt was not shown. Reason: Optin seen count exceeded"),!1)})({frequency:l.frequency,optinSeenCount:h,shouldIncrementFrequency:o});ge("Can Optin Render",g);for(var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.newRender({config:n,optinFlows:i,shouldIncrementFrequency:!1,subscribeCallback:r,skippedNodes:e?[...s,e]:s,customOptinStep:o?0:v()})},f=function(e){var i=d[e],u=s.includes(i.id),p=i.forms[0]&&Zt(i.forms[0].config),h=(e=>{var{channels:t,consent:n}=e;return t.every((e=>n.includes(e)))})({consent:m,channels:i.channels});if(g&&!u&&(p||!h)){if(-1===i.wait_time)return"continue";if("popup"===i.optin_type)return ge("Can render popup"),t.renderPopup({node:i,shouldIncrementFrequency:o,showNextForm:b,deferForDays:l.defer_for_days,waitTime:i.wait_time,flowId:l.id,openShadowDOM:"enabled"===n.flags.open_shadow_dom,customOptinStep:a,isMerchantOnFreePlan:n.is_free_plan&&"enabled"!==n.flags.disable_pushowl_branding}),{v:void 0};if("browser_webpush"===i.optin_type)return t.showBrowserPrompt({subscribeCallback:r,waitTime:i.wait_time,hintScreenConfig:i.forms[0].config.oneStep.overlay,shouldIncrementFrequency:o,deferForDays:l.defer_for_days,flowId:l.id,nodeId:i.id,formId:i.forms[0].id,onDismiss:()=>{b(i.id)}}),{v:void 0};if("custom_webpush"===i.optin_type&&window.Notification&&window.Notification.permission===c.NOTIFICATION_PERMISSION.DEFAULT&&!D.isPermissionGranted){var f=i.forms[0];return t.showCustomPrompt({config:ye(ye({},f.config.twoStep),{},{position:{default:f.desktop_position,mobile:f.mobile_position}}),waitTime:i.wait_time,flowId:l.id,shouldIncrementFrequency:o,deferForDays:l.defer_for_days,subscribeCallback:r,custom_prompt_screenreader_support:n.flags.custom_prompt_screenreader_support,nodeId:i.id,formId:i.forms[0].id,logo:n.logo,onDismiss:()=>{b(i.id)}}),{v:void 0}}}},_=0;_<d.length;_+=1){var w=f(_);if("continue"!==w&&"object"==typeof w)return w.v}}else ge("Optin is set to OFF");function v(){return a>=1?0:a+1}}};class on{constructor(e){var{wid:t,websitePushId:n}=e;this.wid=t,this.subdomain=z.subdomain,this.webPushId=n||z.webPushId,this.getSubscription=this.getSubscription.bind(this)}webServiceUrl(){return"".concat(z.apiEndpoint,"/safari/v2/").concat(this.wid)}getSubscription(){return new Promise(((e,t)=>{var n=i=>{ge("PermissionData:",i.permission),"default"===i.permission?setTimeout((()=>window.safari.pushNotification.requestPermission(this.webServiceUrl(),this.webPushId,{domain:window.location.origin},n)),0):"denied"===i.permission?t(c.NOTIFICATION_PERMISSION.DENIED):"granted"===i.permission&&e(i.deviceToken)},i=window.safari.pushNotification.permission(this.webPushId);n(i)}))}}class rn{constructor(e){var{vapidPublicKey:t,integrations:n,serviceWorkerConfig:i}=e;this.getSubscription=this.getSubscription.bind(this),this.vapid_public_key=t,this.integrations=n,this.serviceWorkerConfig=i}getServiceWorkerParams(e){return this.serviceWorkerConfig?{url:this.serviceWorkerConfig.url,options:{scope:this.serviceWorkerConfig.scope}}:{url:z.getServiceWorkerUrlWithIntergrations(z.serviceWorkerUrl(e),this.integrations),options:{}}}getSubscription(e){return new Promise(((t,n)=>{("granted"===Notification.permission?Promise.resolve("granted"):Notification.requestPermission()).then((i=>{if(i===c.NOTIFICATION_PERMISSION.GRANTED){var o=this.getServiceWorkerParams(e),r=o.options;0!==o.url.indexOf("http")&&(o.url="".concat(location.protocol,"//").concat(location.host).concat(o.url)),navigator.serviceWorker.register(o.url,o.options).then((e=>{var i;"shopify"===z.platform&&("/"===r.scope?navigator.serviceWorker.getRegistrations().then((function(e){e.forEach((function(e){e.scope.match(/pushowl\/sdks\//)&&(e.unregister(),ge("Found stale service worker on subpath scope",e))}))})):navigator.serviceWorker.getRegistrations().then((function(e){e.forEach((function(e){e.active&&e.active.scriptURL.match(/pushowl/)&&!e.scope.match(/pushowl\//)&&(e.unregister(),ge("Found stale service worker on root scope",e))}))}))),e.installing?i=e.installing:e.waiting?i=e.waiting:e.active&&(i=e.active),i&&("activated"===i.state?this._serviceWorkerSubscriber(e,t,n):i.addEventListener("statechange",(i=>{"activated"===i.target.state&&this._serviceWorkerSubscriber(e,t,n)})))})).catch((e=>{fe(e),n(e)}))}else i!==c.NOTIFICATION_PERMISSION.DENIED&&i!==c.NOTIFICATION_PERMISSION.DEFAULT||n(i)}))}))}_serviceWorkerSubscriber(e,t,n){var i={userVisibleOnly:!0,applicationServerKey:ae(this.vapid_public_key)};e.pushManager.subscribe(i).then((e=>{t(e)})).catch((i=>{i.toString().indexOf("InvalidStateError")>=0?e.pushManager.getSubscription().then((i=>{i.unsubscribe().then((i=>{e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ae(this.vapid_public_key)}).then((e=>{t(e)})).catch((e=>{n(e)}))})).catch((e=>{n(e)}))})):(fe(i),n(i))}))}}class sn{constructor(e){var{flags:t,vapidPublicKey:n,integrations:i,websitePushId:o,wid:r,serviceWorkerConfig:s}=e;if(this.getSubscription=null,se().isApnsSafari){var a=new on({websitePushId:o,wid:r});this.getSubscription=a.getSubscription.bind(this,t)}else{var l=new rn({vapidPublicKey:n,integrations:i,serviceWorkerConfig:s});this.getSubscription=l.getSubscription.bind(this,t)}}get isPermissionGranted(){return window.Notification&&window.Notification.permission===c.NOTIFICATION_PERMISSION.GRANTED||D.isPermissionGranted}get isPermissionDefault(){return z.isWorkerAvailable.then((e=>"default"===window.Notification.permission)).catch((()=>!1))}}var an,ln,cn;if(!window.poAnalytics){var dn={storeConfigGUID:z.guid,subdomain:z.subdomain,visitorToken:D.visitorToken,sessionToken:D.sessionToken};window.poAnalytics=new Xe({endpoint:"".concat(z.apiEndpoint,"/event/v1/events")}),window.poAnalytics.setVisitorProperties(dn),ge("Analytics initialized with data: ",dn)}class un extends class{constructor(){}get cartId(){return""}}{constructor(e){super(),this.token=e.token,this.checkout_token=e.checkout_token,this.item_count=e.item_count,this.items=e.items}get cartId(){const e=[this.token||this.checkout_token||""];let t=[];const n={};for(const e of this.items)t.push(e.variant_id),n[e.variant_id]=e.quantity;t=t.sort(((e,t)=>e-t));for(const i of t){const t=n[i];e.push(`${i}:${t}`)}return e.concat(e).join("-")}}class pn extends class{constructor(){var e;this.subdomain=z.subdomain,this.environment=z.environment,this.apiEndpoint=z.apiEndpoint,this.apiClient=new Ce,this.webPushId=z.webPushId,this.config=null,this.storageManager=new D,this.sessionManager=new G,this.storeLib=new(this.getStoreLibClass()),this.subscriberTokenExists=!!D.subscriberToken,this.tokenType=this.subscriberTokenExists?"subscriber":"visitor",this.tokenValue=this.subscriberTokenExists?D.subscriberToken:D.visitorToken,this.customLog=console,window.sessionStorage&&navigator.serviceWorker&&(e=this.getConfig()).then((e=>{this.config=e,(({logoURL:e})=>{try{const t=Object.assign(Object.assign({},it),{name:document.title,short_name:document.title}),n=document.querySelector('meta[name="theme-color"]');n&&(t.theme_color=n.getAttribute("content")||it.theme_color);const i=document.querySelector('meta[property="og:site_name"]');if(i){const e=i.getAttribute("content")||document.title;t.name=e,t.short_name=e}const o=document.querySelector('meta[property="og:description"]');o&&(t.description=o.getAttribute("content")||"");const r=JSON.stringify(t),s=new Blob([r],{type:"application/json"}),a=URL.createObjectURL(s),l=document.createElement("link");l.rel="manifest",l.href=a;const c=document.getElementsByTagName("head")[0];document.querySelector("link[rel=manifest]")||c.insertBefore(l,c.firstChild);const d=document.querySelector("link[rel=apple-touch-icon]");if(e&&!d){const t=document.createElement("link");t.rel="apple-touch-icon",t.href=e,c.insertBefore(t,c.firstChild)}}catch(e){ge("Unable to create manifest")}})({logoURL:e.logo}),be("Status",{ACR:e.abandoned_cart_enabled?"🟢":"🔴","Browse abandonment":e.browse_abandonment_enabled?"🟢":"🔴","Price drop":e.price_drop.enabled?"🟢":"🔴","Back in stock":e.back_in_stock.enabled?"🟢":"🔴","optin type":{off:"🔴",oneStep:"Browser prompt",twoStep:"Custom prompt"}[e.optin.type],"Notification permission":window.Notification?Notification.permission:null,"Store section":this.getStoreLibClass().section,"Notification Preferences":e.privacy.notification_preference.enabled?"🟢":"🔴"}),this.handleIOS(),this.load3PIntegrations()})),this.ready=new Promise((t=>{this.init(e).then((()=>{if((!this.config.flags||"disabled"!==this.config.flags.status)&&((this.environment!==c.ENVIRONMENT.production||!this.config.flags||!1!==this.config.flags.console_message&&"disabled"!==this.config.flags.console_message)&&this.customLog.log("[PushOwl Web Push Notifications] Starting up"),this.browserHandler=new sn({flags:this.config.flags,vapidPublicKey:this.config.vapid_public_key,integrations:this.config.integrations,websitePushId:this.config.website_push_id,wid:this.config.wid,serviceWorkerConfig:this.config.service_worker}),this.isAllowed())){var e={subdomain:this.subdomain,browserHandler:this.browserHandler,config:this.config,storeLib:this.storeLib,storageManager:this.storageManager,sessionManager:this.sessionManager};this.context=e,this.browserHandler.isPermissionGranted||!D.subscriberToken||D.hasRaisedUnsubscriptionEvent||(this.config.optin_report_enabled&&window.poAnalytics.track("Unsubscribed"),D.hasRaisedUnsubscriptionEvent=!0),this.browserHandler.isPermissionGranted?Qe.verifySubscriber({browserHandler:this.browserHandler}).then((()=>{this.syncCustomerId(),this.onSubscriberVerifiedOnPageLoad()})).catch(((e,t)=>{ge(e),e===o.NO_SUBSCRIBER_TOKEN||e===o.INVALID_SUBSCRIBER_TOKEN?Qe.subscribe({browserHandler:this.browserHandler,websitePushId:this.config.website_push_id}).catch((e=>{fe(e)})):e===o.INVALID_STATE_ERROR&&Qe.validateOrSyncSubscription({subscription:t,websitePushId:this.config.website_push_id})})):this.isBrevoEnabled()&&this.onSubscriberVerifiedOnPageLoad(),this.browserHandler.isPermissionDefault.then((e=>{e&&this.handlePushNotificationUnsubscription()})),this.customTasks(),et.subscribeButtons({context:e}),this.checkPushowlSession(),this.onCanRun(),t()}})).catch((e=>{fe(e)}))})),this.debugCustomTask(),this.onScriptLoad(),B.run()}handlePushNotificationUnsubscription(){var{consent:e}=D;1===e.length&&"webpush"===e[0]&&(D.subscriberToken=null,Y.del("pushowl_sw_subscriber_token")),D.isPermissionGranted=!1,D.consent=D.consent.filter((e=>"webpush"!==e))}isBrevoEnabled(){return"enabled"===this.config.flags.brevo_email&&!!this.config.brevo_ma_key}handleIOS(){var e;se().isiOS&&navigator.standalone&&!D.subscriberToken&&!D.hasLoggediOSStandaloneMode&&(D.hasLoggediOSStandaloneMode=!0),this.isAllowed()&&se().isiOS&&!navigator.standalone&&G.installPromptSeenCount<3&&!D.installPromptDismissed&&null!==(e=this.config.ios_prompt)&&void 0!==e&&e.enabled&&(Promise.resolve().then((function(){return ao})).then((e=>{var t,n,i,{IOSInstallWidget:o}=e,r=new o({title:null===(t=this.config.ios_prompt)||void 0===t?void 0:t.title,description:null===(n=this.config.ios_prompt)||void 0===n?void 0:n.description,btnText:null===(i=this.config.ios_prompt)||void 0===i?void 0:i.btn_text});setTimeout((()=>{r.init()}),2e3)})),G.installPromptSeenCount+=1)}get flyoutHandler(){return new Promise((e=>{Promise.resolve().then((function(){return po})).then((t=>{var{FlyoutWidgetHandler:n}=t;e(new n(this.config.flyout_config))})).catch((e=>{ge("Error encountered in loading Flyout widget: ".concat(e.message))}))}))}onScriptLoad(){}onConfigLoaded(){}onCanRun(){}onSubscriberVerifiedOnPageLoad(){}onSuccessfullSubscription(){}getStoreLibClass(){}getStoreCartClass(){}getCurrentProduct(){}isAllowed(){var{activation_rule:e}=this.config;return!e||e.processUrlActivationRule()}isAutomationAllowed(){var{automation_rule:e}=this.config;return!e||e.processUrlActivationRule()}filterSKU(e){var{automation_rule:t}=this.config;return t?ye(ye({},e),{},{items:((e||{}).items||[]).filter((e=>!t.processSKU(e.sku)))}):e}init(e){return new Promise((t=>{this.isEnabled().then((()=>{(e||this.getConfig()).then((e=>{this.config=e,"enabled"===e.flags.subscriber_tracking&&D.subscriberToken&&(window.poAnalytics.setVisitorProperties({wid:this.config.wid,pagePath:window.location.href,pageURL:window.location.origin+window.location.pathname,subscriberToken:D.subscriberToken,browserNotificationPermission:window.Notification?window.Notification.permission:null}),window.poAnalytics.track("subscriber_page_visited")),window.poAnalytics.setVisitorProperties({wid:this.config.wid,optinConfig:this.config.optin}),ge("Analytics visitor props set: ",{wid:this.config.wid,optinConfig:this.config.optin}),window.poAnalytics.meta.isNewVisitor&&this.config.optin_report_enabled&&window.poAnalytics.track("SessionCreated"),t(e)}))})).catch((e=>{fe(e),ge("🔴 Shutting down. Reason: ".concat(e))}))}))}getConfig(){return Ve.get()}isEnabled(){return Ke({subdomain:this.subdomain})}debugCustomTask(){var e=re("poTaskType");e===w&&(ge("Task type",e),this.isEnabled().then((e=>{!function(e){var{subdomain:t,StoreLibClass:n,isEnabled:i}=e,o=c.STORAGE_KEYS,r=new G,s=new D,a=new Ce,l={notification_permission:window.Notification&&window.Notification.permission};l.localStorage={[o.VISITOR_TOKEN]:D.visitorToken,[o.SESSION_TOKEN]:D.sessionToken,[o.SUBSCRIBER_TOKEN]:D.subscriberToken,[o.SUBSCRIPTION]:D.subscription,[o.BACK_IN_STOCK_SUBSCRIPTIONS]:s.back_in_stock.subscriptions,[o.PRICE_DROP_SUBSCRIPTIONS]:s.price_drop.subscriptions,[o.SYNCED_CART_JSON]:D.synced_cart_json,[o.SYNCED_CUSTOMER_ID]:D.syncedCustomerId,[o.SYNCED_AC_EVENTS]:D.ac_events,[o.OPTIN_DEFERRED_UNTIL]:D.optinDeferredUntil},l.sessionStorage={[r.subscriptionVerifiedKey]:r.subscriptionVerified,[r.permissionKey]:r.isPermissionNotGranted,[r.optinSeenCountKey]:r.optinSeenCount},l.subdomain=t,l.debug_url=window.location.href,l.user_agent=navigator.userAgent,l.logs=me,Promise.all([new Promise((e=>{navigator.serviceWorker.getRegistrations().then((function(t){e(t.map((function(e){return{scope:e.scope,active:e.active}})))}))})),i,n?n.getCart():Promise.resolve()]).then((e=>{var[t,n,i]=e;i&&(l.current_cart_json=i),t&&t.length&&(l.serviceWorkers=t),"string"==typeof n&&(l.pushowl_not_enabled_reason=n),a.debugLog(l),window.prompt("Send this to PushOwl Support",JSON.stringify(l,!1,2))}))}({subdomain:this.subdomain,StoreLibClass:this.getStoreLibClass(),isEnabled:e})})))}customTasks(){var e=re("poTaskType");e&&(ge("Task type",e),e===f?Qe.subscribeIfNotAlready({enableHintScreen:!0,websitePushId:this.config.website_push_id,browserHandler:this.browserHandler}):e===_&&Qe.unsubscribe(this.browserHandler))}checkPushowlSession(){"pushowl"===re("utm_source")&&function(e){var{privacy:t}=e.config;if(t.notification_preference.enabled){var n=document.querySelector("body"),i={subdomain:e.subdomain,subscriberToken:D.subscriberToken};Promise.all([Promise.resolve().then((function(){return gn})),Promise.resolve().then((function(){return bn}))]).then((e=>{var[{NotificationPreference:o},{NotificationPreferenceToggle:r}]=e,s=new o(n,i,t.notification_preference);new r(n,t.notification_preference,s).render(),ge("Notification Preference shown.")})).catch((e=>{ge("Error encountered in loading Notif preferences: ".concat(e.message))}))}}(this.context)}syncCustomerId(){var e=this.getStoreLibClass();if(e.customerId&&e.customerId!==D.syncedCustomerId&&this.config.privacy.customer_id){if(window.Shopify&&!D.subscriberToken){var t=pe(c.STORAGE_KEYS.SUBSCRIBER_TOKEN);t&&(D.subscriberToken=t)}this.apiClient.syncSubscriber().then((()=>{D.syncedCustomerId=e.customerId})).catch((()=>{fe("Subscriber not synced")}))}}initiateDefaultPrompt(e,t,n,i,o){var r=!(!e||ne())&&e.enabled;return z.isWorkerAvailable.then((s=>{if(s)return Qe.subscribe({enableHintScreen:r,hintScreenData:e,websitePushId:this.config.website_push_id,browserHandler:this.browserHandler,source:t,source_id:n}).then((e=>{if(e&&e.subscriberToken){var{consent:t}=D;return D.consent=[...t,"webpush"],o&&o(),this.onSuccessfullSubscription(),e}return i&&i(),e})).catch((e=>{})).finally((()=>{var e=document.querySelector(".js-custom-prompt-2");e&&e.remove()}));var a=this.subdomain.replace(/\./g,"-");return"sendinblue"!==z.platform&&window.open("https://".concat(a,".powl.co/subscribe?po_url=").concat(encodeURIComponent(window.location.href),"&env=").concat(this.environment,"&subdomain=").concat(this.subdomain,"&platform=").concat(z.platform),"","width=700,height=500"),new Promise((e=>{window.addEventListener("message",(t=>{var n=t.data;if(n&&"subscriptionFinish"===n.type){var i=n.data;i&&"granted"===i.status&&(D.subscriberToken=i.subscriberToken,D.isPermissionGranted=!0,e({subscriberToken:i.subscriberToken}))}}))}))}))}render(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getStoreLibClass();if(!this.config)throw"Pushowl Config not initialised";n.section===g.HOME?this.defaultRender(t):n.section===g.PRODUCT?this.storeLib.getProductDetails(e).then((e=>{this.productSectionRender(e)})):n.section===g.CHECKOUT?ge("🟠 Optin prompt was not shown. Reason: Checkout page"):this.defaultRender(t),this.renderEmbeddedForms()}optinFlows(e){var t=new st(this.config);Object.values(this.config.optin_flows||[]).forEach((n=>{var i,o=nn.processNewConfig([n]||[]).find((e=>"active"===e.status))||{};if(o&&"active"!==!o.status){t.addOptinFlow({id:o.id,scrollDepth:o.scroll_depth,exitIntent:o.exit_intent,exclusionUrls:o.exclusion_urls||[],inclusionUrls:o.inclusion_urls||[],exclusionUrlsEnabled:o.exclusion_urls_enabled,inclusionUrlsEnabled:o.inclusion_urls_enabled,scrollDepthEnabled:o.scroll_depth_enabled,timeSpent:en(o.time_spent||{},0),timeSpentEnabled:o.time_spent_enabled,deviceType:o.device_type||[],requireAllConditions:null!==(i="all"===o.trigger_mode)&&void 0!==i&&i,exclusion_countries:o.exclusion_countries||[],exclusion_countries_enabled:o.exclusion_countries_enabled||!1},(()=>{nn.newRender({config:this.config,optinFlows:[n],shouldIncrementFrequency:e,subscribeCallback:this.initiateDefaultPrompt.bind(this)})}))}})),t.initialize()}renderEmbeddedForms(){var e=this.config.embedded_forms;e&&e.length&&(null==e||e.forEach((e=>{document.querySelectorAll('div[data-pushowl-form-id="'.concat(e.id,'"]')).forEach((t=>{t&&nn.newRenderEmbeddedForm({config:this.config,embeddedForm:e,DOMContainer:t})}))})))}defaultRender(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={isOptinRendered:!1,isFlyoutRendered:!1};"sendinblue"===z.platform?nn.oldRender({config:this.config,subscribeCallback:this.initiateDefaultPrompt.bind(this)}):this.optinFlows(e),t.isOptinRendered=!0;var n=this.config.home.flyout;return qe()&&n.enabled&&window.Notification.permission!==c.NOTIFICATION_PERMISSION.GRANTED?(this.flyoutHandler.then((e=>{nt.renderOptin({rootContext:{config:this.config,browserHandler:this.browserHandler},flyoutHandler:e})})),t.isFlyoutRendered=!0):ge("Flyout was not shown. Reason: ".concat(n.enabled?"permission already granted":"flyout is disabled"),"Config: ",this.config.home.flyout),t}productSectionRender(e){if(qe()){var t=e.currentVariant();be("Current product",{id:t.id,name:t.name,"Is in stock?":t.available?"✅":"❌",price:t.price});var{back_in_stock:n,price_drop:i}=this.config,o={config:this.config,browserHandler:this.browserHandler};this.flyoutHandler.then((r=>{var s={rootContext:o,flyoutHandler:r,product:e,variant:t};if(!t.available&&n.enabled&&this.isAutomationAllowed())nt.renderBackInStock(s);else if(t.available&&i.enabled&&this.isAutomationAllowed())nt.renderPriceDrop(s);else{var{isFlyoutRendered:a}=this.defaultRender();a||r.remove()}}))}}showBrowserPrompt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{overlay:{enabled:!1}};return nn.showNativePrompt({hintScreenConfig:e,subscribeCallback:e=>this.initiateDefaultPrompt(e)})}showCustomPrompt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;Promise.resolve().then((function(){return Tn})).then((n=>{var{OptinPromptWidget:i}=n,o=this.config.optin.config,r=new i,s={multilingual_title:e.title?{default:e.title}:o.multilingual_title,multilingual_description:e.description?{default:e.description}:o.multilingual_description,yesButton:e.yesButton&&e.yesButton.label?{multilingual_label:{default:e.yesButton.label}}:o.yesButton,noButton:e.noButton&&e.noButton.label?{multilingual_label:{default:e.noButton.label}}:o.noButton};r.setState(ye(ye({},s),{},{theme:e.theme||o.theme,logo:e.logo||o.logo,position:e.position||o.position,autoFocus:this.config.flags.custom_prompt_screenreader_support,yesButtonListener:()=>{t&&(window.poSubscriptionSource=S,this.config.optin_report_enabled&&window.poAnalytics.track("PNOptinAllowClicked",{optinSeenCount:this.sessionManager.optinSeenCount})),this.initiateDefaultPrompt(void 0===e.overlay?o.overlay:e.overlay).then((()=>{"function"==typeof e.yesButtonListener&&e.yesButtonListener()})),setTimeout((()=>{r.destroy()}),100)},noButtonListener:()=>{setTimeout((()=>{r.destroy()}),100),this.sessionManager.isPermissionNotGranted=!0,t&&this.config.optin_report_enabled&&window.poAnalytics.track("PNOptinLaterClicked",{optinSeenCount:this.sessionManager.optinSeenCount}),"function"==typeof e.noButtonListener&&o.noButtonListener()}})),t&&this.config.optin_report_enabled&&window.poAnalytics.track("PNOptinShown",{optinSeenCount:this.sessionManager.optinSeenCount})})).catch((e=>{ge("Error encountered in loading Optin Prompt widget (API): ".concat(e.message))}))}load3PIntegrations(){}klaviyoIntegration(){var e=function(){var e=Ie((function*(e){var t=e&&e.detail&&e.detail.metaData&&e.detail.metaData.$email;"stepSubmit"===e.detail.type&&t&&(D.email=t,J.identify(t))}));return function(t){return e.apply(this,arguments)}}();window.addEventListener("klaviyoForms",e)}trackPage(e){J.viewPage(e)}loadBrevoTracker(){return!("enabled"!==this.config.flags.brevo_email||!this.config.brevo_ma_key||!F())&&(J.loadTracker({isNewTracker:"enabled"!==this.config.flags.old_tracker,maKey:this.config.brevo_ma_key}),D.email&&(J.emailId=D.email),this.trackPage(),!0)}syncAbandonedCart(e,t){this.isAutomationAllowed()&&(e?Promise.resolve(e):this.getStoreLibClass().getCart()).then((e=>{!function(e){var{cartJson:t,CartClass:n,options:i={pushowl:!0,brevo:!1}}=e;if(t){var o=new n(t),r=new Ce,s=o.token?"token":"checkout_token",a=["Cart Token:",o[s],"Cart Items",o.item_count,"Last synced Cart:",D.synced_cart_json,"AC Events:",D.ac_events],l=D.synced_cart_json,c=l?new n(l):null;t.updated_at=t.updated_at||(new Date).toISOString(),o.item_count>0&&(!c||o.cartId!==c.cartId)||0===o.item_count&&c&&c[s]===o[s]&&c.cartId!==o.cartId?(i.pushowl?r.syncCart(o).then((e=>{D.synced_cart_json=t,D.ac_events=e.result;var{token:n}=e.result;n&&(D.subscriberToken=n),ge("Cart synced successfully. Response: ",e)})).catch((e=>{fe(e),ge("🔴 Cart sync failed. Error: request failed. ",e,...a)})):D.synced_cart_json=t,i.brevo&&we(t)):ge("Cart was not synced. Reason: No change since last sync.",...a)}}({cartJson:this.filterSKU(e),CartClass:this.getStoreCartClass(),options:t})})).catch((e=>{fe(e),ge("🔴 Cart sync failed. Error: cart could not be synced.  ",e)}))}syncCart(e){this.browserHandler.isPermissionGranted&&this.config.abandoned_cart_enabled&&this.isAutomationAllowed()&&Qe.verifySubscriber({browserHandler:this.browserHandler}).then((()=>{this.syncAbandonedCart(e,{pushowl:!0,brevo:this.isBrevoEnabled()})}))}syncProductView(){var e=this.getStoreLibClass(),t=this.config.browse_abandonment_enabled,n=this.config.price_drop,i=this.config.price_drop.is_viewed;e.section===g.PRODUCT&&this.isAutomationAllowed()&&this.getCurrentProduct().then((e=>{this.isBrevoEnabled()&&this.storeLib.getProductDetails().then((t=>{var n=t.currentVariant()||{};J.track({eventName:a.PRODUCT_VIEWED,eventData:{id:"".concat(e.id),data:ye(ye({},e),{},{title:t.title,featured_image:n.featured_image||t.featured_image,price:n.price||t.price,currency:window.Shopify?window.Shopify.currency.active:"",url:window.location.href})}}),n?J.viewProduct(String(n.id)):J.viewProduct(String(e.id))})),D.subscriberToken&&(t||n&&i)&&this.apiClient.syncProductView(e).then((e=>{var{token:t}=e.result;t&&(D.subscriberToken=t),ge("Product synced",e)})).catch((e=>{fe(e)}))})).catch((e=>{fe(e)}))}subscriberLog(e){var t=Object.entries(e).map((e=>{var[t,n]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))})).join("&");return B.get({path:"/log/?".concat(t)})}setCustomerId(e){window.pushowl.customerId=e,this.browserHandler.isPermissionGranted&&Qe.verifySubscriber({browserHandler:this.browserHandler}).then((()=>{this.syncCustomerId()}))}setCheckoutId(e){this.browserHandler.isPermissionGranted&&Qe.verifySubscriber({browserHandler:this.browserHandler}).then((()=>{this.apiClient.syncSubscriberTokenAndCheckoutId(e)}))}showBackInStock(e,t){this.flyoutHandler.then((n=>{nt.renderBackInStock({rootContext:this.context,flyoutHandler:n,product:e,variant:t})}))}showPriceDrop(e,t){this.flyoutHandler.then((n=>{nt.renderPriceDrop({rootContext:this.context,flyoutHandler:n,product:e,variant:t})}))}identify(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}{constructor(){z.mode="headless",super()}onCanRun(){this.defaultRender()}getStoreLibClass(){return Q}getStoreCartClass(){return un}}if(z.getPreviewBranch())z.loadPreviewLib("pushowl-sib.js");else if(z.isDisabled())ge("Pushowl is disabled in your store");else{var hn=new pn,mn=(an=hn,ln={LOG_LEVELS:s,setLogLevel:e=>{D.logLevel=e,ge("Log level set to: ".concat(e))},push(e){an.ready.then((()=>{e()}))},getSubdomain:()=>an.subdomain,isEnabled:()=>an.isEnabled(),subscriberLog:e=>an.subscriberLog(e),subscribe(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Qe.subscribeIfNotAlready({enableHintScreen:e,websitePushId:an.config.website_push_id,browserHandler:an.browserHandler})},registerForEvent(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((s,a)=>{Qe.subscribeIfNotAlready({enableHintScreen:t,websitePushId:an.config.website_push_id,browserHandler:an.browserHandler}).then((()=>{an.storeLib.getProductDetails(!1,i.productAlias).then((t=>{var l=i.productVariantId?t.getVariant(i.productVariantId):t.currentVariant(),d=null,u=null;if(e===r.BACK_IN_STOCK)d=c.EVENT_API_PATH.BACK_IN_STOCK,u=an.storageManager.back_in_stock;else{if(e!==r.PRICE_DROP)return void a(o.UNKNOWN_EVENT);d=c.EVENT_API_PATH.PRICE_DROP,u=an.storageManager.price_drop}Qe.update(d,{product_id:t.id,product:t,variant:l,source:n.PARTNER_JS_API,permission:window.Notification&&window.Notification.permission}).then((()=>{an.productSectionRender(t),u.subscribe(l);var e={};e[c.STORAGE_KEYS.SUBSCRIBER_TOKEN]=D.subscriberToken,s(e)})).catch((e=>{fe(e)}))}))})).catch((()=>{a({error_code:o.PERMISSION_NOT_GRANTED})}))}))},isProductVariantSubscribed:(e,t)=>"price_drop"===e?an.storageManager.price_drop.isSubscribed({id:t}):"back_in_stock"===e&&an.storageManager.back_in_stock.isSubscribed({id:t}),showBrowserPrompt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{overlay:{enabled:!1}};return an.showBrowserPrompt(e)},showCustomPrompt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.overlay=null,an.showCustomPrompt(e)},showWidget(e){var{type:t}=e,n=Te(e,Ze);switch(t){case"browserPrompt":return an.showBrowserPrompt(n);case"customPrompt":return an.showCustomPrompt(n,!0);case"priceDrop":return n.variant.name=n.variant.title,delete n.variant.title,an.showPriceDrop(n.product,n.variant);case"backInStock":return n.variant.name=n.variant.title,delete n.variant.title,an.showBackInStock(n.product,n.variant);case"optinFlows":return an.optinFlows(!0)}},syncCart:e=>(e.item_count=e.items.length,e.items.forEach((e=>{e.variantId&&(e.variant_id=e.variantId,delete e.variantId),e.productId&&(e.product_id=e.productId,delete e.productId)})),e.checkoutToken&&(e.checkout_token=e.checkoutToken,delete e.checkoutToken),an.syncCart(e)),syncPageName:e=>an.syncPageName(e),syncProductView:e=>(e.productId&&(e.product_id=e.productId,delete e.productId),an.syncProductView(e)),setCustomerId:e=>an.setCustomerId(e),setCheckoutId:e=>an.setCheckoutId(e),getCurrentPermission:()=>D.isPermissionGranted?Promise.resolve(c.NOTIFICATION_PERMISSION.GRANTED):window&&window.Notification?Promise.resolve(Notification.permission):void 0,identify:e=>an.identify(e),trackCategoryPage:e=>an.trackCategoryPage(e),track:e=>J.track(e)},cn={get(e,t){if(!e[t]&&an[t]){ge("🟠 Internal property accessed: ".concat(t));var n=an[t];return"function"==typeof n?n.bind(an):n}return Reflect.get(...arguments)}},new Proxy(ln,cn));window.pushowl&&window.pushowl.queue&&Array.isArray(window.pushowl.queue)&&(window.pushowl.queue.forEach((e=>{var{taskName:t,taskData:n,promise:i}=e;mn[t]?hn.ready.then((()=>{var e=mn[t](n);e instanceof Promise?e.then(i.resolve):i.resolve(e)})):i.reject("unsupportedCall")})),window.pushowl.trigger=function(e,t){return hn.ready.then((()=>mn[e](t)))},window.pushowl.setLogLevel=mn.setLogLevel)}var gn=Object.freeze({__proto__:null,NotificationPreference:class{constructor(e,t,n){this.container=e,this.data=t,this.notificationPreference=n}get accessMyDataForm(){var{data:e}=this,t=window.location.origin;return"https://access-push-data.paperform.co/?blpf8=".concat(e.subscriberToken,"&17vii=").concat(t,"&afg4h=").concat(e.subdomain)}get deleteMyDataForm(){var{data:e}=this,t=window.location.origin;return"https://delete-push-data.paperform.co/?7uv2c=".concat(e.subscriberToken,"&9e21s=").concat(t,"&2te0r=").concat(e.subdomain)}get unsubscribeForm(){return"http://docs.pushowl.com/subscribers/unsubscribing-from-push"}remove(){this.node.parentNode.removeChild(this.node)}render(){this.node=this.createNode(),this.container.appendChild(this.node),this.npContainer=this.node.querySelector(".js-po-np--container"),ge(this.accessMyDataForm),this.access=this.node.querySelector(".js-po-np--access"),this.delete=this.node.querySelector(".js-po-np--delete"),this.unsubscribe=this.node.querySelector(".js-po-np--unsubscribe"),this.close=this.node.querySelector(".js-po-np--close"),this.access&&this.access.addEventListener("click",(()=>{window.open(this.accessMyDataForm)})),this.delete&&this.delete.addEventListener("click",(()=>{window.open(this.deleteMyDataForm)})),this.unsubscribe&&this.unsubscribe.addEventListener("click",(()=>{window.open(this.unsubscribeForm)})),this.close.addEventListener("click",(()=>{this.remove()})),this.node.addEventListener("click",(()=>{this.remove()})),this.npContainer.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation()}))}createNode(){var e,t=this.notificationPreference,n=this.notificationPreference.actions,i="cursor: pointer; white-space: nowrap; min-width: 100px; padding: 8px 14px; font-size:14px; border-radius:4px; border:0; color: #fff; background-color:#686565;";return e='\n    <div class="js-po-np--overlay"\n      style="position: fixed;top: 0;bottom: 0;left: 0;right: 0;background: rgba(0,0,0,0.65);z-index: 9999999;">\n      <div class="js-po-np--container"\n        style="background:#fff; box-shadow:0 10px 30px 0 rgba(0, 0, 0, 0.16); border-radius:8px; padding: 25px 50px; position:absolute; top:50%; transform:translateY(-70%) translateX(-50%); left: 50%;"\n      >\n        <button \n          class="js-po-np--close"\n          style="display:flex; position: absolute; top:0; right:0px; cursor:pointer; background:transparent; border:0; padding:8px;"\n          aria-label="Close push notification preferences"\n        >\n          <svg style="width:24px;height:24px" viewBox="0 0 24 24">\n            <path fill="currentColor" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />\n          </svg>\n        </button>\n        <div class="js-po-np--text"\n          style="font-size:16px; padding-bottom:2px; border-bottom:6px solid #cacaca; margin-bottom:30px; text-align:center;"\n        >\n          '.concat(t.message,'\n        </div>\n\n        <div class="js-po-np--buttons" style="text-align:center;">\n    '),n.access_data.enabled&&(e+='<div style="margin-top: 10px;">\n                      <button class="js-po-np--access"\n                        style="'.concat(i,';background-color: #188675;">\n                        ').concat(n.access_data.text,"\n                      </button>\n                    </div>")),n.delete_data.enabled&&(e+='<div style="margin-top: 10px;">\n                      <button class="js-po-np--delete"\n                        style="'.concat(i,'">\n                        ').concat(n.delete_data.text,"\n                      </button>\n                    </div>")),n.unsubscribe.enabled&&(e+='<div style="margin-top: 10px;">\n                      <button class="js-po-np--unsubscribe"\n                        style="'.concat(i,'">\n                        ').concat(n.unsubscribe.text,"\n                      </button>\n                    </div>")),te(e+="\n          </div>\n        </div>\n      </div>")}}});var bn=Object.freeze({__proto__:null,NotificationPreferenceToggle:class{constructor(e,t,n){this.container=e,this.npWidget=n,this.notificationPreference=t}render(){this.node=this.createNode(),this.container.appendChild(this.node),this.close=this.node.querySelector(".js-po-np-toggle--close"),this.node.addEventListener("click",(()=>{this.npWidget.render()})),this.close.addEventListener("click",(e=>{this.node.parentNode.removeChild(this.node),e.preventDefault(),e.stopPropagation()}))}createNode(){var e=this.notificationPreference;return te('\n    <div class="js-po-np-toggle" style="cursor:pointer;z-index:2147483646;position:fixed;bottom:0;right:10px;border-radius:4px 4px 0 0;background-color: rgba(0,0,0,0.7);box-shadow: 0 2px 4px 0 rgba(0,0,0,0.5);color: #FFFFFF; font-size:14px; padding:0; display:flex; align-items:center;">\n      <button\n        style="padding: 8px; cursor:pointer; background:transparent; border:0; color:#ccc; font-size:inherit;"\n        aria-label="Open push notification preferences"\n      >\n        '.concat(e.message,'\n      </button>\n      <button \n        class="js-po-np-toggle--close"\n        style="display:flex; cursor:pointer; background:transparent; border:0; padding: 8px; color:#ccc; font-size:inherit;"\n        aria-label="Close push notification preferences toggle"\n      >\n        <svg style="width:20px;height:20px" viewBox="0 0 24 24">\n          <path fill="currentColor" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />\n        </svg>\n      </button>\n    </div>'))}}});const fn={GRANT_PERMISSION:"grantPermission",DENIED_PERMISSION:"deniedPermission"},_n={CHROME:"chrome",FIREFOX:"firefox",SAFARI:"safari"},wn={DESKTOP:"desktop",ANDROID:"android"},vn={START_REFERENCE:"start_reference"},yn={HS_CONTAINER:"po-hint-screen-widget-container",HS_SCREEN:"po-hint-screen",HS_CONTENT:"po-hs-content",HS_OVERLAY:"po-hs-overlay"},Sn={dismissOnOverlay:!0};class En{constructor(e={}){this.container=document.querySelector("body"),this.widget=null,this.purge(),this.options=Object.assign(Object.assign({},Sn),e)}render(e=fn.GRANT_PERMISSION,t=null){try{if(this.purge(),this._getDeviceType()===wn.ANDROID&&e===fn.GRANT_PERMISSION)return;let n=this._screenData(e);if(t){let{title:e,subtitle:i,hintMediaUrl:o,branding:r}=t;n.title=e||n.title,n.subtitle=i||n.subtitle,n.hintMediaUrl=o||n.hintMediaUrl,n.branding=!(!1===r)}let i=this._deviceScreenNodeFactory();this.widget=i(n),this.container.appendChild(this.widget),this.content=this.widget.querySelector(`.${yn.HS_CONTENT}`),this.hintScreen=this.widget.querySelector(`.${yn.HS_SCREEN}`),this.options.dismissOnOverlay&&this.hintScreen.addEventListener("click",(()=>{this.purge(),"function"==typeof this.options.onDismiss&&this.options.onDismiss()})),setTimeout((()=>{this._getDeviceType(),wn.DESKTOP}),10)}catch(e){}}purge(){let e=this.container.querySelector(`.${yn.HS_CONTAINER}`);e&&this.container.removeChild(e)}_deviceArrowConfig(e){let t=this._getBrowser();return{[fn.GRANT_PERMISSION]:{[_n.CHROME]:{[vn.START_REFERENCE]:{x:375,y:100},padding:20},[_n.FIREFOX]:{[vn.START_REFERENCE]:{x:311,y:148},padding:20}},[fn.DENIED_PERMISSION]:{[_n.CHROME]:{[vn.START_REFERENCE]:{x:131,y:0},padding:0},[_n.FIREFOX]:{[vn.START_REFERENCE]:{x:60,y:0},padding:0}}}[e][t]}_get_arrow_node(e=fn.GRANT_PERMISSION){let t=this._deviceArrowConfig(e),n=t[vn.START_REFERENCE],i=(window.innerWidth-this.content.getBoundingClientRect().width)/2,o=(window.innerHeight-this.content.getBoundingClientRect().height)/2;if("object"!=typeof n)return;let r=Math.sqrt(Math.pow(n.x-i,2)+Math.pow(n.y-o,2)),s=Math.max(.1*r,15),a=n.x,l=n.y+1*s+t.padding,c=i-20,d=Math.max(o+40,l+40),u=c-a,p=d-l,h=`M ${c} ${d} q ${-1*u} ${p}, -${u} ${-1*p}`,m=`M ${a-s} ${l+s} q ${s} -${3*s}, ${2*s} 0`,g=`<div class="po-helper-arrow-container">\n    <style>\n        .po-helper-arrow {\n            position: fixed;\n            top: 0;\n            left: 0;\n        }\n    </style>\n    <div class="po-helper-arrow">\n        <svg width="${window.innerWidth}px" height="${window.innerHeight}px" viewBox="0 0 ${window.innerWidth} ${window.innerHeight}" version="1.1"\n             xmlns="http://www.w3.org/2000/svg">\n            <desc>Arrow</desc>\n            <defs></defs>\n            <g id="Interaction-Flow" stroke-width="5" stroke-linecap="round" fill="none" fill-rule="evenodd">\n                <path d="${h}" id="tail" stroke="#FFFFFF"></path>\n                <path d="${m}" id="head" stroke="#FFFFFF"></path>\n            </g>\n        </svg>\n    </div>\n</div>`;return En._parseHTML(g)}_deviceScreenNodeFactory(){return this._getDeviceType()===wn.DESKTOP?this._desktopScreenNode:this._mobileScreenNode}_desktopScreenNode(e){let{title:t,subtitle:n,hintMediaUrl:i,branding:o}=e,r=`<div class="${yn.HS_CONTAINER}">\n    <style>\n        .po-hint-screen-widget * {\n            font-family: "Roboto", sans-serif;\n            line-height: 1em;\n        }\n\n        .${yn.HS_CONTENT} {\n            width: 462px;\n        }\n\n        .${yn.HS_OVERLAY} {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100vw;\n            height: 100vh;\n            background-color: rgba(0, 0, 0, .8);\n            z-index: 2147483646;\n        }\n\n        .${yn.HS_SCREEN} {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100vw;\n            height: 100vh;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            z-index: 2147483647;\n        }\n\n        @media (max-height: 700px) {\n            .po-hs-content {\n                transform: scale(0.7);\n            }\n        }\n\n        .${yn.HS_CONTENT} .title {\n            font-size: 47px;\n            color: white;\n        }\n\n        .${yn.HS_CONTENT} .sub-title {\n            font-size: 17px;\n            color: white;\n            margin-top: 35px;\n        }\n\n        .${yn.HS_CONTENT} .hint-media {\n            margin-top: 35px;\n        }\n\n        .${yn.HS_CONTENT} .hint-media img {\n            width: 100%;\n        }\n\n        .po-branding {\n            position: fixed;\n            bottom: 20px;\n            width: 100%;\n            display: flex;\n            justify-content: center;\n            z-index: 2147483647;\n        }\n\n    </style>\n    <div class="po-hint-screen-widget">\n        <div class="${yn.HS_OVERLAY}">\n            <div class="${yn.HS_SCREEN}">\n                <div class="${yn.HS_CONTENT}">\n                    <div class="hint-content">\n                        <div class="title">${t}</div>\n                        <div class="sub-title">${n}</div>\n                        <div class="hint-media">\n                            <img src="${i}">\n                        </div>\n                    </div>\n                </div>`;return!1!==o&&(r+='\n                <div class="po-branding">\n                    <a href="https://pushowl.com?ref=hint-screen-branding" target="_blank">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="113" height="49" viewBox="0 0 226 98">\n                      <g fill="#FFF" fill-rule="evenodd">\n                      <text font-family="Roboto-Regular, Roboto, sans-serif" font-size="18" transform="translate(-14 -4)" font-weight="normal">\n                        <tspan x="21.82" y="17">Powered By</tspan>\n                      </text>\n                      <path d="M221.702 71.477V48.622H226v22.855h-4.298Zm-11.404 0-2.952-11.58-2.932 11.58h-4.62l-5.239-17.18h4.376l3.141 13.056 3.143-13.057h4.56l3.082 13.026 3.141-13.026h4.16l-5.237 17.181h-4.623Zm-18.131-2.28c-1.705 1.636-3.818 2.453-6.338 2.452-2.52 0-4.618-.818-6.293-2.452-1.674-1.634-2.51-3.777-2.51-6.427 0-2.648.846-4.78 2.54-6.396 1.695-1.614 3.798-2.421 6.31-2.422 2.51 0 4.613.807 6.306 2.422 1.695 1.615 2.542 3.747 2.542 6.396s-.853 4.791-2.557 6.427Zm-3.178-10.215a4.231 4.231 0 0 0-3.145-1.335 4.134 4.134 0 0 0-3.115 1.335c-.847.89-1.271 2.163-1.272 3.819 0 1.655.423 2.928 1.272 3.818a4.11 4.11 0 0 0 3.1 1.336 4.24 4.24 0 0 0 3.145-1.351c.878-.899 1.317-2.172 1.318-3.819 0-1.644-.434-2.912-1.303-3.803Zm-17.98 3.046c0-1.34-.371-2.365-1.05-3.075s-1.609-1.065-2.784-1.065c-1.176 0-2.109.355-2.798 1.065-.689.71-1.101 1.736-1.101 3.075v9.451l-4.295-.002V48.622l4.295.001v8.25c1.093-1.874 2.93-2.754 5.384-2.754 1.957 0 3.555.643 4.792 1.93 1.238 1.287 1.856 3.073 1.855 5.36v10.068l-4.298.002v-9.451Zm-20.629-.655c.968.187 1.931.42 2.89.7a5.425 5.425 0 0 1 2.458 1.49c.68.712 1.02 1.66 1.02 2.84 0 1.552-.655 2.814-1.963 3.787-1.309.974-2.978 1.46-5.008 1.46s-3.694-.482-4.992-1.444c-1.3-.963-2.007-2.425-2.131-4.226h4.468c.132 1.444 1.064 2.255 2.732 2.255.805 0 1.454-.181 1.947-.543a1.69 1.69 0 0 0 .743-1.428c0-.592-.34-1.057-1.021-1.398a9.466 9.466 0 0 0-2.473-.792 35.005 35.005 0 0 1-2.89-.682 5.448 5.448 0 0 1-2.458-1.445c-.68-.693-1.02-1.598-1.019-2.717 0-1.49.629-2.742 1.885-3.757 1.257-1.014 2.926-1.521 5.008-1.52 2.081 0 3.75.501 5.008 1.505 1.258 1.005 1.907 2.445 1.99 4.164h-4.468c-.093-1.461-.975-2.253-2.623-2.253-.825 0-1.463.165-1.916.496-.443.31-.7.824-.68 1.365 0 .58.34 1.036 1.02 1.366a9.89 9.89 0 0 0 2.473.777Zm-14.146 7.463c-1.093 1.877-2.876 2.815-5.35 2.815-1.938 0-3.526-.644-4.762-1.933-1.236-1.29-1.855-3.078-1.856-5.367V54.296l4.297-.002v9.452c0 1.34.372 2.358 1.053 3.08.68.721 1.608 1.082 2.784 1.082 1.175 0 2.107-.36 2.798-1.083.69-.721 1.098-1.739 1.098-3.079v-9.452l4.298.002v17.138h-4.36v-2.598Zm-21.768 2.784c-2.327 0-4.04-.974-5.322-3.062v10.998h-4.467l-.001-25.433h4.468v2.75c1.22-1.943 2.918-2.92 5.275-2.92 2.358 0 4.302.82 5.833 2.464 1.531 1.643 2.294 3.761 2.294 6.355 0 2.593-.765 4.715-2.294 6.368-1.53 1.653-3.46 2.48-5.786 2.48Zm2.296-12.553a4.444 4.444 0 0 0-6.36.015c-.9.899-1.258 2.062-1.258 3.633 0 1.57.357 2.877 1.258 3.775a4.405 4.405 0 0 0 6.36-.015c.899-.91 1.348-2.149 1.349-3.719 0-1.57-.45-2.8-1.35-3.69ZM85.74 53.019a22.392 22.392 0 0 1 1.694 8.575c0 12.477-10.139 22.593-22.639 22.593-12.507 0-22.64-10.116-22.64-22.593C42.156 49.118 52.289 39 64.794 39h22.68a14.348 14.348 0 0 0-2.8 8.553 14.493 14.493 0 0 0 1.067 5.466Zm-20.945-8.326c-9.33.018-16.88 7.593-16.868 16.923.012 9.33 7.582 16.886 16.912 16.88 9.33-.006 16.89-7.572 16.89-16.902-.01-9.342-7.591-16.909-16.934-16.9Zm-.002 16.805a2.45 2.45 0 0 0-2.452 2.45h-3.585a6.037 6.037 0 0 1 12.074 0h-3.584a2.45 2.45 0 0 0-2.453-2.45Zm-42.114 0a2.45 2.45 0 0 0-2.453 2.45h-3.584a6.037 6.037 0 0 1 12.074 0H25.13a2.45 2.45 0 0 0-2.452-2.45Zm18.94 12.48a.01.01 0 0 1-.003.005 26.354 26.354 0 0 0 12.995 11.81c-2.82 4.187-6.525 8.004-10.919 11.314-5.466-4.114-9.86-9.015-12.839-14.437.028-.012.055-.026.083-.036a22.622 22.622 0 0 1-8.256 1.553C10.173 84.187.036 74.071.036 61.594a22.457 22.457 0 0 1 1.732-8.674A14.504 14.504 0 0 0 2.8 47.553 14.348 14.348 0 0 0 0 39h22.68a22.637 22.637 0 0 1 18.94 10.21 25.937 25.937 0 0 0-2.686 7.648 16.902 16.902 0 1 0 0 9.47 25.92 25.92 0 0 0 2.686 7.65Z"/></g></svg>\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),r+="  </div>\n                      </div>\n                    </div>\n                </div>\n                ",En._parseHTML(r)}_mobileScreenNode(e){let{title:t,subtitle:n,hintMediaUrl:i,showInstructions:o}=e,r=o?0:130,s=window.outerHeight-r,a=`<div class="${yn.HS_CONTAINER}">\n    <style>\n        .po-hint-screen-widget * {\n            font-family: "Roboto";\n            line-height: 1em;\n        }\n        \n        .${yn.HS_CONTENT} {\n            width: 325px;\n        }\n        \n        .${yn.HS_OVERLAY} {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100vw;\n            height: 100vh;\n            background-color: rgba(0, 0, 0, .8);\n            z-index: 2147483646;\n        }\n\n        .${yn.HS_SCREEN} {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            z-index: 2147483647;\n            flex-grow: 1;\n            height: ${s}px;\n        }\n        \n        .${yn.HS_CONTENT} .title {\n            font-size: 30px;\n            color: white;\n            margin-top: 50px;\n        }\n        \n        .${yn.HS_CONTENT} .sub-title {\n            font-size: 14px;\n            line-height: 16px;\n            color: white;\n            margin-top: 35px;\n        }\n        \n        .po-branding {\n            z-index: 2147483647;\n        }\n        \n        .instructions {\n            display: ${o?"block":"none"};\n        }\n        \n        .filler-container .padding-box {\n            display: ${o?"none":"block"};\n        }\n        \n        .instructions ul {\n            list-style-type: none;\n            padding-left: 0;\n        }\n        \n        .instructions ul li {\n            color: white;\n            font-size: 14px;\n            line-height: 16px;\n        }\n        \n        .filler-container {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100vw;\n            height: 100vh;\n            z-index: 2147483647;\n        }\n       \n    </style>\n    <div class="po-hint-screen-widget">\n        <div class="${yn.HS_OVERLAY}"></div>\n        <div class="filler-container">\n            <div class="${yn.HS_SCREEN}">\n                <div class="${yn.HS_CONTENT}">\n                    <div class="hint-content">\n                        <div class="po-branding">\n                            <a href="https://pushowl.com?ref=hint-screen-branding" target="_blank">\n                              <svg xmlns="http://www.w3.org/2000/svg" width="30" height="20"><path fill="#FFF" fill-rule="evenodd" d="m14.282 12.008.001-.002a8.77 8.77 0 0 1-.91-2.59 5.723 5.723 0 1 1 0-3.207 8.77 8.77 0 0 1 .91-2.59A7.67 7.67 0 0 0 7.867.161H.183a4.9 4.9 0 0 1 .6 4.714 7.667 7.667 0 0 0 9.88 10.063l-.027.011c1.009 1.837 2.497 3.496 4.349 4.89a16.114 16.114 0 0 0 3.699-3.832 8.925 8.925 0 0 1-4.402-3.999Zm-8.46-3.399h1.213a.83.83 0 0 1 1.662 0h1.215a2.045 2.045 0 0 0-4.09 0Zm23.412-3.688-.005-.012A4.908 4.908 0 0 1 29.817.16h-7.683a7.651 7.651 0 1 0 7.1 4.76Zm-7.1 8.615a5.724 5.724 0 1 1 5.737-5.723 5.731 5.731 0 0 1-5.737 5.723Zm0-6.967a2.043 2.043 0 0 0-2.045 2.04h1.214a.83.83 0 0 1 1.662 0h1.214a2.043 2.043 0 0 0-2.045-2.04Z"/></svg>\n                            </a>\n                        </div>\n                        <div class="title">${t}</div>\n                        <div class="sub-title">${n}</div>\n                        <div class="instructions">\n                            <ul>\n                                <li>1. \tClick on the lock icon \n                                    <span>\n                                      <svg width="12px" height="17px" viewBox="0 0 12 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                                        <path d="M10.5 6h-.75V4.5C9.75 2.43 8.07.75 6 .75 3.93.75 2.25 2.43 2.25 4.5V6H1.5C.675 6 0 6.675 0 7.5V15c0 .825.675 1.5 1.5 1.5h9c.825 0 1.5-.675 1.5-1.5V7.5c0-.825-.675-1.5-1.5-1.5zM6 12.75c-.825 0-1.5-.675-1.5-1.5s.675-1.5 1.5-1.5 1.5.675 1.5 1.5-.675 1.5-1.5 1.5zM8.325 6h-4.65V4.5A2.327 2.327 0 016 2.175 2.327 2.327 0 018.325 4.5V6z" fill-rule="nonzero" fill="#FFF"/>\n                                      </svg>\n                                    </span> in the address bar above.</li>\n                                <li>2. \tClick on ‘Permission Settings’.</li>\n                                <li>3. \tChange Notifications permission to ‘Allow’.</li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="padding-box" style="height: ${r}px; width: 100%;"></div>\n        </div>\n\n    </div>\n</div>\n`;return En._parseHTML(a)}_getDeviceType(){return/(android)/i.test(navigator.userAgent)?wn.ANDROID:wn.DESKTOP}_getBrowser(){const{name:e}=se();return e}_screenData(e=fn.GRANT_PERMISSION){let t={[wn.DESKTOP]:{[_n.CHROME]:{[fn.GRANT_PERMISSION]:{title:"One more step to go!",subtitle:"Click ‘Allow’ to receive updates from us. Rest assured - we hate spam as much as you do.",hintMediaUrl:"https://static.pushowl.com/sdks/hint-screen/ChromeSubscriptionGIF.gif",branding:!1},[fn.DENIED_PERMISSION]:{title:"Change your settings to allow notifications",subtitle:"Change notifications permission to ‘Allow’ to receive updates from us. No spam, pinky promise.",hintMediaUrl:"https://static.pushowl.com/sdks/hint-screen/ChromeDesktopUnblock.gif",branding:!1}},[_n.FIREFOX]:{[fn.GRANT_PERMISSION]:{title:"One more step to go!",subtitle:"Click ‘Allow’ to receive updates from us. Rest assured - we hate spam as much as you do.",hintMediaUrl:"https://static.pushowl.com/sdks/hint-screen/FirefoxSubscriptionGIF.gif",branding:!1},[fn.DENIED_PERMISSION]:{title:"Change your settings to allow notifications",subtitle:"Remove ‘Blocked’ from notification permissions to receive updates from us. No spam, pinky promise.",hintMediaUrl:"https://storage.googleapis.com/pushowl/sdk/general/hint-screen/FirefoxDesktopUnblock.gif",branding:!1}},[_n.SAFARI]:{[fn.DENIED_PERMISSION]:{title:"Change your settings to allow notifications",subtitle:"Change notifications permission to ‘Allow’ to receive updates from us. No spam, pinky promise.",hintMediaUrl:"https://static.pushowl.com/sdks/hint-screen/SafariDesktopUnblock.gif",branding:!1}}},[wn.ANDROID]:{[_n.CHROME]:{[fn.GRANT_PERMISSION]:{title:"One more step to go!",subtitle:"Click ‘Allow’ to receive updates from us. Rest assured - we hate spam as much as you do.",hintMediaUrl:"https://static.pushowl.com/sdks/hint-screen/ChromeSubscriptionGIF.gif",branding:!1},[fn.DENIED_PERMISSION]:{title:"Change your settings to allow notifications",subtitle:"Change notifications permission to ‘Allow’ to receive updates from us. No spam, pinky promise.",hintMediaUrl:"https://static.pushowl.com/sdks/hint-screen/ChromeDesktopUnblock.gif",showInstructions:!0,branding:!1}}}},n=this._getDeviceType(),i=this._getBrowser();return t[n][i][e]}static _parseHTML(e){let t=document.implementation.createHTMLDocument();return t.body.innerHTML=e,t.body.children[0]}}var In=Object.freeze({__proto__:null,PushowlHintScreenHandler:class{constructor(e={}){this.hintscreen=new En({onDismiss:e.onDismiss})}show(e){let t=fn;this.hintscreen.purge(),!se().isSafari&&window.Notification&&window.Notification.permission===c.NOTIFICATION_PERMISSION.DEFAULT&&this.hintscreen.render(t.GRANT_PERMISSION,e),window.Notification&&window.Notification.permission===c.NOTIFICATION_PERMISSION.DENIED&&this.hintscreen.render(t.DENIED_PERMISSION),window.Notification&&window.Notification.permission===c.NOTIFICATION_PERMISSION.GRANTED&&this.hintscreen.purge()}purge(){this.hintscreen.purge()}}});const xn=()=>window.innerWidth<=444;var Tn=Object.freeze({__proto__:null,OptinPromptWidget:class{constructor(e){this.config=e,this.node=null,this.container=document.body,this.state={multilingual_title:null,multilingual_description:null,theme:{},yesButtonListener:null,noButtonListener:null,branding:!0,logo:null,position:{default:"top-center",mobile:"top"},autoFocus:!1},this.rendered=!1}init(){this.node=this._createNode(),this.container.appendChild(this.node),this.title=this.node.querySelector(".js-pushowl-title"),this.description=this.node.querySelector(".js-pushowl-description"),this.yesButton=this.node.querySelector(".js-pushowl-yes-button"),this.noButton=this.node.querySelector(".js-pushowl-no-button"),this.node.querySelector(".js-pushowl-btn-container").setAttribute("dir","auto"),this.node.querySelector(".js-pushowl-title-desc-container").setAttribute("dir","auto");var e=0;window.addEventListener("click",(t=>(Date.now()-e<1e3||this.clickHandler(t),!0)),!0),window.addEventListener("touchend",(t=>(e=Date.now(),this.clickHandler(t),!0)),!0)}clickHandler(e){const t=e.target;this.yesButton.contains(t)?this.state.yesButtonListener&&this.state.yesButtonListener():this.noButton.contains(t)&&this.state.noButtonListener&&this.state.noButtonListener()}getPositionCss(e){switch(e){case At.CENTERED:return xn()?"\n          top: 0 !important;\n          bottom: auto !important;\n          left: 0 !important;\n        ":"\n        top: 0 !important;\n        left: calc(50vw - 210px) !important;\n      ";case At.TOP_CENTERED:case"top-center":return"\n        bottom: auto !important;\n        top: 0 !important;\n        left: calc(50vw - 210px) !important;\n      ";case At.TOP_LEFT:case"top-left":return"\n        top: 0 !important;\n        left: 0 !important;\n      ";case At.TOP_RIGHT:case"top-right":return"\n        top: 0 !important;\n        right: 0 !important;\n      ";case At.BOTTOM_CENTERED:case"bottom-center":return"\n        top: auto !important;\n        bottom: 0 !important;\n        left: calc(50vw - 210px) !important;\n      ";case At.BOTTOM_LEFT:case"bottom-left":return"\n        bottom: 0 !important;\n        left: 0 !important;\n      ";case At.BOTTOM_RIGHT:case"bottom-right":return"\n        bottom: 0 !important;\n        right: 0 !important;\n      ";case"top":return"\n        top: 0 !important;\n        bottom: auto !important;\n        left: 0 !important;\n      ";case"bottom":return"\n        top: auto !important;\n        bottom: 0 !important;\n        left: 0 !important;\n      ";default:return""}}getMultiLingualLabel(e,t,n="default"){return e[t]||e[n]}render(){this.rendered||(this.init(),this.rendered=!0);const{language:e}=function(){const[e,t]=navigator.language.split("-");return{language:e,region:t}}();this.title.textContent=this.getMultiLingualLabel(this.state.multilingual_title,e),this.description.textContent=this.getMultiLingualLabel(this.state.multilingual_description,e),this.yesButton.textContent=this.getMultiLingualLabel(this.state.yesButton.multilingual_label,e),this.noButton.textContent=this.getMultiLingualLabel(this.state.noButton.multilingual_label,e),this.state.autoFocus&&this.title.focus()}setState(e){const t={};Object.keys(e).filter((t=>void 0!==e[t])).map((n=>t[n]=e[n])),this.state=Object.assign(Object.assign({},this.state),t),this.render()}destroy(){this.node.remove()}_createNode(){const e=this.state.theme.yesButtonBgColor||"hsl(223, 71%, 52%)",t=this.state.theme.yesButtonColor||"white";let n;return n=`<div>\n    <style>\n        @keyframes show-up {\n          from {\n            opacity: 0;\n            transform: translateY(${this.state.position[xn()?"mobile":"default"].match(/top/)?"-20px":"20px"});\n          }\n\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        .pushowl-optin {\n            all: initial;\n            display: block !important;\n            z-index: 2147483647 !important;\n            position: fixed !important;\n            width: 420px !important;\n            margin: 12px !important;\n            box-sizing: border-box !important;\n            background: rgb(255, 255, 255) !important;\n            border-radius: 4px !important;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif !important;\n            align-items: center !important;\n            font-size: 14px !important;\n            box-shadow: 0px 12px 13px rgba(0, 0, 0, 0.21)!important;\n            ${this.getPositionCss(this.state.position.default)}\n            animation-duration: 0.6s;\n            animation-name: show-up;\n        }\n        .pushowl-optin * {\n            width: initial !important;\n            font-family: inherit !important;\n            letter-spacing: initial !important;\n            box-sizing: border-box !important;\n            line-height: initial !important;\n            font-weight: normal !important;\n            -webkit-font-smoothing: initial !important;\n            text-shadow: initial !important;\n            border: initial !important;\n            background: initial !important;\n            padding: initial !important;\n            text-align: initial !important;\n            box-shadow: initial !important;\n            min-width: initial !important;\n            text-transform: initial !important;\n        }\n        .pushowl-optin svg {\n          width: initial;\n          height: initial;\n          stroke: initial;\n          fill: initial;\n        }\n        @media screen and (max-width: 444px) {\n            .pushowl-optin {\n                width: calc(100% - 24px) !important;\n                ${this.getPositionCss(this.state.position.mobile)}\n            }\n        }\n        .pushowl-optin__content {\n            padding: 16px !important;\n        }\n        h2.pushowl-optin__title {\n            text-transform: initial !important;\n            text-align: initial !important;\n            letter-spacing: 0.3px !important;\n            font-size: 16px !important;\n            margin-top: 0 !important;\n            margin-bottom: 8px !important;\n            color: #343946 !important;\n            font-weight: 500 !important;\n            padding: 0 !important;\n        }\n        .pushowl-optin__description {\n            color: #637381 !important;\n            margin: 0 !important;\n            padding: 0 !important;\n            font-size: inherit !important;\n        }\n        .pushowl-optin__image {\n            border-radius: 50% !important;\n            flex-shrink: 0 !important;\n            margin-right: 16px !important;\n            padding: 8px !important;\n        }\n        .pushowl-optin__image img {\n          width: 40px !important;\n        }\n        .pushowl-optin__button {\n            width: initial !important;\n            min-width: initial !important;\n            height: initial !important;\n            min-height: initial !important;\n            text-transform: initial !important;\n            margin: initial !important;\n            cursor: pointer !important;\n            font-size: inherit !important;\n            padding: 6px 20px !important;\n            max-width: 150px !important;\n            border-radius: 4px !important;\n            border: none !important;\n            white-space: nowrap !important;\n            overflow: hidden !important;\n            text-overflow: ellipsis !important;\n        }\n        .pushowl-optin__yes-button {\n            background: ${e} !important;\n            color: ${t} !important;\n        }\n        .pushowl-optin__no-button {\n            background: transparent !important;\n            border: 0 !important;\n            color: #637381 !important;\n        }\n        .pushowl-optin__footer {\n            display: flex !important;\n            justify-content: flex-end !important;\n            align-items: center !important;\n            margin-top: 16px !important;\n        }\n        .pushowl-optin__footer-btn-wrap {\n          display: flex !important;\n          align-items: center !important;\n        }\n    </style>\n    <dialog class="pushowl-optin" open>\n        <div class="pushowl-optin__content">\n            <div style="display:flex;align-items:flex-start;flex-direction:initial;height: initial !important;min-height: initial !important; float:unset" class="js-pushowl-title-desc-container">\n                <div class="pushowl-optin__image">\n                    ${this.state.logo?`<img src="${this.state.logo}" alt="" />`:'<svg width="40" height="42" fill="none" xmlns="http://www.w3.org/2000/svg"><ellipse cx="20" cy="2.53" rx="2" ry="2.024" fill="#E5843B"/><path d="M.265 34.41h39.47a.18.18 0 00.167-.247l-5.264-13.241a42.729 42.729 0 01-2.395-8.492l-.162-.936a12.261 12.261 0 00-24.162 0l-.162.936a42.723 42.723 0 01-2.395 8.492L.098 34.162a.18.18 0 00.167.247z" fill="#F8CE53"/><ellipse cx="20" cy="34.916" rx="20" ry="7.084" fill="#ECA248"/><mask id="a" maskUnits="userSpaceOnUse" x="0" y="27" width="40" height="15"><ellipse cx="20" cy="34.916" rx="20" ry="7.084" fill="#ECA248"/></mask><g mask="url(#a)"><ellipse cx="20" cy="28.084" rx="7" ry="7.084" fill="#E5843B"/></g></svg>'}\n                </div>\n                <div style="flex:1">\n                    <h2 class="js-pushowl-title pushowl-optin__title" tabindex="-1"></h2>\n                    <p class="js-pushowl-description pushowl-optin__description">Description will come here...</p>\n                </div>\n            </div>\n            <div class="pushowl-optin__footer">\n                <div class="pushowl-optin__footer-btn-wrap js-pushowl-btn-container">\n                    <button class="js-pushowl-no-button pushowl-optin__button pushowl-optin__no-button">Later</button>\n                    <button class="js-pushowl-yes-button pushowl-optin__button pushowl-optin__yes-button">Allow</button>\n                </div>\n            </div>\n        </div>\n    </dialog>\n </div>\n        `,te(n)}}});const On=window.innerWidth<=365||ne();var Nn,Cn,Pn,Mn,kn,An,Ln,jn=Object.freeze({__proto__:null,NewCustomPromptWidget:class{constructor(e){this.config=e,this.node=null,this.container=document.body,this.state={title:null,yesButtonText:"",noButtonText:"",theme:{},yesButtonListener:null,noButtonListener:null,logo:null,position:{default:"top-left",mobile:"bottom"}},this.rendered=!1}init(){this.node=this._createNode(),this.container.appendChild(this.node),this.title=this.node.querySelector(".js-pushowl-title")}getPositionCss(){switch(On?"bottom":"top-left"){case"top-left":return"\n        top: 10px !important;\n        left: 125px !important;\n      ";case"bottom":return"\n        top: auto !important;\n        bottom: 0 !important;\n        left: 0 !important;\n      ";default:return""}}render(){this.rendered||(this.init(),this.rendered=!0),this.title.textContent=this.state.title}setState(e){const t={};Object.keys(e).filter((t=>void 0!==e[t])).forEach((n=>{t[n]=e[n]})),this.state=Object.assign(Object.assign({},this.state),t),this.render()}destroy(){this.node.remove()}changeState(e){this.node.dataset.state=e}_createNode(){const e=this.state.theme.borderColor||"#919eab";return te(`<div class="js-custom-prompt-2">\n    <style>\n        @keyframes show-up {\n          from {\n            opacity: 0;\n            transform: scale(0.8);\n          }\n\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n        .pushowl-optin {\n            all: initial;\n            display: block !important;\n            z-index: 2147483647 !important;\n            position: fixed !important;\n            width: 345px !important;\n            box-sizing: border-box !important;\n            background: rgb(255, 255, 255) !important;\n            border-radius: 12px !important;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif !important;\n            align-items: center !important;\n            font-size: 14px !important;\n            box-shadow: 12px 12px 24px rgba(0, 0, 0, 0.16)!important;\n            border: 2px solid ${e};\n            ${this.getPositionCss()}\n            animation-duration: 0.3s;\n            animation-name: show-up;\n            transition: 0.3s ease;\n\n            ${On?"\n                margin: 10px !important;\n                width: calc(100% - 20px) !important;\n                ":""}\n        }\n        .pushowl-optin * {\n            width: initial !important;\n            font-family: inherit !important;\n            letter-spacing: initial !important;\n            box-sizing: border-box !important;\n            line-height: initial !important;\n            font-weight: normal !important;\n            -webkit-font-smoothing: initial !important;\n            text-shadow: initial !important;\n            border: initial !important;\n            background: initial !important;\n            padding: initial !important;\n            text-align: initial !important;\n            box-shadow: initial !important;\n            min-width: initial !important;\n        }\n        .pushowl-optin svg {\n          width: initial;\n          height: initial;\n          stroke: initial;\n          fill: initial;\n        }\n        .pushowl-optin__content {\n            padding: 16px !important;\n        }\n        .pushowl-optin__title {\n            text-transform: initial !important;\n            text-align: initial !important;\n            letter-spacing: 0.3px !important;\n            font-size: 16px !important;\n            margin-top: 0 !important;\n            margin-bottom: 8px !important;\n            color: #343946 !important;\n            font-weight: 500 !important;\n            padding: 0 !important;\n        }\n        .pushowl-optin__image {\n            border-radius: 50% !important;\n            flex-shrink: 0 !important;\n            margin-right: 16px !important;\n            padding: 8px !important;\n        }\n        .pushowl-optin__image img {\n          width: 40px !important;\n        }\n        .pushowl-optin:before,\n        .pushowl-optin:after {\n          content: '';\n          display: block !important;\n          position: absolute;\n          left: 20px;\n          top: -12px;\n          background: white;\n          width: 30px;\n          height: 30px;\n          border: 2px solid ${e};\n          transition: 0.3s ease;\n          border-radius: 8px;\n          clip-path: polygon(0 0, 87% 0, 0 87%);\n          transform: rotate(45deg) translateY(5px);\n          opacity: 0;\n        }\n       \n        [data-state="down"] .pushowl-optin {\n          transform: translateY(140px);\n        }\n        [data-state="down"] .pushowl-optin:before {\n          opacity: 1;\n          transform: rotate(45deg) translateY(0);\n        }\n        [data-state="fade-top"] .pushowl-optin {\n          opacity: 0;\n          transform: translateY(0);\n        }\n\n        [data-state="mobile-fade"] .pushowl-optin {\n          opacity: 0;\n          transform: translateY(-40vh)\n        }\n    </style>\n    <div class="pushowl-optin">\n        <div class="pushowl-optin__content">\n            <div style="display:flex;align-items:center">\n                <div class="pushowl-optin__image">\n                    ${this.state.logo?`<img src="${this.state.logo}" alt="" />`:'<svg width="40" height="42" fill="none" xmlns="http://www.w3.org/2000/svg"><ellipse cx="20" cy="2.53" rx="2" ry="2.024" fill="#E5843B"/><path d="M.265 34.41h39.47a.18.18 0 00.167-.247l-5.264-13.241a42.729 42.729 0 01-2.395-8.492l-.162-.936a12.261 12.261 0 00-24.162 0l-.162.936a42.723 42.723 0 01-2.395 8.492L.098 34.162a.18.18 0 00.167.247z" fill="#F8CE53"/><ellipse cx="20" cy="34.916" rx="20" ry="7.084" fill="#ECA248"/><mask id="a" maskUnits="userSpaceOnUse" x="0" y="27" width="40" height="15"><ellipse cx="20" cy="34.916" rx="20" ry="7.084" fill="#ECA248"/></mask><g mask="url(#a)"><ellipse cx="20" cy="28.084" rx="7" ry="7.084" fill="#E5843B"/></g></svg>'}\n                </div>\n                <div style="flex:1">\n                    <h2 class="js-pushowl-title pushowl-optin__title"></h2>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n        `)}}}),Dn={},Rn=[],Un=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Bn=Array.isArray;function zn(e,t){for(var n in t)e[n]=t[n];return e}function Fn(e){var t=e.parentNode;t&&t.removeChild(e)}function Hn(e,t,n){var i,o,r,s={};for(r in t)"key"==r?i=t[r]:"ref"==r?o=t[r]:s[r]=t[r];if(arguments.length>2&&(s.children=arguments.length>3?Nn.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===s[r]&&(s[r]=e.defaultProps[r]);return Yn(e,s,i,o,null)}function Yn(e,t,n,i,o){var r={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++Pn:o};return null==o&&null!=Cn.vnode&&Cn.vnode(r),r}function Gn(e){return e.children}function $n(e,t){this.props=e,this.context=t}function Vn(e,t){if(null==t)return e.__?Vn(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?Vn(e):null}function Kn(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return Kn(e)}}function qn(e){(!e.__d&&(e.__d=!0)&&Mn.push(e)&&!Wn.__r++||kn!==Cn.debounceRendering)&&((kn=Cn.debounceRendering)||An)(Wn)}function Wn(){var e,t,n,i,o,r,s,a,l;for(Mn.sort(Ln);e=Mn.shift();)e.__d&&(t=Mn.length,i=void 0,o=void 0,r=void 0,a=(s=(n=e).__v).__e,(l=n.__P)&&(i=[],o=[],(r=zn({},s)).__v=s.__v+1,oi(l,s,r,n.__n,void 0!==l.ownerSVGElement,null!=s.__h?[a]:null,i,null==a?Vn(s):a,s.__h,o),ri(i,s,o),s.__e!=a&&Kn(s)),Mn.length>t&&Mn.sort(Ln));Wn.__r=0}function Qn(e,t,n,i,o,r,s,a,l,c,d){var u,p,h,m,g,b,f,_,w,v=0,y=i&&i.__k||Rn,S=y.length,E=S,I=t.length;for(n.__k=[],u=0;u<I;u++)null!=(m=n.__k[u]=null==(m=t[u])||"boolean"==typeof m||"function"==typeof m?null:"string"==typeof m||"number"==typeof m||"bigint"==typeof m?Yn(null,m,null,null,m):Bn(m)?Yn(Gn,{children:m},null,null,null):m.__b>0?Yn(m.type,m.props,m.key,m.ref?m.ref:null,m.__v):m)?(m.__=n,m.__b=n.__b+1,-1===(_=Xn(m,y,f=u+v,E))?h=Dn:(h=y[_]||Dn,y[_]=void 0,E--),oi(e,m,h,o,r,s,a,l,c,d),g=m.__e,(p=m.ref)&&h.ref!=p&&(h.ref&&ai(h.ref,null,m),d.push(p,m.__c||g,m)),null!=g&&(null==b&&(b=g),(w=h===Dn||null===h.__v)?-1==_&&v--:_!==f&&(_===f+1?v++:_>f?E>I-f?v+=_-f:v--:v=_<f&&_==f-1?_-f:0),f=u+v,"function"!=typeof m.type||_===f&&h.__k!==m.__k?"function"==typeof m.type||_===f&&!w?void 0!==m.__d?(l=m.__d,m.__d=void 0):l=g.nextSibling:l=Jn(e,g,l):l=Zn(m,l,e),"function"==typeof n.type&&(n.__d=l))):(h=y[u])&&null==h.key&&h.__e&&(h.__e==l&&(l=Vn(h)),li(h,h,!1),y[u]=null);for(n.__e=b,u=S;u--;)null!=y[u]&&("function"==typeof n.type&&null!=y[u].__e&&y[u].__e==n.__d&&(n.__d=y[u].__e.nextSibling),li(y[u],y[u]))}function Zn(e,t,n){for(var i,o=e.__k,r=0;o&&r<o.length;r++)(i=o[r])&&(i.__=e,t="function"==typeof i.type?Zn(i,t,n):Jn(n,i.__e,t));return t}function Jn(e,t,n){return null==n||n.parentNode!==e?e.insertBefore(t,null):t==n&&null!=t.parentNode||e.insertBefore(t,n),t.nextSibling}function Xn(e,t,n,i){var o=e.key,r=e.type,s=n-1,a=n+1,l=t[n];if(null===l||l&&o==l.key&&r===l.type)return n;if(i>(null!=l?1:0))for(;s>=0||a<t.length;){if(s>=0){if((l=t[s])&&o==l.key&&r===l.type)return s;s--}if(a<t.length){if((l=t[a])&&o==l.key&&r===l.type)return a;a++}}return-1}function ei(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||Un.test(t)?n:n+"px"}function ti(e,t,n,i,o){var r;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||ei(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||ei(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])r=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?i||e.addEventListener(t,r?ii:ni,r):e.removeEventListener(t,r?ii:ni,r);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function ni(e){return this.l[e.type+!1](Cn.event?Cn.event(e):e)}function ii(e){return this.l[e.type+!0](Cn.event?Cn.event(e):e)}function oi(e,t,n,i,o,r,s,a,l,c){var d,u,p,h,m,g,b,f,_,w,v,y,S,E,I,x=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(l=n.__h,a=t.__e=n.__e,t.__h=null,r=[a]),(d=Cn.__b)&&d(t);e:if("function"==typeof x)try{if(f=t.props,_=(d=x.contextType)&&i[d.__c],w=d?_?_.props.value:d.__:i,n.__c?b=(u=t.__c=n.__c).__=u.__E:("prototype"in x&&x.prototype.render?t.__c=u=new x(f,w):(t.__c=u=new $n(f,w),u.constructor=x,u.render=ci),_&&_.sub(u),u.props=f,u.state||(u.state={}),u.context=w,u.__n=i,p=u.__d=!0,u.__h=[],u._sb=[]),null==u.__s&&(u.__s=u.state),null!=x.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=zn({},u.__s)),zn(u.__s,x.getDerivedStateFromProps(f,u.__s))),h=u.props,m=u.state,u.__v=t,p)null==x.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==x.getDerivedStateFromProps&&f!==h&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(f,w),!u.__e&&(null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(f,u.__s,w)||t.__v===n.__v)){for(t.__v!==n.__v&&(u.props=f,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),v=0;v<u._sb.length;v++)u.__h.push(u._sb[v]);u._sb=[],u.__h.length&&s.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(f,u.__s,w),null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(h,m,g)}))}if(u.context=w,u.props=f,u.__P=e,u.__e=!1,y=Cn.__r,S=0,"prototype"in x&&x.prototype.render){for(u.state=u.__s,u.__d=!1,y&&y(t),d=u.render(u.props,u.state,u.context),E=0;E<u._sb.length;E++)u.__h.push(u._sb[E]);u._sb=[]}else do{u.__d=!1,y&&y(t),d=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++S<25);u.state=u.__s,null!=u.getChildContext&&(i=zn(zn({},i),u.getChildContext())),p||null==u.getSnapshotBeforeUpdate||(g=u.getSnapshotBeforeUpdate(h,m)),Qn(e,Bn(I=null!=d&&d.type===Gn&&null==d.key?d.props.children:d)?I:[I],t,n,i,o,r,s,a,l,c),u.base=t.__e,t.__h=null,u.__h.length&&s.push(u),b&&(u.__E=u.__=null)}catch(e){t.__v=null,(l||null!=r)&&(t.__e=a,t.__h=!!l,r[r.indexOf(a)]=null),Cn.__e(e,t,n)}else null==r&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=si(n.__e,t,n,i,o,r,s,l,c);(d=Cn.diffed)&&d(t)}function ri(e,t,n){for(var i=0;i<n.length;i++)ai(n[i],n[++i],n[++i]);Cn.__c&&Cn.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){Cn.__e(e,t.__v)}}))}function si(e,t,n,i,o,r,s,a,l){var c,d,u,p=n.props,h=t.props,m=t.type,g=0;if("svg"===m&&(o=!0),null!=r)for(;g<r.length;g++)if((c=r[g])&&"setAttribute"in c==!!m&&(m?c.localName===m:3===c.nodeType)){e=c,r[g]=null;break}if(null==e){if(null===m)return document.createTextNode(h);e=o?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,h.is&&h),r=null,a=!1}if(null===m)p===h||a&&e.data===h||(e.data=h);else{if(r=r&&Nn.call(e.childNodes),d=(p=n.props||Dn).dangerouslySetInnerHTML,u=h.dangerouslySetInnerHTML,!a){if(null!=r)for(p={},g=0;g<e.attributes.length;g++)p[e.attributes[g].name]=e.attributes[g].value;(u||d)&&(u&&(d&&u.__html==d.__html||u.__html===e.innerHTML)||(e.innerHTML=u&&u.__html||""))}if(function(e,t,n,i,o){var r;for(r in n)"children"===r||"key"===r||r in t||ti(e,r,null,n[r],i);for(r in t)o&&"function"!=typeof t[r]||"children"===r||"key"===r||"value"===r||"checked"===r||n[r]===t[r]||ti(e,r,t[r],n[r],i)}(e,h,p,o,a),u)t.__k=[];else if(Qn(e,Bn(g=t.props.children)?g:[g],t,n,i,o&&"foreignObject"!==m,r,s,r?r[0]:n.__k&&Vn(n,0),a,l),null!=r)for(g=r.length;g--;)null!=r[g]&&Fn(r[g]);a||("value"in h&&void 0!==(g=h.value)&&(g!==e.value||"progress"===m&&!g||"option"===m&&g!==p.value)&&ti(e,"value",g,p.value,!1),"checked"in h&&void 0!==(g=h.checked)&&g!==e.checked&&ti(e,"checked",g,p.checked,!1))}return e}function ai(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){Cn.__e(e,n)}}function li(e,t,n){var i,o;if(Cn.unmount&&Cn.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||ai(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){Cn.__e(e,t)}i.base=i.__P=null,e.__c=void 0}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&li(i[o],t,n||"function"!=typeof e.type);n||null==e.__e||Fn(e.__e),e.__=e.__e=e.__d=void 0}function ci(e,t,n){return this.constructor(e,n)}function di(e,t,n){var i,o,r,s;Cn.__&&Cn.__(e,t),o=(i="function"==typeof n)?null:n&&n.__k||t.__k,r=[],s=[],oi(t,e=(!i&&n||t).__k=Hn(Gn,null,[e]),o||Dn,Dn,void 0!==t.ownerSVGElement,!i&&n?[n]:o?null:t.firstChild?Nn.call(t.childNodes):null,r,!i&&n?n:o?o.__e:t.firstChild,i,s),ri(r,e,s)}Nn=Rn.slice,Cn={__e:function(e,t,n,i){for(var o,r,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((r=o.constructor)&&null!=r.getDerivedStateFromError&&(o.setState(r.getDerivedStateFromError(e)),s=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,i||{}),s=o.__d),s)return o.__E=o}catch(t){e=t}throw e}},Pn=0,$n.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=zn({},this.state),"function"==typeof e&&(e=e(zn({},n),this.props)),e&&zn(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),qn(this))},$n.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),qn(this))},$n.prototype.render=Gn,Mn=[],An="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ln=function(e,t){return e.__v.__b-t.__v.__b},Wn.__r=0;var ui=0;function pi(e,t,n,i,o,r){var s,a,l={};for(a in t)"ref"==a?s=t[a]:l[a]=t[a];var c={type:e,props:l,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--ui,__source:o,__self:r};if("function"==typeof e&&(s=e.defaultProps))for(a in s)void 0===l[a]&&(l[a]=s[a]);return Cn.vnode&&Cn.vnode(c),c}var hi,mi,gi,bi,fi=0,_i=[],wi=[],vi=Cn.__b,yi=Cn.__r,Si=Cn.diffed,Ei=Cn.__c,Ii=Cn.unmount;function xi(e,t){Cn.__h&&Cn.__h(mi,e,fi||t),fi=0;var n=mi.__H||(mi.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:wi}),n.__[e]}function Ti(e){return fi=1,function(e,t,n){var i=xi(hi++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):Li(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=mi,!mi.u)){var o=function(e,t,n){if(!i.__c.__H)return!0;var o=i.__c.__H.__.filter((function(e){return e.__c}));if(o.every((function(e){return!e.__N})))return!r||r.call(this,e,t,n);var s=!1;return o.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}})),!(!s&&i.__c.props===e)&&(!r||r.call(this,e,t,n))};mi.u=!0;var r=mi.shouldComponentUpdate,s=mi.componentWillUpdate;mi.componentWillUpdate=function(e,t,n){if(this.__e){var i=r;r=void 0,o(e,t,n),r=i}s&&s.call(this,e,t,n)},mi.shouldComponentUpdate=o}return i.__N||i.__}(Li,e)}function Oi(e){return fi=5,function(e,t){var n=xi(hi++,7);return Ai(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}((function(){return{current:e}}),[])}function Ni(){for(var e;e=_i.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Mi),e.__H.__h.forEach(ki),e.__H.__h=[]}catch(t){e.__H.__h=[],Cn.__e(t,e.__v)}}Cn.__b=function(e){mi=null,vi&&vi(e)},Cn.__r=function(e){yi&&yi(e),hi=0;var t=(mi=e.__c).__H;t&&(gi===mi?(t.__h=[],mi.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=wi,e.__N=e.i=void 0}))):(t.__h.forEach(Mi),t.__h.forEach(ki),t.__h=[],hi=0)),gi=mi},Cn.diffed=function(e){Si&&Si(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==_i.push(t)&&bi===Cn.requestAnimationFrame||((bi=Cn.requestAnimationFrame)||Pi)(Ni)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==wi&&(e.__=e.__V),e.i=void 0,e.__V=wi}))),gi=mi=null},Cn.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Mi),e.__h=e.__h.filter((function(e){return!e.__||ki(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Cn.__e(n,e.__v)}})),Ei&&Ei(e,t)},Cn.unmount=function(e){Ii&&Ii(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{Mi(e)}catch(e){t=e}})),n.__H=void 0,t&&Cn.__e(t,n.__v))};var Ci="function"==typeof requestAnimationFrame;function Pi(e){var t,n=function(){clearTimeout(i),Ci&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);Ci&&(t=requestAnimationFrame(n))}function Mi(e){var t=mi,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),mi=t}function ki(e){var t=mi;e.__c=e.__(),mi=t}function Ai(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function Li(e,t){return"function"==typeof t?t(e):t}const ji=({size:e="15",isTeaser:t=!1,isTeaserIconOnly:n=!1,onDismiss:i})=>{const o=Object.assign({position:"absolute",border:"none",cursor:"pointer",outline:"none",zIndex:3,color:"black",display:"grid",placeItems:"center",background:"none"},n?{border:"1px solid rgba(227, 227, 227, 1)",borderRadius:"100%",background:"rgba(255, 255, 255, 1)",padding:"4px"}:{});return pi("button",Object.assign({className:"pushowl-optin-dismiss-button",onClick:i,type:"button",style:Object.assign(Object.assign(Object.assign({},o),t?{right:"8px",top:"50%",transform:"translateY(-50%) scale(1.5)"}:{right:"8px",top:"8px",backgroundColor:"#ffffffaf",padding:"3px",borderRadius:"50%",filter:"invert(0.1)"}),n?{right:-4,top:-4,transform:"none"}:{})},{children:pi("svg",Object.assign({width:e,height:e,viewBox:"0 0 24 24"},{children:[pi("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),pi("path",{fill:"none",d:"M0 0h24v24H0z"})]}))}))},Di=()=>pi("a",Object.assign({style:{zIndex:1e3,margin:"0 auto",display:"flex",gap:"6px",alignItems:"center",justifyContent:"center",borderRadius:"0 0 6px 6px",background:"rgba(48, 48, 48, 1)",width:"150px",color:"#fff",fontSize:"13px",padding:"4px",textDecoration:"none",cursor:"pointer",outline:"none",border:"none"},href:"https://www.pushowl.com?utm_source=optin_background_image_redirect&utm_medium=storefront",target:"_blank",rel:"noopener"},{children:[pi("span",{children:"Powered by"}),pi("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSI+PG1hc2sgaWQ9ImEiIHdpZHRoPSI2MiIgaGVpZ2h0PSIxNiIgeD0iMCIgeT0iMCIgbWFza1VuaXRzPSJ1c2VyU3BhY2VPblVzZSIgc3R5bGU9Im1hc2stdHlwZTpsdW1pbmFuY2UiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik02MS44NyAwSDB2MTUuNzg2aDYxLjg3eiIvPjwvbWFzaz48ZyBmaWxsPSIjZmZmIiBtYXNrPSJ1cmwoI2EpIj48cGF0aCBkPSJNNi40MiAwYzEuNTU3IDAgMi43MTcuNjU4IDMuNzA1IDEuNDMyLjQ2LjM2LjgzNy43OTQgMS4xNzEgMS4yNy4wNDcuMDY2LjA1OS4xMi4wMTYuMTg2LS4zMzUuNTYxLS41MTQgMS4xNzctLjY1NCAxLjgwNy0uMDA0LjAyNC0uMDE1LjA0Ny0uMDIzLjA2NiAwIC4wMDQtLjAxMi4wMDgtLjAyLjAwOC0uODEzLTIuNTY2LTMuNDE2LTMuNjM1LTUuNTQtMy4wOTMtMi4yMTkuNTY1LTMuNTc3IDIuNDItMy41MjIgNC41NzYuMDU4IDIuMzQ1IDEuNzI3IDQuMTEgMy45MDMgNC40NCAyLjM0Ni4zNTIgNC40Mi0uOTcyIDUuMTUyLTMuMTQ3LjA1LjA0Ni4wNTQuMTA4LjA2Ni4xNjYuMjQxIDEuMTUuNzY2IDIuMTU2IDEuNTIxIDMuMDU0YTcuMSA3LjEgMCAwIDAgMi40MzYgMS44NjJjLjA4Mi4wMzkuMjA2LjA3LjIzNC4xMzYuMDMuMDc3LS4wODYuMTQ3LS4xMzcuMjItLjY4NC45Ni0xLjUwNSAxLjc4OS0yLjQyNCAyLjUyOC0uMDkuMDc0LS4xODMuMTQzLS4yNzIuMjI1LS4wNjMuMDU4LS4xMTMuMDYxLS4xODcuMDA3YTEzLjQgMTMuNCAwIDAgMS0yLjEyNS0yLjAxNyAxMS40IDExLjQgMCAwIDEtMS4yNDUtMS43NjljLS4wMzktLjA3LS4wNzgtLjA4OS0uMTU1LS4wNTgtLjg2NC4zNTctMS43NzUuNDM0LTIuNjkzLjM4LS43NTUtLjA0Ny0xLjQ3MS0uMjY3LTIuMTQ4LS41OTZBNi4wOCA2LjA4IDAgMCAxIC42MSA4LjgzMyA1LjggNS44IDAgMCAxIDAgNi4wODljLjAxNS0uNi4wNy0xLjE4OC4yNjQtMS43NjEuMTItLjM2LjI2NC0uNzA5LjM1NC0xLjA3NkMuODk5IDIuMTQ1LjcxNiAxLjExNS4wOTcuMTU1QTMgMyAwIDAgMSAuMDA3IDB6Ii8+PHBhdGggZD0iTTIzLjg4OCAwYy0uMTc1LjMxLS4zNzMuNi0uNDk4LjkzN2EzLjkzIDMuOTMgMCAwIDAtLjAzMSAyLjY1MWMuMTQ4LjQzOC4zMy44NjQuNDEyIDEuMzI0LjEzMy43NDcuMTgzIDEuNDk0LjA0NyAyLjI0NS0uMjM3IDEuMzEzLS44MiAyLjQ0Ny0xLjc4MiAzLjM3Ni0uOTk2Ljk2NC0yLjE5IDEuNTUyLTMuNTc2IDEuNzIzLTEuMzI3LjE2Mi0yLjU5Mi0uMDctMy43NTktLjczNi0xLjYzLS45MjktMi42NTgtMi4zLTMuMDQ3LTQuMTM0YTUuOSA1LjkgMCAwIDEtLjEyLTEuNzg5Yy4wNjYtLjY3LjIyNS0xLjMxNi41MDUtMS45MjcuNTg0LTEuMjcgMS41MDItMi4yMzQgMi43Mi0yLjkxOUMxNS41MTEuMzI5IDE2LjU4MiAwIDE3LjU3MyAwek0xMy4wOTQgNi4xNTljMCAyLjYwMSAyLjEwOSA0LjcgNC44NDUgNC41ODcgMi40MDQtLjEgNC40ODYtMi4wMzIgNC40MTItNC43NjUtLjA2Mi0yLjM0Mi0xLjk3Ny00LjQ3MS00LjcyLTQuNDMzLTIuNDA5LjAzNS00LjUzNyAxLjkyNC00LjUzNyA0LjYxWm0tNS43NC42MTVjLS4xNC4wMi0uMjY0LjAwOC0uMzkzLjAwOC0uMDc0IDAtLjExMi0uMDE2LS4xMjQtLjEwNS0uMDM5LS4zMDItLjM2Mi0uNTU3LS42NzMtLjU1M2EuNjcuNjcgMCAwIDAtLjY0Mi41NjljLS4wMDguMDYyLS4wMjguMDg1LS4wOS4wODVINC42MnEtLjA5Mi4wMDItLjA3OC0uMDg5YTEuNjYgMS42NiAwIDAgMSAxLjMwNy0xLjQ4NmMuODE0LS4xODYgMS44MjIuMzkgMS45MzggMS4zNDcuMDI4LjIyOC4wMzEuMjI4LS4yMDYuMjI4aC0uMjN6Ii8+PHBhdGggZD0iTTE4Ljg2NSA2Ljc3NGgtLjQwMWMtLjA1OCAwLS4wODItLjAxNS0uMDktLjA4MS0uMDMtLjMwMi0uMzE5LS41NTgtLjYzOC0uNTdhLjY1LjY1IDAgMCAwLS42NzMuNTQzYy0uMDE2LjA5Ny0uMDQ3LjExNi0uMTM2LjExNmEyMyAyMyAwIDAgMC0uNzI4IDBjLS4wOSAwLS4xMTctLjAzMS0uMTA5LS4xMi4wNTktLjY0My40MDUtMS4wOTYuOTgtMS4zNTEuNTgtLjI2IDEuMTQ1LS4xNzQgMS42NTQuMjE3LjM4Ni4yOTQuNTczLjY5Ni42MzUgMS4xNjUuMDA4LjA2Ni0uMDEyLjA4NS0uMDc0LjA4NWgtLjQxM3ptMTAuOTc2LTEuOTZxLjIyMy0uMzEzLjYxMS0uNTE4LjM5Ny0uMjE0LjkwMS0uMjE0YTEuOTkgMS45OSAwIDAgMSAxLjgxIDEuMTFxLjI4LjUyNi4yOCAxLjIyNCAwIC42OTktLjI4IDEuMjQyYTIuMDQgMi4wNCAwIDAgMS0uNzUyLjgzIDEuOTUgMS45NSAwIDAgMS0xLjA1OC4yOTYgMS45IDEuOSAwIDAgMS0uODkyLS4yMDYgMS45IDEuOSAwIDAgMS0uNjItLjUxOHYyLjgyaC0xLjE1N1Y0LjE1NmgxLjE1N3ptMi40MiAxLjYwMnEwLS40MTEtLjE3Mi0uNzA3YTEuMTMgMS4xMyAwIDAgMC0uNDQ3LS40NiAxLjE4IDEuMTggMCAwIDAtMS4xOS4wMDggMS4yIDEuMiAwIDAgMC0uNDQ2LjQ2cS0uMTY1LjMwNS0uMTY1LjcxNiAwIC40MS4xNjUuNzE1LjE3NC4zMDUuNDQ2LjQ2OGExLjIgMS4yIDAgMCAwIC41OTUuMTU3IDEuMTkgMS4xOSAwIDAgMCAxLjA0MS0uNjMzcS4xNzQtLjMwNC4xNzQtLjcyNFptNi4xMjEtMi4yNlY4LjcxaC0xLjE2NXYtLjU3NmExLjU1IDEuNTUgMCAwIDEtLjU4Ni40NjlxLS4zNTYuMTY0LS43NzcuMTY0LS41MzcgMC0uOTUtLjIyMmExLjY2IDEuNjYgMCAwIDEtLjY1My0uNjY2cS0uMjMxLS40NDMtLjIzMS0xLjA1MlY0LjE1NmgxLjE1N3YyLjUwN3EwIC41NDMuMjcyLjgzOC4yNzMuMjg4Ljc0NC4yODguNDggMCAuNzUyLS4yODguMjcyLS4yOTUuMjcyLS44MzhWNC4xNTZ6bTIuNjcgNC42MjhxLS41NjEgMC0xLjAwOC0uMTk4YTEuODUgMS44NSAwIDAgMS0uNzEtLjU1IDEuNCAxLjQgMCAwIDEtLjI4MS0uNzY1aDEuMTY1cS4wMzMuMjYzLjI1Ni40MzZhLjkzLjkzIDAgMCAwIC41Ny4xNzJxLjMzIDAgLjUxMi0uMTMxLjE5LS4xMzIuMTktLjMzNyAwLS4yMjItLjIzLS4zMjktLjIyNS0uMTE1LS43Mi0uMjQ2YTYgNiAwIDAgMS0uODQzLS4yNTUgMS41IDEuNSAwIDAgMS0uNTYxLS40MDNxLS4yMzItLjI3LS4yMzItLjczMiAwLS4zNzguMjE1LS42OS4yMjMtLjMxMi42MjgtLjQ5My40MTQtLjE4Ljk2Ny0uMTgxLjgxOCAwIDEuMzA1LjQxMS40ODcuNDAyLjUzOCAxLjA5M2gtMS4xMDhhLjU4LjU4IDAgMCAwLS4yMzEtLjQyN3EtLjE5OC0uMTY1LS41MzctLjE2NS0uMzE1IDAtLjQ4OC4xMTVhLjM3LjM3IDAgMCAwLS4xNjUuMzIxcTAgLjIzLjIzMS4zNTMuMjMxLjExNi43Mi4yMzkuNDk1LjEyMy44MTcuMjU1LjMyMy4xMy41NTQuNDEuMjQuMjcyLjI0OC43MjQgMCAuMzk1LS4yMjMuNzA3YTEuNDQgMS40NCAwIDAgMS0uNjI4LjQ5M3EtLjQwNS4xNzMtLjk1LjE3M1ptNS4xMDYtNC42OTRxLjUyMSAwIC45MjUuMjMuNDA1LjIyMi42MjkuNjY2LjIzLjQzNS4yMyAxLjA1MlY4LjcxaC0xLjE1NlY2LjE5NHEwLS41NDItLjI3My0uODMtLjI3Mi0uMjk2LS43NDMtLjI5Ni0uNDggMC0uNzYuMjk2LS4yNzMuMjg4LS4yNzMuODNWOC43MUg0My41OFYyLjYyN2gxLjE1N3YyLjA5NmExLjUgMS41IDAgMCAxIC41OTUtLjQ2cS4zNzItLjE3My44MjYtLjE3M200LjY5NCA0LjY5NGEyLjQ1IDIuNDUgMCAwIDEtMS4xOS0uMjg4IDIuMTcgMi4xNyAwIDAgMS0uODM0LS44MyAyLjUgMi41IDAgMCAxLS4yOTctMS4yMzNxMC0uNjk5LjMwNS0xLjIzMy4zMTUtLjUzNC44NTEtLjgyMmEyLjQ0IDIuNDQgMCAwIDEgMS4xOTgtLjI5NnEuNjYxIDAgMS4xOTkuMjk2LjUzNy4yODguODQyLjgyMi4zMTUuNTM0LjMxNCAxLjIzMyAwIC42OTktLjMyMiAxLjIzM2EyLjIgMi4yIDAgMCAxLS44Ni44M3EtLjUzNi4yODgtMS4yMDYuMjg4bTAtMS4wMDNxLjMxNCAwIC41ODctLjE0OGExLjEzIDEuMTMgMCAwIDAgLjQ0Ni0uNDZxLjE2NS0uMzA1LjE2NS0uNzQgMC0uNjUtLjM0Ny0uOTk1YTEuMSAxLjEgMCAwIDAtLjgzNC0uMzUzcS0uNDk1IDAtLjgzNS4zNTMtLjMzLjM0NS0uMzMuOTk1dC4zMjIgMS4wMDNxLjMzLjM0NS44MjYuMzQ1bTkuMzYtMy42MjVMNTguODczIDguNzFoLTEuMjQ4bC0uODM0LTMuMTgxLS44MzUgMy4xOEg1NC43bC0xLjM0Ny00LjU1M2gxLjE3NGwuODEgMy40NjkuODc1LTMuNDdoMS4yMjNsLjg2IDMuNDYxLjgxLTMuNDZ6bTEuNTU5LTEuNTI5VjguNzFoLTEuMTU3VjIuNjI3eiIvPjwvZz48L3N2Zz4=",alt:"PushOwl",style:{marginTop:"3px"}})]})),Ri=({node:e,children:t,isSmallScreen:n,rootNodeAttr:i})=>{const o=Bt(e,n,i),{redirectURL:r}=e.attr||{};return r?pi("a",Object.assign({style:Object.assign({},o),onClick:()=>{const e=new URL(r);e.searchParams.append("utm_source","optin_banner_redirect_url"),e.searchParams.append("utm_medium","storefront"),window.open(e,"_blank")}},{children:t})):pi("div",Object.assign({style:Object.assign({},o)},{children:t}))},Ui=({node:e,theme:t})=>{var n,i,o,r,s,a,l;const c=Rt((null===(n=e.attr)||void 0===n?void 0:n.radius)||"md"),d=Dt((null===(i=e.attr)||void 0===i?void 0:i.borderCol)||"#ffffff",(null===(o=e.attr)||void 0===o?void 0:o.borderWidth)||"0"),u=Gt((null===(r=e.attr)||void 0===r?void 0:r.bgColor)||"#000000");return pi("button",Object.assign({type:"submit"===e.id?"submit":"button",className:"pushowl-optin-button",name:e.id,style:Object.assign(Object.assign({background:null===(s=e.attr)||void 0===s?void 0:s.bgColor,color:null===(a=e.attr)||void 0===a?void 0:a.color},d),window.pushowlOptinStyles?{}:{borderRadius:c})},{children:[pi("div",Object.assign({className:"button-content"},{children:e.children})),pi("div",Object.assign({className:"button-loader",style:{"--color":u?"#fff":"#000","--bg-color":(null===(l=e.attr)||void 0===l?void 0:l.bgColor)||"#000"}},{children:" "}))]}))},Bi=({node:e,theme:t})=>{var n,i,o;const{css:r,label:s,showLabel:a,required:l,inputType:c,defaultOption:d,orientation:u}=e.attr||{},p=Lt(),h="minimal"===(null===(n=null==e?void 0:e.attr)||void 0===n?void 0:n.style)?"0":Rt((null===(i=e.attr)||void 0===i?void 0:i.radius)||"sm"),[m,g]=Ti(d),b=e=>{g(e.target.value)};return pi("div",Object.assign({style:{display:"flex",flexDirection:"column",padding:"5px 0",gap:"5px",width:"100%"}},{children:pi(Gn,"dropdown"===c?{children:[a&&pi("label",Object.assign({htmlFor:e.id,style:Object.assign(Object.assign(Object.assign({},p),{overflow:"hidden",display:"inline-block",width:"100%",marginBottom:"4px",color:"#000"}),r)},{children:s})),pi("select",Object.assign({style:{padding:"6px",borderRadius:h,backgroundColor:(null===(o=e.attr)||void 0===o?void 0:o.bgColor)||"white",border:"none",boxShadow:"0 0 0 1px #20202033"},required:l,id:e.id,name:e.id},{children:e.children.map(((e,t)=>pi("option",Object.assign({value:e},{children:e}),t)))}))]}:{children:[a&&pi("p",Object.assign({style:Object.assign(Object.assign({color:"#000"},p),{marginBottom:"4px"})},{children:s})),pi("div",Object.assign({style:Object.assign(Object.assign({display:"flex"},"horizontal"===u?{flexDirection:"row",gap:"8px"}:{flexDirection:"column"}),{flexWrap:"wrap"})},{children:e.children.map(((t,n)=>pi("div",Object.assign({style:{display:"flex",alignItems:"vertical"===u?"center":"flex-start"}},{children:[pi("input",{tabIndex:-1,type:"radio",id:`${t}-${n}`,style:{marginLeft:"0",marginRight:"vertical"===u?"8px":"4px"},name:e.id,value:t,required:l,checked:t===m,onChange:b}),pi("label",Object.assign({htmlFor:`${t}-${n}`,style:Object.assign(Object.assign({},p),r||{})},{children:t}))]}),n)))}))]})}))},zi=({node:e,theme:t})=>{const n=Oi(null),{color:i,css:o,size:r,hidden:s}=e.attr||{};if(s)return null;const a=Lt(r);return pi("div",Object.assign({style:{display:"flex",alignItems:"flex-start",padding:"6px 0"}},{children:[pi("input",{ref:n,required:!0,type:"checkbox",id:e.id,name:e.id,style:{marginLeft:"0",marginRight:"0"}}),pi("label",Object.assign({htmlFor:e.id,style:Object.assign(Object.assign({color:i||"#000",paddingLeft:"5px"},a),o||{}),onClick:e=>{e.preventDefault(),n.current&&n.current.click()}},{children:e.children}))]}))},Fi=({node:e,theme:t,rootNodeAttr:n})=>{var i,o,r,s,a,l,c,d,u,p,h,m,g,b;const f=(null===(i=e.attr)||void 0===i?void 0:i.dateFormat)||"MM/DD/YYYY",_="transparent"===(null===(o=e.attr)||void 0===o?void 0:o.bgColor)&&(null===(r=e.attr)||void 0===r?void 0:r.color)||"black",w=Gt((null==n?void 0:n.bgColor)||"white"),v="minimal"===(null===(s=null==e?void 0:e.attr)||void 0===s?void 0:s.style)?"0":Rt((null===(a=e.attr)||void 0===a?void 0:a.radius)||"sm"),y="minimal"!==(null===(l=e.attr)||void 0===l?void 0:l.style)&&Boolean(null===(c=e.children)||void 0===c?void 0:c.trim())&&(null===(d=e.attr)||void 0===d?void 0:d.showLabel);return pi("div",Object.assign({style:{display:"flex",flexDirection:"column",width:"100%",padding:"5px 0 0 0",gap:"5px"}},{children:[y&&pi("label",Object.assign({htmlFor:e.id,style:{color:null===(u=e.attr)||void 0===u?void 0:u.color,fontSize:"14px",textOverflow:"ellipsis",overflow:"hidden",display:"inline-block",width:"100%"}},{children:e.children})),pi("input",{className:"tree-rendered-text-input",onInput:e=>{try{new RegExp(Yt(f)).test(e.target.value)&&e.target.setCustomValidity("")}catch(e){}const{cursorPosition:t,formattedValue:n}=((e,t,n)=>{const i=[31,28,31,30,31,30,31,31,30,31,30,31];let o="",r=t.replace(/\D/g,"");const s=(e,t,n,i=!1)=>(e.length===(i?4:2)||!i&&1===e.length&&parseInt(e)>Math.floor(n/10)?(e=Math.min(parseInt(e),n).toString().padStart(i?4:2,"0"),o+=e+(t<2?"/":"")):e.length>0&&(o+=e),e.length),a=(e,t)=>2===e&&(e=>e%4==0&&e%100!=0||e%400==0)(t)?29:i[e-1];let l=[0,0,0];if("MM/DD/YYYY"===e){let e=r.slice(0,2),t=r.slice(2,4),n=r.slice(4,8);l[0]=s(e,0,12),2===e.length?l[1]=s(t,1,a(parseInt(e),parseInt(n)||(new Date).getFullYear())):(o+=t,l[1]=t.length),o+=n,l[2]=n.length}else if("DD/MM/YYYY"===e){let e=r.slice(0,2),t=r.slice(2,4),n=r.slice(4,8);if(l[0]=s(e,0,31),l[1]=s(t,1,12),2===e.length&&2===t.length){let i=a(parseInt(t),parseInt(n)||(new Date).getFullYear());parseInt(e)>i&&(e=i.toString(),o=e+"/"+o.split("/")[1]+"/",l[0]=2)}o+=n,l[2]=n.length}else if("YYYY/MM/DD"===e){let e=r.slice(0,4),t=r.slice(4,6),n=r.slice(6,8);if(l[0]=s(e,0,9999,!0),l[1]=s(t,1,12),4===e.length&&2===t.length){let i=a(parseInt(t),parseInt(e));l[2]=s(n,2,i)}else o+=n,l[2]=n.length}let c=n;for(let e=0;e<3;e++){if(n>r.length-l[2]-l[1]){c=o.length;break}if(n>r.length-l[2]-l[1]-l[0]){c=o.length-l[2];break}if(n>0){c=o.length-l[2]-l[1];break}}return{formattedValue:o,cursorPosition:c}})(f,e.target.value,e.target.selectionStart);e.target.value=n,e.target.setSelectionRange(t,t)},id:e.id,onKeyDown:e=>{if("Backspace"===e.key){const t=e.target.value,n=e.target.selectionStart;n>0&&"/"===t[n-1]&&(e.target.value=t.slice(0,n-1)+t.slice(n),e.target.setSelectionRange(n-1,n-1))}},name:e.id,type:"text",required:null===(p=e.attr)||void 0===p?void 0:p.required,title:`Please enter a date in the format ${f}`,onInvalid:e=>e.target.setCustomValidity(`Please enter a date in the format ${f}`),placeholder:e.attr.placeholder||f,pattern:Yt(f),style:Object.assign({borderRadius:v,"--accent-color":(null==t?void 0:t.accent)||Mt,"--input-content-color":_,"--input-content-bg-color":(null===(h=null==e?void 0:e.attr)||void 0===h?void 0:h.bgColor)||"white","--input-content-bg-mix-color":w?"white":"black","--input-content-bg-mix-opacity":w?"8%":"3%","--input-border-style":"minimal"===(null===(m=e.attr)||void 0===m?void 0:m.style)?"0 1.5px #20202033":"0 0 0 1px #20202033","--input-border-style-active":"minimal"===(null===(g=e.attr)||void 0===g?void 0:g.style)?`0 2px ${(null==t?void 0:t.accent)||Mt}`:`0 0 0 2px ${(null==t?void 0:t.accent)||Mt}`},(null===(b=e.attr)||void 0===b?void 0:b.css)||{})})]}))},Hi="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cmVjdCB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHg9IjgiIHk9IjgiIHJ4PSIyIiByeT0iMiIvPjxwYXRoIGQ9Ik00IDE2Yy0xLjEgMC0yLS45LTItMlY0YzAtMS4xLjktMiAyLTJoMTBjMS4xIDAgMiAuOSAyIDIiLz48L3N2Zz4=",Yi="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgNkw5IDE3bC01LTUiLz48L3N2Zz4=",Gi=({node:e,theme:t,shadowRef:n})=>{var i,o,r,s;const a=(null===(i=e.attr)||void 0===i?void 0:i.code)||(null===(r=null===(o=null==n?void 0:n.querySelector(".pushowl-optin-container"))||void 0===o?void 0:o.dataset)||void 0===r?void 0:r.discount);if((null===(s=e.attr)||void 0===s?void 0:s.hidden)||!(null==a?void 0:a.trim()))return null;return pi("div",Object.assign({style:{padding:"15px 0px",overflow:"hidden"}},{children:pi("button",Object.assign({type:"button",title:"Copy to clipboard",id:e.id,style:{fontFamily:"monospace",padding:"10px",cursor:"pointer",background:"none",backgroundColor:"rgba(235, 255, 249, 1)",fontSize:"20px",fontWeight:600,display:"flex",alignItems:"center",gap:"5px",justifyContent:"center",border:"1.5px dashed rgba(41, 130, 103, 1)",borderRadius:"4px"},onClick:e=>{const t=e.currentTarget,n=null==t?void 0:t.querySelector("img");n&&(navigator.clipboard.writeText(a),n.src!==Yi&&(n.src=Yi,setTimeout((()=>{n.src=Hi}),1e3)))}},{children:[pi("span",Object.assign({style:{width:"12ch",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},{children:a})),pi("img",{src:Hi,alt:"copy",width:16,height:16})]}))}))},$i=({node:e,theme:t})=>{const{url:n,hidden:i}=e.attr;if(i||!n)return null;const o=(e=>{const{height:t}=e.attr;return t||(e.id===Ot?24:50)})(e);return pi("img",{src:n,alt:"logo",height:`${o}px`,style:{margin:"0px 0px 8px 0px",objectFit:"contain"}})},Vi=[{value:"Afghanistan",label:"🇦🇫",codePoint:"af",code:"+93"},{value:"Albania",label:"🇦🇱",codePoint:"al",code:"+355"},{value:"Algeria",label:"🇩🇿",codePoint:"dz",code:"+213"},{value:"Andorra",label:"🇦🇩",codePoint:"ad",code:"+376"},{value:"Angola",label:"🇦🇴",codePoint:"ao",code:"+244"},{value:"Antigua and Barbuda",label:"🇦🇬",codePoint:"ag",code:"+1268"},{value:"Argentina",label:"🇦🇷",codePoint:"ar",code:"+54"},{value:"Armenia",label:"🇦🇲",codePoint:"am",code:"+374"},{value:"Aruba",label:"🇦🇼",codePoint:"aw",code:"+297"},{value:"Australia",label:"🇦🇺",codePoint:"au",code:"+61"},{value:"Austria",label:"🇦🇹",codePoint:"at",code:"+43"},{value:"Azerbaijan",label:"🇦🇿",codePoint:"az",code:"+994"},{value:"Bahamas",label:"🇧🇸",codePoint:"bs",code:"+1242"},{value:"Bahrain",label:"🇧🇭",codePoint:"bh",code:"+973"},{value:"Bangladesh",label:"🇧🇩",codePoint:"bd",code:"+880"},{value:"Barbados",label:"🇧🇧",codePoint:"bb",code:"+1246"},{value:"Belarus",label:"🇧🇾",codePoint:"by",code:"+375"},{value:"Belgium",label:"🇧🇪",codePoint:"be",code:"+32"},{value:"Belize",label:"🇧🇿",codePoint:"bz",code:"+501"},{value:"Benin",label:"🇧🇯",codePoint:"bj",code:"+229"},{value:"Bhutan",label:"🇧🇹",codePoint:"bt",code:"+975"},{value:"Bolivia",label:"🇧🇴",codePoint:"bo",code:"+591"},{value:"Bosnia and Herzegovina",label:"🇧🇦",codePoint:"ba",code:"+387"},{value:"Botswana",label:"🇧🇼",codePoint:"bw",code:"+267"},{value:"Brazil",label:"🇧🇷",codePoint:"br",code:"+55"},{value:"British Indian Ocean Territory",label:"🇮🇴",codePoint:"io",code:"+246"},{value:"Brunei",label:"🇧🇳",codePoint:"bn",code:"+673"},{value:"Bulgaria",label:"🇧🇬",codePoint:"bg",code:"+359"},{value:"Burkina Faso",label:"🇧🇫",codePoint:"bf",code:"+226"},{value:"Burundi",label:"🇧🇮",codePoint:"bi",code:"+257"},{value:"Cambodia",label:"🇰🇭",codePoint:"kh",code:"+855"},{value:"Cameroon",label:"🇨🇲",codePoint:"cm",code:"+237"},{value:"Canada",label:"🇨🇦",codePoint:"ca",code:"+1"},{value:"Cape Verde",label:"🇨🇻",codePoint:"cv",code:"+238"},{value:"Caribbean Netherlands",label:"🇧🇶",codePoint:"bq",code:"+599"},{value:"Cayman Islands",label:"🇰🇾",codePoint:"ky",code:"+1"},{value:"Central African Republic",label:"🇨🇫",codePoint:"cf",code:"+236"},{value:"Chad",label:"🇹🇩",codePoint:"td",code:"+235"},{value:"Chile",label:"🇨🇱",codePoint:"cl",code:"+56"},{value:"China",label:"🇨🇳",codePoint:"cn",code:"+86"},{value:"Colombia",label:"🇨🇴",codePoint:"co",code:"+57"},{value:"Comoros",label:"🇰🇲",codePoint:"km",code:"+269"},{value:"Congo",label:"🇨🇩",codePoint:"cd",code:"+243"},{value:"Congo",label:"🇨🇬",codePoint:"cg",code:"+242"},{value:"Costa Rica",label:"🇨🇷",codePoint:"cr",code:"+506"},{value:"Côte d'Ivoire",label:"🇨🇮",codePoint:"ci",code:"+225"},{value:"Croatia",label:"🇭🇷",codePoint:"hr",code:"+385"},{value:"Cuba",label:"🇨🇺",codePoint:"cu",code:"+53"},{value:"Curaçao",label:"🇨🇼",codePoint:"cw",code:"+599"},{value:"Cyprus",label:"🇨🇾",codePoint:"cy",code:"+357"},{value:"Czech Republic",label:"🇨🇿",codePoint:"cz",code:"+420"},{value:"Denmark",label:"🇩🇰",codePoint:"dk",code:"+45"},{value:"Djibouti",label:"🇩🇯",codePoint:"dj",code:"+253"},{value:"Dominica",label:"🇩🇲",codePoint:"dm",code:"+1767"},{value:"Dominican Republic",label:"🇩🇴",codePoint:"do",code:"+1"},{value:"Ecuador",label:"🇪🇨",codePoint:"ec",code:"+593"},{value:"Egypt",label:"🇪🇬",codePoint:"eg",code:"+20"},{value:"El Salvador",label:"🇸🇻",codePoint:"sv",code:"+503"},{value:"Equatorial Guinea",label:"🇬🇶",codePoint:"gq",code:"+240"},{value:"Eritrea",label:"🇪🇷",codePoint:"er",code:"+291"},{value:"Estonia",label:"🇪🇪",codePoint:"ee",code:"+372"},{value:"Ethiopia",label:"🇪🇹",codePoint:"et",code:"+251"},{value:"Fiji",label:"🇫🇯",codePoint:"fj",code:"+679"},{value:"Finland",label:"🇫🇮",codePoint:"fi",code:"+358"},{value:"France",label:"🇫🇷",codePoint:"fr",code:"+33"},{value:"French Guiana",label:"🇬🇫",codePoint:"gf",code:"+594"},{value:"French Polynesia",label:"🇵🇫",codePoint:"pf",code:"+689"},{value:"Gabon",label:"🇬🇦",codePoint:"ga",code:"+241"},{value:"Gambia",label:"🇬🇲",codePoint:"gm",code:"+220"},{value:"Georgia",label:"🇬🇪",codePoint:"ge",code:"+995"},{value:"Germany",label:"🇩🇪",codePoint:"de",code:"+49"},{value:"Ghana",label:"🇬🇭",codePoint:"gh",code:"+233"},{value:"Greece",label:"🇬🇷",codePoint:"gr",code:"+30"},{value:"Greenland",label:"🇬🇱",codePoint:"gl",code:"+299"},{value:"Grenada",label:"🇬🇩",codePoint:"gd",code:"+1473"},{value:"Guadeloupe",label:"🇬🇵",codePoint:"gp",code:"+590"},{value:"Guam",label:"🇬🇺",codePoint:"gu",code:"+1671"},{value:"Guatemala",label:"🇬🇹",codePoint:"gt",code:"+502"},{value:"Guinea",label:"🇬🇳",codePoint:"gn",code:"+224"},{value:"Guinea-Bissau",label:"🇬🇼",codePoint:"gw",code:"+245"},{value:"Guyana",label:"🇬🇾",codePoint:"gy",code:"+592"},{value:"Haiti",label:"🇭🇹",codePoint:"ht",code:"+509"},{value:"Honduras",label:"🇭🇳",codePoint:"hn",code:"+504"},{value:"Hong Kong",label:"🇭🇰",codePoint:"hk",code:"+852"},{value:"Hungary",label:"🇭🇺",codePoint:"hu",code:"+36"},{value:"Iceland",label:"🇮🇸",codePoint:"is",code:"+354"},{value:"India",label:"🇮🇳",codePoint:"in",code:"+91"},{value:"Indonesia",label:"🇮🇩",codePoint:"id",code:"+62"},{value:"Iran",label:"🇮🇷",codePoint:"ir",code:"+98"},{value:"Iraq",label:"🇮🇶",codePoint:"iq",code:"+964"},{value:"Ireland",label:"🇮🇪",codePoint:"ie",code:"+353"},{value:"Israel",label:"🇮🇱",codePoint:"il",code:"+972"},{value:"Italy",label:"🇮🇹",codePoint:"it",code:"+39"},{value:"Jamaica",label:"🇯🇲",codePoint:"jm",code:"+1876"},{value:"Japan",label:"🇯🇵",codePoint:"jp",code:"+81"},{value:"Jordan",label:"🇯🇴",codePoint:"jo",code:"+962"},{value:"Kazakhstan",label:"🇰🇿",codePoint:"kz",code:"+7"},{value:"Kenya",label:"🇰🇪",codePoint:"ke",code:"+254"},{value:"Kiribati",label:"🇰🇮",codePoint:"ki",code:"+686"},{value:"Kosovo",label:"🇽🇰",codePoint:"xk",code:"+383"},{value:"Kuwait",label:"🇰🇼",codePoint:"kw",code:"+965"},{value:"Kyrgyzstan",label:"🇰🇬",codePoint:"kg",code:"+996"},{value:"Laos",label:"🇱🇦",codePoint:"la",code:"+856"},{value:"Latvia",label:"🇱🇻",codePoint:"lv",code:"+371"},{value:"Lebanon",label:"🇱🇧",codePoint:"lb",code:"+961"},{value:"Lesotho",label:"🇱🇸",codePoint:"ls",code:"+266"},{value:"Liberia",label:"🇱🇷",codePoint:"lr",code:"+231"},{value:"Libya",label:"🇱🇾",codePoint:"ly",code:"+218"},{value:"Liechtenstein",label:"🇱🇮",codePoint:"li",code:"+423"},{value:"Lithuania",label:"🇱🇹",codePoint:"lt",code:"+370"},{value:"Luxembourg",label:"🇱🇺",codePoint:"lu",code:"+352"},{value:"Macau",label:"🇲🇴",codePoint:"mo",code:"+853"},{value:"Macedonia",label:"🇲🇰",codePoint:"mk",code:"+389"},{value:"Madagascar",label:"🇲🇬",codePoint:"mg",code:"+261"},{value:"Malawi",label:"🇲🇼",codePoint:"mw",code:"+265"},{value:"Malaysia",label:"🇲🇾",codePoint:"my",code:"+60"},{value:"Maldives",label:"🇲🇻",codePoint:"mv",code:"+960"},{value:"Mali",label:"🇲🇱",codePoint:"ml",code:"+223"},{value:"Malta",label:"🇲🇹",codePoint:"mt",code:"+356"},{value:"Marshall Islands",label:"🇲🇭",codePoint:"mh",code:"+692"},{value:"Martinique",label:"🇲🇶",codePoint:"mq",code:"+596"},{value:"Mauritania",label:"🇲🇷",codePoint:"mr",code:"+222"},{value:"Mauritius",label:"🇲🇺",codePoint:"mu",code:"+230"},{value:"Mexico",label:"🇲🇽",codePoint:"mx",code:"+52"},{value:"Micronesia",label:"🇫🇲",codePoint:"fm",code:"+691"},{value:"Moldova",label:"🇲🇩",codePoint:"md",code:"+373"},{value:"Monaco",label:"🇲🇨",codePoint:"mc",code:"+377"},{value:"Mongolia",label:"🇲🇳",codePoint:"mn",code:"+976"},{value:"Montenegro",label:"🇲🇪",codePoint:"me",code:"+382"},{value:"Morocco",label:"🇲🇦",codePoint:"ma",code:"+212"},{value:"Mozambique",label:"🇲🇿",codePoint:"mz",code:"+258"},{value:"Myanmar",label:"🇲🇲",codePoint:"mm",code:"+95"},{value:"Namibia",label:"🇳🇦",codePoint:"na",code:"+264"},{value:"Nauru",label:"🇳🇷",codePoint:"nr",code:"+674"},{value:"Nepal",label:"🇳🇵",codePoint:"np",code:"+977"},{value:"Netherlands",label:"🇳🇱",codePoint:"nl",code:"+31"},{value:"New Caledonia",label:"🇳🇨",codePoint:"nc",code:"+687"},{value:"New Zealand",label:"🇳🇿",codePoint:"nz",code:"+64"},{value:"Nicaragua",label:"🇳🇮",codePoint:"ni",code:"+505"},{value:"Niger",label:"🇳🇪",codePoint:"ne",code:"+227"},{value:"Nigeria",label:"🇳🇬",codePoint:"ng",code:"+234"},{value:"North Korea",label:"🇰🇵",codePoint:"kp",code:"+850"},{value:"Norway",label:"🇳🇴",codePoint:"no",code:"+47"},{value:"Oman",label:"🇴🇲",codePoint:"om",code:"+968"},{value:"Pakistan",label:"🇵🇰",codePoint:"pk",code:"+92"},{value:"Palau",label:"🇵🇼",codePoint:"pw",code:"+680"},{value:"Palestine",label:"🇵🇸",codePoint:"ps",code:"+970"},{value:"Panama",label:"🇵🇦",codePoint:"pa",code:"+507"},{value:"Papua New Guinea",label:"🇵🇬",codePoint:"pg",code:"+675"},{value:"Paraguay",label:"🇵🇾",codePoint:"py",code:"+595"},{value:"Peru",label:"🇵🇪",codePoint:"pe",code:"+51"},{value:"Philippines",label:"🇵🇭",codePoint:"ph",code:"+63"},{value:"Poland",label:"🇵🇱",codePoint:"pl",code:"+48"},{value:"Portugal",label:"🇵🇹",codePoint:"pt",code:"+351"},{value:"Puerto Rico",label:"🇵🇷",codePoint:"pr",code:"+1"},{value:"Qatar",label:"🇶🇦",codePoint:"qa",code:"+974"},{value:"Réunion",label:"🇷🇪",codePoint:"re",code:"+262"},{value:"Romania",label:"🇷🇴",codePoint:"ro",code:"+40"},{value:"Russia",label:"🇷🇺",codePoint:"ru",code:"+7"},{value:"Rwanda",label:"🇷🇼",codePoint:"rw",code:"+250"},{value:"Saint Kitts and Nevis",label:"🇰🇳",codePoint:"kn",code:"+1869"},{value:"Saint Lucia",label:"🇱🇨",codePoint:"lc",code:"+1758"},{value:"Saint Vincent and the Grenadines",label:"🇻🇨",codePoint:"vc",code:"+1784"},{value:"Samoa",label:"🇼🇸",codePoint:"ws",code:"+685"},{value:"San Marino",label:"🇸🇲",codePoint:"sm",code:"+378"},{value:"São Tomé and Príncipe",label:"🇸🇹",codePoint:"st",code:"+239"},{value:"Saudi Arabia",label:"🇸🇦",codePoint:"sa",code:"+966"},{value:"Senegal",label:"🇸🇳",codePoint:"sn",code:"+221"},{value:"Serbia",label:"🇷🇸",codePoint:"rs",code:"+381"},{value:"Seychelles",label:"🇸🇨",codePoint:"sc",code:"+248"},{value:"Sierra Leone",label:"🇸🇱",codePoint:"sl",code:"+232"},{value:"Singapore",label:"🇸🇬",codePoint:"sg",code:"+65"},{value:"Slovakia",label:"🇸🇰",codePoint:"sk",code:"+421"},{value:"Slovenia",label:"🇸🇮",codePoint:"si",code:"+386"},{value:"Solomon Islands",label:"🇸🇧",codePoint:"sb",code:"+677"},{value:"Somalia",label:"🇸🇴",codePoint:"so",code:"+252"},{value:"South Africa",label:"🇿🇦",codePoint:"za",code:"+27"},{value:"South Korea",label:"🇰🇷",codePoint:"kr",code:"+82"},{value:"South Sudan",label:"🇸🇸",codePoint:"ss",code:"+211"},{value:"Spain",label:"🇪🇸",codePoint:"es",code:"+34"},{value:"Sri Lanka",label:"🇱🇰",codePoint:"lk",code:"+94"},{value:"Sudan",label:"🇸🇩",codePoint:"sd",code:"+249"},{value:"Suriname",label:"🇸🇷",codePoint:"sr",code:"+597"},{value:"Swaziland",label:"🇸🇿",codePoint:"sz",code:"+268"},{value:"Sweden",label:"🇸🇪",codePoint:"se",code:"+46"},{value:"Switzerland",label:"🇨🇭",codePoint:"ch",code:"+41"},{value:"Syria",label:"🇸🇾",codePoint:"sy",code:"+963"},{value:"Taiwan",label:"🇹🇼",codePoint:"tw",code:"+886"},{value:"Tajikistan",label:"🇹🇯",codePoint:"tj",code:"+992"},{value:"Tanzania",label:"🇹🇿",codePoint:"tz",code:"+255"},{value:"Thailand",label:"🇹🇭",codePoint:"th",code:"+66"},{value:"Timor-Leste",label:"🇹🇱",codePoint:"tl",code:"+670"},{value:"Togo",label:"🇹🇬",codePoint:"tg",code:"+228"},{value:"Tonga",label:"🇹🇴",codePoint:"to",code:"+676"},{value:"Trinidad and Tobago",label:"🇹🇹",codePoint:"tt",code:"+1868"},{value:"Tunisia",label:"🇹🇳",codePoint:"tn",code:"+216"},{value:"Turkey",label:"🇹🇷",codePoint:"tr",code:"+90"},{value:"Turkmenistan",label:"🇹🇲",codePoint:"tm",code:"+993"},{value:"Tuvalu",label:"🇹🇻",codePoint:"tv",code:"+688"},{value:"Uganda",label:"🇺🇬",codePoint:"ug",code:"+256"},{value:"Ukraine",label:"🇺🇦",codePoint:"ua",code:"+380"},{value:"United Arab Emirates",label:"🇦🇪",codePoint:"ae",code:"+971"},{value:"United Kingdom",label:"🇬🇧",codePoint:"gb",code:"+44"},{value:"United States",label:"🇺🇸",codePoint:"us",code:"+1"},{value:"Uruguay",label:"🇺🇾",codePoint:"uy",code:"+598"},{value:"Uzbekistan",label:"🇺🇿",codePoint:"uz",code:"+998"},{value:"Vanuatu",label:"🇻🇺",codePoint:"vu",code:"+678"},{value:"Vatican City",label:"🇻🇦",codePoint:"va",code:"+39"},{value:"Venezuela",label:"🇻🇪",codePoint:"ve",code:"+58"},{value:"Vietnam",label:"🇻🇳",codePoint:"vn",code:"+84"},{value:"Yemen",label:"🇾🇪",codePoint:"ye",code:"+967"},{value:"Zambia",label:"🇿🇲",codePoint:"zm",code:"+260"},{value:"Zimbabwe",label:"🇿🇼",codePoint:"zw",code:"+263"}],Ki=({node:e,theme:t,rootNodeAttr:n})=>{var i,o,r,s,a,l,c,d,u,p,h,m,g,b,f,_,w;if(null===(i=null==e?void 0:e.attr)||void 0===i?void 0:i.hidden)return null;const v=Oi(null),y=null===(r=null===(o=window.Shopify)||void 0===o?void 0:o.country)||void 0===r?void 0:r.toLowerCase(),[S,E]=Ti(Vi.some((e=>e.codePoint===y))?y:"us"),I=(e=>{switch(e){case"email":return"email";case"phone":return"tel";default:return}})(e.id)||(null===(s=null==e?void 0:e.attr)||void 0===s?void 0:s.fieldType)||"text",x="transparent"===(null===(a=e.attr)||void 0===a?void 0:a.bgColor)&&(null===(l=e.attr)||void 0===l?void 0:l.color)||"black",T="minimal"===(null===(c=null==e?void 0:e.attr)||void 0===c?void 0:c.style)?"0":Rt((null===(d=e.attr)||void 0===d?void 0:d.radius)||"sm"),O=Gt((null==n?void 0:n.bgColor)||"#ffffff"),N="minimal"!==(null===(u=e.attr)||void 0===u?void 0:u.style)&&Boolean(null===(p=e.children)||void 0===p?void 0:p.trim())&&(null===(h=e.attr)||void 0===h?void 0:h.showLabel);return pi("div",Object.assign({style:{display:"flex",flexDirection:"column",width:"100%",padding:"5px 0 0 0",gap:"5px"}},{children:[N&&pi("label",Object.assign({htmlFor:e.id,style:{color:"red",fontSize:"14px",textOverflow:"ellipsis",overflow:"hidden",display:"inline-block",width:"100%"},onClick:e=>{e.preventDefault(),v.current&&v.current.focus()}},{children:e.children})),pi("div",Object.assign({style:{display:"flex",gap:"minimal"===(null===(m=null==e?void 0:e.attr)||void 0===m?void 0:m.style)?"0px":"1px",width:"100%",position:"relative","--accent-color":(null==t?void 0:t.accent)||Mt,"--input-content-color":x,"--input-content-bg-color":(null===(g=null==e?void 0:e.attr)||void 0===g?void 0:g.bgColor)||"white","--input-content-bg-mix-color":O?"white":"black","--input-content-bg-mix-opacity":O?"8%":"3%","--input-border-style":"minimal"===(null===(b=e.attr)||void 0===b?void 0:b.style)?"0 1.5px #20202033":"0 0 0 1px #20202033","--input-border-style-active":"minimal"===(null===(f=e.attr)||void 0===f?void 0:f.style)?`0 2px ${(null==t?void 0:t.accent)||Mt}`:`0 0 0 2px ${(null==t?void 0:t.accent)||Mt}`}},{children:["tel"===I&&(()=>{var e,t;const n=null===(e=Vi.find((e=>e.codePoint===S)))||void 0===e?void 0:e.code,i=null===(t=Vi.find((e=>e.codePoint===S)))||void 0===t?void 0:t.label;return pi(Gn,{children:[pi("div",Object.assign({style:{position:"relative",zIndex:1}},{children:[pi("select",Object.assign({onChange:e=>{E(e.target.value)},style:{padding:"5px",borderTopRightRadius:"0px",borderBottomRightRadius:"0px",borderTopLeftRadius:T,borderBottomLeftRadius:T,borderRight:"5px solid transparent",width:"52px",height:"100%",color:"transparent"},className:"input-country-code-select",value:S},{children:Vi.map((e=>pi("option",Object.assign({value:e.codePoint},{children:[e.value," (",e.code,")"]}),e.codePoint)))})),pi("div",Object.assign({style:{position:"absolute",top:"8px",left:"10px",fontSize:"medium",pointerEvents:"none"}},{children:i}))]})),pi("input",{type:"hidden",name:"country-code",value:n})]})})(),pi("input",{ref:v,className:"tree-rendered-text-input",onInput:e=>{e.target.setCustomValidity(""),"tel"!==I?"number"!==I||(e.target.value=e.target.value.replace(/[^0-9.]/g,"")):e.target.value=e.target.value.replace(/[^0-9+]/g,"")},required:null===(_=e.attr)||void 0===_?void 0:_.required,id:e.id,name:e.id,type:I,placeholder:e.attr.placeholder||(Ct[e.id]||e.id).toLowerCase(),style:Object.assign(Object.assign({width:"100%",zIndex:2},"tel"===I?{borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px",borderTopRightRadius:T,borderBottomRightRadius:T}:{borderRadius:T}),(null===(w=e.attr)||void 0===w?void 0:w.css)||{})})]}))]}))},qi=({node:e,theme:t})=>{const{css:n,label:i,showLabel:o,orientation:r}=e.attr||{},s=Lt();return pi("div",Object.assign({style:{display:"flex",flexDirection:"column",padding:"5px 0",gap:"5px"}},{children:[o&&pi("p",Object.assign({style:Object.assign(Object.assign({color:"#000"},s),{marginBottom:"4px"})},{children:i})),pi("div",Object.assign({style:Object.assign(Object.assign({display:"flex"},"horizontal"===r?{flexDirection:"row",gap:"8px"}:{flexDirection:"column"}),{flexWrap:"wrap"})},{children:e.children.map(((t,i)=>pi("div",Object.assign({style:{display:"flex",alignItems:"center",marginBottom:"4px"}},{children:[pi("input",{tabIndex:-1,type:"checkbox",id:t,name:e.id,value:t,style:{marginLeft:"0",marginRight:"vertical"===r?"8px":"4px"}}),pi("label",Object.assign({htmlFor:t,style:Object.assign(Object.assign({},s),n||{})},{children:t}))]}),i)))}))]}))},Wi=({node:e,overrideNode:t,theme:n})=>{const{color:i,css:o,size:r,hidden:s}=e.attr||{};if(s)return null;const a=Lt(r),l={whiteSpace:(c="flyout"===e.id)?"nowrap":"normal",width:c?"calc(100% - 25px)":"unset"};var c;const d=Object.assign(Object.assign(Object.assign({margin:0,color:i||"#000"},l),a),o||{});return t&&"string"!=typeof t?t({defaultStyles:d,node:e}):pi("p",Object.assign({style:d},{children:t||e.children}))},Qi=e=>{const t="top"===e?310:370,n={position:"absolute",width:t,height:"100%"},i={left:{transform:`translateX(-${t/2-20}px)`},right:{transform:"translateX(20px)"},top:{height:t,width:"100%",transform:"translateY(20px)"}};return Object.assign(Object.assign({},n),i[e])},Zi=({node:e,theme:t})=>{var n,i,o,r,s,a,l,c;const[d,u]=Ti(360/(null===(n=e.attr)||void 0===n?void 0:n.slices.length)),[p,h]=Ti(!1),m=Oi(null),g=t=>{if(p)return;h(!0);const n=(e=>{const t=e.reduce(((e,t)=>e+t.chance),0);if(0===t)return 0;const n=Math.random()*t;let i=0;for(let t=0;t<e.length;t++)if(i+=e[t].chance,n<=i)return t;return 0})(b),i=((e,t,n,i=5,o=10)=>{const r=360/t,s=r*e-{left:r,right:-180+r,top:-90+r}[n];return-(360*Math.floor(i+Math.random()*(o-i))+s)})(n,b.length,e.attr.pos);u(i),setTimeout((()=>{h(!1),t(b[n])}),3e3)};if(function(e,t){var n=xi(hi++,3);!Cn.__s&&Ai(n.__H,t)&&(n.__=e,n.i=t,mi.__H.__h.push(n))}((()=>{m.current&&Object.defineProperty(m.current,"spin",{value:g,configurable:!1})}),[]),null===(i=null==e?void 0:e.attr)||void 0===i?void 0:i.hidden)return null;const{slices:b}=e.attr||{},{marker:f}=e.attr||{},_=360/b.length;return pi("div",Object.assign({style:{position:"relative",width:"100%",height:"100%"},id:e.id,ref:m},{children:pi("div",Object.assign({style:Object.assign({borderRadius:"50%"},Qi(e.attr.pos))},{children:pi("svg",Object.assign({viewBox:"-100 -100 200 200",style:{width:"100%",height:"100%",overflow:"visible"}},{children:[pi("g",Object.assign({style:{transform:`rotate(${d}deg)`,transition:"transform 3s ease-out"}},{children:b.map(((e,t)=>{const n=t*_-90,i=(t+1)*_-90,o=_>180?1:0,r=100*Math.cos(n*Math.PI/180),s=100*Math.sin(n*Math.PI/180),a=100*Math.cos(i*Math.PI/180),l=100*Math.sin(i*Math.PI/180),c=n+_/2;return pi("g",{children:[pi("path",{d:`M 0 0 L ${r} ${s} A 100 100 0 ${o} 1 ${a} ${l} Z`,fill:e.bgColor,stroke:"#000",strokeWidth:"1"}),pi("text",Object.assign({fill:e.color||"#000",style:{fontWeight:"bold",fontSize:(d=e.label,d.length<=10?"12px":d.length<=15?"8px":"6px"),pointerEvents:"none",textAnchor:"middle",dominantBaseline:"middle"},transform:`rotate(${c}) translate(55)`},{children:e.label}))]},t);var d}))})),pi("circle",{cx:"0",cy:"0",r:"20",fill:(null===(r=null===(o=e.attr)||void 0===o?void 0:o.spinText)||void 0===r?void 0:r.bgColor)||"#fff"}),pi("foreignObject",Object.assign({x:"-20",y:"-20",width:"40",height:"40",textAnchor:"middle",dominantBaseline:"middle"},{children:pi("div",Object.assign({style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},{children:pi("p",Object.assign({style:{fontWeight:"bold",fontSize:(()=>{var t,n;const i=null===(n=null===(t=e.attr)||void 0===t?void 0:t.spinText)||void 0===n?void 0:n.label;return(null==i?void 0:i.length)<=10?"12px":(null==i?void 0:i.length)<=15?"6px":"5px"})(),textAlign:"center",color:(null===(a=null===(s=e.attr)||void 0===s?void 0:s.spinText)||void 0===a?void 0:a.color)||"#000",pointerEvents:"none",lineHeight:"1.2",letterSpacing:"-0.3px"}},{children:(null===(c=null===(l=e.attr)||void 0===l?void 0:l.spinText)||void 0===c?void 0:c.label)||"SPIN"}))}))})),pi("g",Object.assign({width:"36",height:"18",style:(w=e.attr.pos,{left:{transform:"translate(80px, calc(-18px / 2))"},right:{transform:"translate(-80px, calc(18px / 2)) rotate(180deg)"},top:{transform:"translate(calc(-18px / 2), -80px) rotate(-90deg)"}}[w])},{children:[pi("path",{d:"M35 9c0 4.438-3.518 8-7.815 8-.637 0-1.746-.197-3.244-.58-1.47-.377-3.227-.908-5.12-1.527-3.782-1.237-8.055-2.806-11.54-4.129a1.87 1.87 0 0 1 0-3.528c3.485-1.324 7.758-2.892 11.54-4.13 1.893-.618 3.65-1.15 5.12-1.525C25.439 1.197 26.548 1 27.185 1 31.482 1 35 4.562 35 9Z",fill:(null==f?void 0:f.bgColor)||"#fff",style:{stroke:(null==f?void 0:f.color)||"#000",strokeWidth:"2"}}),pi("circle",{cx:"28",cy:"9",r:"3",fill:(null==f?void 0:f.color)||"#000"})]}))]}))}))}));var w},Ji=(e,t,n,i,o,r)=>{if(!e)return null;switch(e.type){case kt.BOX:return pi(Ri,Object.assign({node:e,isSmallScreen:t,theme:i,rootNodeAttr:o},{children:(e.children||[]).map((e=>Ji(e,t,n,i,o,r)))}));case kt.TEXT:return pi(Wi,{node:e,overrideNode:null==n?void 0:n[e.id],theme:i});case kt.CHECKBOX:return pi(zi,{node:e,theme:i});case kt.INPUT:return pi(Ki,{node:e,theme:i,rootNodeAttr:o});case kt.DATE:return pi(Fi,{node:e,theme:i,rootNodeAttr:o});case kt.BUTTON:return pi(Ui,{node:e,theme:i});case kt.IMAGE:return pi($i,{node:e,theme:i});case kt.DISCOUNT:return pi(Gi,{node:e,theme:i,shadowRef:r});case kt.MULTI_SELECT:return pi(qi,{node:e,theme:i},e.id);case kt.CATEGORY:return pi(Bi,{node:e,theme:i},e.id);case kt.WHEEL:return pi(Zi,{node:e,theme:i},e.id);default:return null}},Xi=({nodeTree:e,isSmallScreen:t,overrideNodes:n,shadowRef:i})=>{const o=((e,t)=>{if(t){const t=Vt(e,Nt),n=Vt(e,"image");if(t&&n&&(e.attr=Object.assign(Object.assign({},e.attr),{dir:"TB"}),t.attr=Object.assign(Object.assign({},t.attr),{pos:"top"}),n.attr=Object.assign(Object.assign({},n.attr),{fill:"40%"}),"string"!=typeof e.children)){const t=e.children.filter((e=>"string"!=typeof e&&"image"!==e.id));e.children=[n,...t]}}return e})(e,t),r=(null==o?void 0:o.type)===kt.BOX&&o.attr||{},s=(null==r?void 0:r.theme)?null==r?void 0:r.theme:{};return Ji(o,t,n,s,r,i)},eo=({handleSubmit:e,form:t,handleDismiss:n,customOptinStep:i,isEmbeddedForm:o,isMerchantOnFreePlan:r,shadowRef:s})=>{var a,l;const c=ne(),d=zt(c,t.step_type,null===(l=null===(a=null==t?void 0:t.config)||void 0===a?void 0:a.attr)||void 0===l?void 0:l.theme,o),u=Ft(c?t.mobile_position:t.desktop_position),p=Zt(t.config);return pi("form",Object.assign({className:o?"pushowl-embedded-form-container":It,style:Object.assign(Object.assign(Object.assign({},d),o?{}:u),{flexDirection:"column"}),onSubmit:t=>{p||e(t)},onClick:o=>{p&&(o.preventDefault(),o.stopPropagation(),(({event:e,attributes:t,handleDismiss:n,DOMTree:i,handleSubmit:o})=>{var r;if(!(null===(r=Object.keys(t||{}))||void 0===r?void 0:r.length))return;const s=e.target,a=dt(s,{root:i});Object.entries(t).forEach((([e,t])=>{switch(e){case"dismiss":Object.keys(t).forEach((e=>{e===a&&n()}));break;case"submit":Object.keys(t).forEach((e=>{if(e===a){const e=s.closest("form");e&&e.addEventListener("click",(function(t){t.preventDefault();const n={};e.querySelectorAll("input, select, textarea").forEach((e=>{const t=e.getAttribute("name");if(t)n[t]=e.value;else{const t=e.getAttribute("id");n[t]=e.value}})),o(null,n)}))}}))}}))})({event:o,attributes:t.config.attr.button,DOMTree:Qt(t.config.children[i]),handleDismiss:()=>{n({formId:t.id})},handleSubmit:(t,n)=>{e(t,n)}}))},onInput:e=>{p&&(e.preventDefault(),e.stopPropagation(),(({event:e,attributes:t,DOMTree:n})=>{var i;if(!(null===(i=Object.keys(t||{}))||void 0===i?void 0:i.length))return;const o=e.target;if("submit"===o.getAttribute("type"))return;const r=dt(o,{root:n});Object.entries(t).forEach((([e,t])=>{"phone"===e?Object.keys(t).forEach((e=>{e===r&&(o.value=o.value.replace(/[^0-9+]/g,""))})):Object.keys(t).forEach((e=>{if(e===r){const t=n.querySelector(e);"number"===t.type&&(t.value=t.value.replace(/[^0-9]/g,""))}}))}))})({event:e,attributes:t.config.attr.input,DOMTree:Qt(t.config.children[i])}))}},{children:p?pi("div",{dangerouslySetInnerHTML:{__html:Jt(t.config,i)}}):pi(Gn,{children:[!o&&pi(ji,{isTeaser:!1,onDismiss:()=>n({formId:t.id})}),pi(Xi,{nodeTree:t.config,isSmallScreen:c,overrideNodes:{[xt.CONSENT_EMAIL_COPY]:({defaultStyles:e,node:t})=>pi("p",Object.assign({style:e},{children:t.children||"By checking this box, I consent to receive marketing emails at the\n              email address provided. Consent is not a condition to purchase."})),[xt.CONSENT_SMS_COPY]:({defaultStyles:e,node:t})=>pi("p",Object.assign({style:e},{children:t.children||"By checking this box, I consent to receive marketing text messages\n              through an automatic telephone dialing system at the number\n              provided. Consent is not a condition to purchase. Text STOP to\n              unsubscribe or HELP for help. Msg and data rates may apply."}))},shadowRef:s}),r&&!o&&pi(Di,{})]})}))},to=({handleOpenTeaserState:e,handleDismiss:t,teaserStateConfig:n})=>{var i,o;const r=ne(),s=zt(r,"teaser",null===(o=null===(i=null==n?void 0:n.config)||void 0===i?void 0:i.attr)||void 0===o?void 0:o.theme),a=Ft(r?n.mobile_position:n.desktop_position);return pi("div",Object.assign({className:It,style:Object.assign(Object.assign({cursor:"pointer"},s),a),onClick:e},{children:[pi(ji,{isTeaser:!0,isTeaserIconOnly:(()=>{const e=Vt(n.config,"text_content");return!(!e||e.type!==kt.BOX)&&e.children.some((e=>{var t;return"flyout"===e.id&&(null===(t=null==e?void 0:e.attr)||void 0===t?void 0:t.hidden)}))})(),onDismiss:()=>t({formId:n.id})}),pi(Xi,{nodeTree:n.config,isSmallScreen:r})]}))},no=({form:e,teaserStateConfig:t,subscriptionConfirmation:n,isTeaserStateActive:i,handleDismiss:o,handleOpenTeaserState:r,handleSubmit:s,nodeId:a,flowId:l,shadowRef:c,customOptinStep:d,isEmbeddedForm:u=!1,isMerchantOnFreePlan:p,trackFormSubmitted:h})=>{const[m,g]=Ti(!1),b=e=>{var t;c&&(c.querySelector(".pushowl-optin-button")&&(c.querySelector(".pushowl-optin-button").disabled=e),null===(t=c.querySelectorAll("input"))||void 0===t||t.forEach((t=>{t.disabled=e})))},f=t=>N(void 0,void 0,void 0,(function*(){var i;if(!m){g(!0);try{const o=new Ce,r=Zt(e.config)?t.phone:(e=>"phone"in e&&"country-code"in e&&e.phone?e["country-code"]+e.phone:"")(t);let d={};"email"in t&&t.email&&(d.email=t.email),"phone"in t&&t.phone&&(d.phone=r),Zt(e.config)&&(d=Object.assign(Object.assign({},d),t));const p=Ht(e.config);if(t.email||r){const e=Wt(p,t,!0),n=Object.assign(Object.assign({},e),{subscribe_url:window.location.href});D.email&&r&&(n.SMS=r.replace(/\D/g,"")),d.attributes=n}if(!(()=>{const e=null==c?void 0:c.querySelector("#email"),t=null==c?void 0:c.querySelector("#phone");return!((!e||!t)&&(e&&!e.value?(e.setCustomValidity("Please enter a valid email"),e.reportValidity(),1):t&&!t.value&&(t.setCustomValidity("Please enter a valid phone number"),t.reportValidity(),1)))})())return void g(!1);b(!0),yield(e=>N(void 0,void 0,void 0,(function*(){const{phone:t}=e,n=new Ce;if(u)if("email"in e&&"phone"in e){delete e.phone;const{result:i}=yield n.subscribeThroughPopup({subscriptionData:e,flowId:l,nodeId:a,source:"embedded_forms"});D.subscriberToken=i.token,D.consent=i.consent,e.phone=t,delete e.email;const{result:o}=yield n.subscribeThroughPopup({subscriptionData:e,flowId:l,nodeId:a,source:"embedded_forms"});D.subscriberToken=o.token,D.consent=o.consent}else{const{result:t}=yield n.subscribeThroughPopup({subscriptionData:e,flowId:l,nodeId:a,source:"embedded_forms"});D.subscriberToken=t.token,D.consent=t.consent}else{const{result:t}=yield n.subscribeThroughPopup({subscriptionData:e,flowId:l,nodeId:a,source:"optin_flows"});D.subscriberToken=t.token,D.consent=t.consent}})))(Object.assign({},d));const m=Wt(p,t);t.email&&(D.email=t.email,J.emailId=t.email,n||J.identify(t.email,Object.assign(Object.assign({},m),{subscribe_url:window.location.href}))),r&&window.sendinblue&&(D.phone=r,D.email||(yield o.identifyBrevoContactThroughPhoneNumber(r,Object.assign(Object.assign({},m),{subscribe_url:window.location.href})))),h(e.step_type,e.id);Vt(e.config,Nt)?null===(i=null==c?void 0:c.querySelector(`#${Nt}`))||void 0===i||i.spin((t=>{setTimeout((()=>{s({stepType:e.step_type,formId:e.id,isCustomOptin:Zt(e.config)}),g(!1),c.querySelector(".pushowl-optin-container").dataset.discount=t.code,b(!1)}),1e3)})):s({stepType:e.step_type,formId:e.id,isCustomOptin:Zt(e.config)})}catch(e){if(!(c.querySelector("#email")&&c.querySelector("#phone"))){if("phone"in t){const e=c.querySelector("#phone");e&&(e.focus(),e.setCustomValidity("Please enter a valid phone number"),e.reportValidity())}if("email"in t){const e=c.querySelector("#email");e&&(e.focus(),e.setCustomValidity("Please enter a valid email"),e.reportValidity())}}ge("Error encountered while submitting new optin form: ",e.message)}finally{Vt(e.config,Nt)||(g(!1),b(!1))}}})),_=t=>{const n=new FormData(t.target),i=Object.fromEntries(n.entries()),o=Ht(e.config);let r=!0;return Object.entries(o).filter((([e,t])=>"multiple-choice"===(null==t?void 0:t.attributeType))).forEach((([e,t])=>{const n=((e,t)=>{let n=null;n=c?c.querySelectorAll(`input[name=${e}]`):document.querySelector(".pushowl-embedded-form-container").querySelectorAll(`input[name=${e}]`);const i=Array.from(n).filter((e=>e.checked)).map((e=>e.value));if(t&&0===i.length){const e=n[0];return e.setCustomValidity("Please select at least one option"),e.reportValidity(),n.forEach((t=>{const i=()=>{Array.from(n).some((e=>e.checked))&&(e.setCustomValidity(""),e.reportValidity())};t.removeEventListener("change",i),t.addEventListener("change",i)})),!1}return i})(e,Boolean(null==t?void 0:t.required));!1===n?r=!1:i[e]=n})),!!r&&i};return pi(Gn,{children:[pi("style",{children:(Zt(e.config),`\n  .pushowl-optin-container {\n    color: initial;\n    letter-spacing: initial;\n    font-weight: initial;\n    line-height: initial;\n    z-index: 2147483647 !important;\n    position: fixed !important;\n    box-sizing: border-box !important;\n    margin: initial !important;\n    display: flex !important;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif !important;\n  }\n\n  .pushowl-embedded-form-container {\n    position: relative !important;\n    color: initial;\n    letter-spacing: inherit;\n    font-weight: inherit;\n    line-height: inherit;\n    display: flex;\n    flex-direction: column;\n  }\n  \n  .pushowl-optin-button {\n    cursor: pointer;\n    border: none;\n    border-radius: 6px;\n    height: 42px;\n    font-family: inherit;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    margin: 10px 0px;\n  }\n\n  .input-country-code-select {\n    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgY2xhc3M9ImZlYXRoZXIgZmVhdGhlci1jaGV2cm9uLWRvd24iIGZpbGw9Im5vbmUiIGhlaWdodD0iMjQiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBvbHlsaW5lIHBvaW50cz0iNiA5IDEyIDE1IDE4IDkiLz48L3N2Zz4=) no-repeat 100% 50%;\n    background-size: 14px;\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    appearance: none;\n  }\n    \n${window.pushowlOptinStyles?"\n  .tree-rendered-text-input {\n    height: 25px;\n    border: none;\n    padding: 6px 12px;\n  }\n":"\n  .tree-rendered-text-input, .input-country-code-select {\n    height: 25px;\n    border: none;\n    padding: 6px 12px;\n    box-shadow: var(--input-border-style);\n    outline: none;\n    background-color: var(--input-content-bg-color);\n    transition: all 0.1s ease-in-out;\n    color: var(--input-content-color);\n  }\n\n  .pushowl-embedded-form-container .tree-rendered-text-input {\n    font-family: inherit;\n    font-size: inherit;\n    height: 40px;\n  }\n\n  .tree-rendered-text-input:hover, .input-country-code-select:hover {\n    background-color: color-mix(\n      in sRGB,\n      var(--input-content-bg-color),\n      var(--input-content-bg-mix-color) var(--input-content-bg-mix-opacity)\n    );\n  }\n\n  .tree-rendered-text-input:focus-visible, .input-country-code-select:focus-visible {\n    outline: none;\n    box-shadow: var(--input-border-style-active);\n    background-color: color-mix(\n      in sRGB,\n      var(--input-content-bg-color),\n      var(--input-content-bg-mix-color) var(--input-content-bg-mix-opacity)\n    );\n  }\n\n  .tree-rendered-text-input::placeholder, .input-country-code-select::placeholder {\n    color: var(--input-content-color);\n    opacity: 0.5;\n  }\n  \n  .pushowl-optin-button {\n    width: 100%;\n  }\n\n  .button-loader {\n    margin: 0 auto;\n    width: 60px;\n    aspect-ratio: 4;\n    --_g: no-repeat radial-gradient(circle closest-side,var(--color) 90%,var(--bg-color));\n    background: \n      var(--_g) 0%   50%,\n      var(--_g) 50%  50%,\n      var(--_g) 100% 50%;\n    background-size: calc(100%/3) 100%;\n    animation: l7 0.9s infinite ease-in-out;\n  }\n  \n  .pushowl-optin-button:not([disabled]) .button-loader {\n    display: none !important;\n  }\n\n  .pushowl-optin-button[disabled] .button-loader {\n    display: block !important;\n  }\n\n  .pushowl-optin-button:not([disabled]) .button-content {\n    display: block !important;\n  }\n\n  .pushowl-optin-button[disabled] .button-content {\n    display: none !important;\n  }\n\n  @keyframes l7 {\n      33%{background-size:calc(100%/3) 0%  ,calc(100%/3) 100%,calc(100%/3) 100%}\n      50%{background-size:calc(100%/3) 100%,calc(100%/3) 0%  ,calc(100%/3) 100%}\n      66%{background-size:calc(100%/3) 100%,calc(100%/3) 100%,calc(100%/3) 0%  }\n  }\n\n\n  "}\n`)}),pi("style",{children:window.pushowlOptinStyles}),i?pi(to,{handleDismiss:o,teaserStateConfig:t,handleOpenTeaserState:r}):pi(eo,{handleDismiss:o,form:e,handleSubmit:(e,t=null)=>N(void 0,void 0,void 0,(function*(){e.preventDefault();const n=e?_(e):t;n&&(yield f(n))})),customOptinStep:d,isEmbeddedForm:u,isMerchantOnFreePlan:p,shadowRef:c})]})};var io=Object.freeze({__proto__:null,OptinForm:class{constructor(e,t,n,i,o,r=!1,s,a){this.handleFormSorting=e=>{const t=[...e].sort(((e,t)=>"teaser"===e.step_type&&"teaser"!==t.step_type?1:"teaser"!==e.step_type&&"teaser"===t.step_type?-1:e.step_type.localeCompare(t.step_type)));return t},e.forms=this.handleFormSorting(e.forms),this.container=null,this.rootElement=document.body,this.config=e,this.step=0,this.isTeaserStateActive=!1,this.teaserStateConfig=e.forms.find((e=>"teaser"===e.step_type)),this.showNextForm=t,this.flowId=n,this.trackForm=i,this.openShadowDOM=o,this.subscriptionConfirmation=r,this.customOptinStep=s,this.isMerchantOnFreePlan=a,this.init()}_createShadowContainer(){const e=document.createElement("div");return e.setAttribute("id","pushowl-shadow-host"),e.setAttribute("class","needsclick"),e.style.display="block",this.container=e,e}init(){var e,t,n;const i=this._createShadowContainer();window.Cypress||this.openShadowDOM?this.shadowRef=i.attachShadow({mode:"open"}):this.shadowRef=i.attachShadow({mode:"closed"}),this.rootElement.querySelector("#pushowl-shadow-host")||this.rootElement.appendChild(i),Zt(null===(n=null===(t=null===(e=this.config)||void 0===e?void 0:e.forms)||void 0===t?void 0:t[0])||void 0===n?void 0:n.config)?0===this.customOptinStep&&this.trackForm({event:"optin_viewed",stepType:this.config.forms[this.step].step_type,formId:this.config.forms[this.step].id}):this.trackForm({event:"optin_viewed",stepType:this.config.forms[this.step].step_type,formId:this.config.forms[this.step].id})}trackFormSubmitted(e,t){this.trackForm({stepType:e,formId:t,event:"optin_submitted"})}handleSubmit({isCustomOptin:e=!1}){e?(this.destroy(),this.showNextForm(),this.render()):(this.step++,this.render())}shouldShowTeaser(){return!!this.config.forms.find((e=>"teaser"===e.step_type&&"active"===e.status))}handleDismiss({formId:e}){var t,n,i,o,r,s;Zt(null===(i=null===(n=null===(t=this.config)||void 0===t?void 0:t.forms)||void 0===n?void 0:n[0])||void 0===i?void 0:i.config)?(this.destroy(),this.showNextForm(this.config.id,0===this.customOptinStep),this.render()):1===this.step&&D.consent.includes(this.config.channels[0])&&(this.destroy(),this.showNextForm()),this.isTeaserStateActive?(this.trackForm({formId:e,event:"optin_dismissed",stepType:"teaser"}),this.destroy(),this.showNextForm(this.config.id),this.render()):this.shouldShowTeaser()?(this.isTeaserStateActive=!0,this.render()):Zt(null===(s=null===(r=null===(o=this.config)||void 0===o?void 0:o.forms)||void 0===r?void 0:r[0])||void 0===s?void 0:s.config)?0===this.customOptinStep&&this.trackForm({formId:e,event:"optin_dismissed",stepType:this.config.forms[this.step].step_type}):(this.trackForm({formId:e,event:"optin_dismissed",stepType:this.config.forms[this.step].step_type}),this.destroy(),this.showNextForm(this.config.id),this.render())}handleOpenTeaserState(){this.isTeaserStateActive=!1,this.render()}destroy(){this.container.remove()}render(){const e=[...this.config.forms];di(Hn(no,{form:e[this.step],handleDismiss:this.handleDismiss.bind(this),handleSubmit:this.handleSubmit.bind(this),handleOpenTeaserState:this.handleOpenTeaserState.bind(this),teaserStateConfig:this.teaserStateConfig,isTeaserStateActive:this.isTeaserStateActive,nodeId:this.config.id,flowId:this.flowId,shadowRef:this.shadowRef,subscriptionConfirmation:this.subscriptionConfirmation,customOptinStep:this.customOptinStep,isMerchantOnFreePlan:this.isMerchantOnFreePlan,trackFormSubmitted:this.trackFormSubmitted.bind(this)}),this.shadowRef)}}});var oo=Object.freeze({__proto__:null,EmbeddedForm:class{constructor(e,t,n,i,o,r=!1,s){this.handleFormSorting=e=>{const t=[...e].sort(((e,t)=>e.step_type.localeCompare(t.step_type)));return t},e.forms=this.handleFormSorting(e.forms),this.container=null,this.rootElement=s,this.config=e,this.step=0,this.isTeaserStateActive=!1,this.teaserStateConfig=e.forms.find((e=>"teaser"===e.step_type)),this.showNextForm=t,this.flowId=n,this.trackForm=i,this.openShadowDOM=o,this.subscriptionConfirmation=r,this.DOMContainer=s,this.init()}_createShadowContainer(){const e=document.createElement("div");return e.setAttribute("id","pushowl-shadow-host"),e.setAttribute("class","needsclick"),e.style.display="block",this.container=e,e}init(){const e=this._createShadowContainer();this.rootElement.appendChild(e);const t=new G;if(!t.has_viewed_embedded_form(this.flowId)){const e=new IntersectionObserver((n=>{n.forEach((n=>{n.isIntersecting&&(this.trackForm({event:"optin_viewed",stepType:this.config.forms[this.step].step_type,formId:this.config.forms[this.step].id}),t.mark_embedded_form_viewed(this.flowId),e.unobserve(n.target))}))}));e.observe(this.container)}}trackFormSubmitted(e,t){this.trackForm({stepType:e,formId:t,event:"optin_submitted"})}handleSubmit({stepType:e,formId:t,isCustomOptin:n=!1}){n?(this.destroy(),this.showNextForm(),this.render()):(this.step++,this.render())}shouldShowTeaser(){return!1}handleDismiss(){}handleOpenTeaserState(){}destroy(){this.container.remove()}render(){const e=[...this.config.forms];di(Hn(no,{form:e[this.step],handleDismiss:this.handleDismiss.bind(this),handleSubmit:this.handleSubmit.bind(this),handleOpenTeaserState:this.handleOpenTeaserState.bind(this),teaserStateConfig:this.teaserStateConfig,isTeaserStateActive:this.isTeaserStateActive,nodeId:this.config.id,flowId:this.flowId,shadowRef:this.container,subscriptionConfirmation:this.subscriptionConfirmation,customOptinStep:0,isEmbeddedForm:!0,isMerchantOnFreePlan:!1,trackFormSubmitted:this.trackFormSubmitted.bind(this)}),this.DOMContainer)}}});const ro='<svg class="pushowl-ios-share-icon" width="12" height="16" viewBox="0 0 12 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.24902 10.1436C6.52197 10.1436 6.75684 9.91504 6.75684 9.64844V3.12939L6.71875 2.17725L7.14404 2.62793L8.10889 3.65625C8.19775 3.75781 8.32471 3.80859 8.45166 3.80859C8.71191 3.80859 8.91504 3.61816 8.91504 3.35791C8.91504 3.22461 8.85791 3.12305 8.7627 3.02783L6.61719 0.958496C6.49023 0.831543 6.38232 0.787109 6.24902 0.787109C6.12207 0.787109 6.01416 0.831543 5.88086 0.958496L3.73535 3.02783C3.64014 3.12305 3.58936 3.22461 3.58936 3.35791C3.58936 3.61816 3.77979 3.80859 4.04639 3.80859C4.16699 3.80859 4.30664 3.75781 4.39551 3.65625L5.354 2.62793L5.78564 2.17725L5.74756 3.12939V9.64844C5.74756 9.91504 5.97607 10.1436 6.24902 10.1436ZM2.61182 15.1138H9.89258C11.2192 15.1138 11.8857 14.4536 11.8857 13.146V6.81104C11.8857 5.50342 11.2192 4.84326 9.89258 4.84326H8.12158V5.86523H9.87354C10.502 5.86523 10.8638 6.20801 10.8638 6.86816V13.0889C10.8638 13.749 10.502 14.0918 9.87354 14.0918H2.62451C1.98975 14.0918 1.64062 13.749 1.64062 13.0889V6.86816C1.64062 6.20801 1.98975 5.86523 2.62451 5.86523H4.38281V4.84326H2.61182C1.28516 4.84326 0.618652 5.50342 0.618652 6.81104V13.146C0.618652 14.4536 1.28516 15.1138 2.61182 15.1138Z" fill="#3478F6"/></svg>',so=`Add our website to your home screen and get notified of exclusive offers, new arrivals and more! It's easy: just tap the ${ro} icon and select 'Add to Home Screen'`;var ao=Object.freeze({__proto__:null,IOSInstallWidget:class{constructor({title:e="",description:t="",btnText:n="I have done this"}){this.node=null,this.container=document.body,this.title=e||"Never Miss Out with Web Push",this.description=t?t.replace("{{share icon}}",ro):so,this.btnText=n}init(){this.node=this._createNode(),this.container.appendChild(this.node),this.closeButton=this.node.querySelector(".pushowl-ios-install-close-btn"),this.doneBtn=this.node.querySelector("#pushowl-ios-completed-btn"),this.closeButton&&this.closeButton.addEventListener("click",(()=>{this.destroy(),D.installPromptDismissed=!0})),this.doneBtn&&this.doneBtn.addEventListener("click",(()=>{this.destroy(),D.installPromptDismissed=!0}))}_createNode(){return te(`<div>\n    <style>\n        @keyframes show-up {\n        from {\n          opacity: 0;\n          transform: translateY(20px);\n        }\n  \n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n  \n      .pushowl-ios-install-prompt {\n        all: initial;\n        display: block !important;\n        z-index: 2147483647 !important;\n        width: 345px !important;\n        margin: 12px auto !important;\n        position: fixed !important;\n        box-sizing: border-box !important;\n        background: #101828 !important;\n        border-radius: 8px !important;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif !important;\n        align-items: center !important;\n        font-size: 14px !important;\n        box-shadow: 0px 12px 13px rgba(0, 0, 0, 0.21)!important;\n        animation-duration: 0.6s;\n        animation-name: show-up;\n        bottom: 0 !important;\n        right: auto !important;\n        padding: 12px !important;\n        left: 0 !important;\n        right: 0 !important;\n        max-width: 94vw !important;\n      }\n  \n      .pushowl-ios-install-prompt * {\n        font-family: inherit !important;\n      }\n  \n      @media screen and (min-width : 480px) {\n        .pushowl-ios-install-prompt {\n          left: calc(50vw - 172.5px) !important;\n          right: auto !important;\n        }\n      }\n  \n      .pushowl-ios-install-prompt h2,\n      .pushowl-ios-install-prompt p {\n        color: rgb(255, 255, 255) !important;\n        font-size: 12px !important;\n        text-transform: none !important;\n        margin: 0 !important;\n      }\n  \n      .pushowl-ios-install-prompt h2 {\n        font-weight: bold !important;\n      }\n  \n      .pushowl-ios-share-icon {\n        vertical-align: bottom;\n        margin: 0 4px;\n        display: inline !important;\n      }\n  \n      .pushowl-ios-install-prompt-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 4px;\n      }\n  \n      .pushowl-ios-install-close-btn {\n        background: #101828;\n        border: none;\n        position: absolute;\n        top: 4px;\n        right: 10px;\n        width: auto !important;\n        padding: 0 !important;\n        min-width: auto !important;\n        height: auto !important;\n        line-height: 2 !important;\n        box-shadow: none !important;\n        font-size: 12px !important;\n      }\n  \n      .pushowl-ios-install-close-btn g {\n        fill: currentColor;\n        color: #fff;\n      }\n\n      #pushowl-ios-completed-btn {\n        border: none !important;\n        color: white !important;\n        background-color: #3478F6 !important;\n        padding: 1px 8px !important;\n        border-radius: 4px !important;\n        cursor: pointer !important;\n        width: auto !important;\n        height: auto !important;\n        line-height: 2 !important;\n        box-shadow: none !important;\n        font-size: 12px !important;\n      }\n    </style>\n    <dialog class="pushowl-ios-install-prompt" open>\n      <div class="pushowl-ios-install-prompt-header">\n        <h2>${this.title}</h2>\n        <button class="pushowl-ios-install-close-btn">\n          <svg\n            width="10px"\n            height="10px"\n            viewBox="0 0 12 12"\n            version="1.1"\n            xmlns="http://www.w3.org/2000/svg"\n            xmlns:xlink="http://www.w3.org/1999/xlink"\n          >\n            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g transform="translate(-5.000000, -5.000000)">\n                <g>\n                  <polygon\n                    points="17 6.20857143 15.7914286 5 11 9.79142857 6.20857143 5 5 6.20857143 9.79142857 11 5 15.7914286 6.20857143 17 11 12.2085714 15.7914286 17 17 15.7914286 12.2085714 11"\n                  ></polygon>\n                </g>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n  \n      <p>\n        ${this.description}\n      </p>\n      <div style="margin-top:12px;display:flex; justify-content:end">\n        <button type="button" id="pushowl-ios-completed-btn">${this.btnText}</button>\n      </div>\n    </dialog>\n  </div>`)}destroy(){this.node.remove()}}});class lo{constructor(e){let t=document.querySelector("body");this.config=e,this.container=t,this.node=null,this.state={title:null,buttonText:null,buttonListener:null},this.maximize=!0,this.rendered=!1}toggleFocusableElement(e,t){e.setAttribute("aria-hidden",!t),e.setAttribute("tabindex",t?0:-1)}init(){this.node=this._createNode(),this.container.appendChild(this.node),function(){const e=document.createElement("div");return document.body.appendChild(e),"rtl"===window.getComputedStyle(e).direction}()&&this.node.setAttribute("dir","rtl"),this.toast=this.node.querySelector(".pushowl-simple-toast"),this.toastContent=this.node.querySelector(".pushowl-simple-toast__content"),this.title=this.node.querySelector(".pushowl-simple-toast__title"),this.yesButton=this.node.querySelector(".pushowl-simple-toast__yes-button");let e=this.node.querySelectorAll(".action-button");this.bellButton=this.node.querySelector(".js-pushowl-bell-button"),this.closeButton=this.node.querySelector(".js-pushowl-close-button"),this.contentWrap=this.node.querySelector(".js-pushowl-widget-content"),this.subscribeButton=this.node.querySelector(".js-subscribe-button"),Array.from(e).forEach((e=>{e.addEventListener(d.CLICK,(()=>{this._toggleState()}))}))}render(){this.rendered||(this.init(),this.rendered=!0),this.title.textContent=this.state.title,this.state.buttonText?(this.yesButton.textContent=this.state.buttonText,this.yesButton.style.display="block",this.yesButton.addEventListener("click",(()=>{this.state.buttonListener&&this.state.buttonListener()}))):this.yesButton.style.display="none"}setState(e){this.state=e,this.render()}remove(){var e;this.rendered=!1,null===(e=document.querySelector(".pushowl-widget-node"))||void 0===e||e.remove()}}class co extends lo{constructor(e){super(e)}_toggleState(){let e=this.maximize;if(this.maximize=!this.maximize,this.toggleFocusableElement(this.bellButton,!e),this.toggleFocusableElement(this.closeButton,e),this.toggleFocusableElement(this.subscribeButton,e),this.bellButton.setAttribute("aria-expanded",String(e)),this.closeButton.setAttribute("aria-expanded",String(e)),e){this.toastContent.style.display="block",this.toast.classList.add(u.MAXIMIZE);(new G).config.optin_report_enabled&&window.poAnalytics.track("FlyoutWidgetMobileOpened")}else this.toastContent.style.display="none",this.toast.classList.remove(u.MAXIMIZE);setTimeout((()=>{(e?this.subscribeButton:this.bellButton).focus()}),1e3)}_createNode(){var e,t,n,i,o;let r,s=this.config.mobile,a=this.config.color,l=(null===(t=null===(e=this.state)||void 0===e?void 0:e.theme)||void 0===t?void 0:t.primaryColor)||"white",c=(null===(i=null===(n=this.state)||void 0===n?void 0:n.theme)||void 0===i?void 0:i.secondaryColor)||a,d=(null===(o=this.state.position)||void 0===o?void 0:o.mobile)||"bottom-left",{top:u,bottom:p,left:h,right:m,isCustomConfig:g}=ee({position:d,device:"mobile",customConfig:s,isExpanded:!1});return g&&(d="bottom-left"),r=`\n      <div class="pushowl-widget-node pushowl-widget-node--mobile">\n        <style>\n          .action-button{\n              cursor: pointer;\n              padding: initial;\n              min-height: initial;\n          }\n          .pushowl-simple-toast {\n              position: fixed;\n              /*\n              Since custom config set through Owly can have different values for the bottom.\n              We set the bottom to 8px if it has value in the expanded state\n              */\n              bottom: ${p?"8px":""};\n              top: ${u};\n              left: 8px;\n              right: 8px;\n              z-index: 2147483647;\n              box-sizing: border-box;\n          }\n          .pushowl-simple-toast * {\n              -webkit-tap-highlight-color: rgba(0, 0, 0, 0) !important;\n          }\n\n          .pushowl-simple-toast button {\n            margin: 0 !important;\n            text-transform: none !important;\n            min-width: auto !important;\n            box-shadow: none !important;\n          }\n          \n          .pushowl-bell-button {\n              position: absolute;\n              top: ${u?g?u:"0px":null};\n              bottom: ${p||null};\n              left: ${h||null};\n              right: ${m||null};\n              z-index: 2147483647;\n              width: ${s.diameter}px;\n              height: ${s.diameter}px;\n              box-sizing: border-box;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              border-radius: 12px;\n              color: ${l};\n              background: ${c} !important;\n              box-shadow: 2px 2px 8px 0 rgba(0,0,0,0.35) !important;\n              border: 0 !important;\n              transition: all 1s ease-in;\n          }\n          .pushowl-close-button {\n              padding: 6px;\n              line-height: 12px;\n              border: 0;\n              background: none;\n              \n              /* bring it just above the bell icon */\n              position: relative;\n              top: -4px;\n              right: -2px;\n              width: auto;\n              height: auto;\n          }\n          .pushowl-close-button #ic_close{\n              fill: ${l};\n          }\n          .pushowl-widget-background {\n              position: absolute;\n              top: ${u?g?u:"0px":null};\n              bottom: ${p||null};\n              left: ${h||null};\n              right: ${m||null};\n              z-index: 2147483646;\n              width: ${s.diameter}px;\n              height: ${s.diameter}px;\n              box-sizing: border-box;\n              border-radius: 12px;\n              background: ${c} !important;\n              transition: all 1s ease;\n          }\n          .pushowl-simple-toast__content {\n              box-shadow: 2px 2px 8px 0 rgba(0,0,0,0.35);\n              background: ${c};\n              font-family: Roboto, sans-serif;\n              padding: 13px;\n              opacity: 0;\n              transition: opacity 0.5s ease;\n              z-index: 2147483647;\n              visibility: collapse;\n              border-radius: 12px;\n              display: none;\n          }\n          .pushowl-content-upper-section {\n              display: flex;\n              justify-content: space-between;\n          }\n          .pushowl-simple-toast__title {\n              color: ${l};\n              font-size: 14px;\n              line-height: 14px;\n              padding: 5px;\n              margin-right: 16px;\n          }\n          .pushowl-simple-toast__yes-button-container {\n              margin-top: 20px;\n              display: flex;\n              justify-content: flex-end;\n              width: 100%;\n          }\n          .pushowl-simple-toast__yes-button {\n              font-size: 13px;\n              line-height: 13px;\n              color: ${c};\n              min-width: 100px;\n              cursor: pointer;\n              text-align: center;\n              max-width: 150px;\n              padding: 12px;\n              background-color: ${l};\n              letter-spacing: .3px;\n              border-radius: 4px;\n              text-transform: uppercase;\n              border: 0;\n              height: auto;\n              width: auto;\n          }\n          /*Minimize to Maximize Transition*/\n          .maximize .pushowl-bell-button {\n              animation: fade-out-animation 0.3s ease-in-out forwards\n          }\n          .maximize .pushowl-widget-background {\n              animation: bg-expand-animation 0.5s ease-in-out forwards, fade-out-animation 0.1s 0.8s ease-in-out forwards;\n          }\n          .maximize .pushowl-simple-toast__content {\n              animation: fade-in-animation 0.3s 0.5s ease-in-out forwards;\n          }\n          /* Maximize to Minimize Transition*/\n          .minimize .pushowl-simple-toast__content {\n              animation: fade-out-animation 0.3s ease-in-out forwards\n          }\n          .minimize .pushowl-widget-background {\n              animation: fade-in-animation 0.3s ease-in-out forwards;\n              animation-direction: reverse;\n          }\n          /* Disable animations */\n          @media (prefers-reduced-motion: reduce) {\n            .maximize .pushowl-bell-button,\n            .maximize .pushowl-widget-background,\n            .maximize .pushowl-simple-toast__content,\n            .minimize .pushowl-simple-toast__content,\n            .minimize .pushowl-widget-background {\n              animation-duration: 0s;\n              animation-delay: 0s;\n            }\n          }\n          @keyframes fade-out-animation {\n              0% {\n                  opacity: 1;\n                  visibility: visible;\n              }\n              100% {\n                  opacity: 0;\n                  visibility: collapse;\n              }\n          }\n          @keyframes fade-in-animation {\n              0% {\n                  opacity: 0;\n                  visibility: collapse;\n              }\n              100% {\n                  opacity: 1;\n                  visibility: visible;\n              }\n          }\n          @keyframes bg-expand-animation {\n              to {\n                  /*\n                   Setting the final position based on the position.\n                   For bottom-left it will set bottom:0; left:0;\n                   FIXME: this can be removed when bell is aligned to its container\n                  */\n                    ${d.split("-").map((e=>`${e}:0`)).join(";")};\n                  width: 100%;\n                  height: 100%;\n                  z-index: 0;\n              }\n          }\n          .pushowl-widget-node svg {\n              width: 14px;\n              height: 18px;\n              vertical-align: baseline;\n              transition: auto;\n          }\n        </style>\n        <div class="pushowl-simple-toast">\n          <button\n            class="js-pushowl-bell-button pushowl-bell-button bell-button action-button"\n            aria-label="Open"\n            aria-expanded="false"\n            aria-controls="pushowl-simple-toast-content"\n          >\n            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="22" fill="none" class="bell-icon" viewBox="0 0 18 22">\n              <path fill=${l} d="M8.533 0c-.589 0-1.066.478-1.066 1.067v1.066c0 .022 0 .044.002.066A8.535 8.535 0 0 0 0 10.667v5.584c0 1.04.843 1.882 1.882 1.882h13.302c1.04 0 1.882-.843 1.882-1.882v-5.585A8.535 8.535 0 0 0 9.598 2.2l.002-.066V1.067C9.6.477 9.122 0 8.533 0ZM8.533 21.333a2.133 2.133 0 0 0 2.133-2.133H6.4c0 1.178.955 2.133 2.133 2.133Z"/>\n            </svg>\n          </button>\n          <div class="pushowl-widget-background"></div>\n          <div\n            id="js-pushowl-simple-toast-content"\n            class="pushowl-simple-toast__content"\n          >\n            <div class="pushowl-content-upper-section">\n              <div class="pushowl-simple-toast__title"></div>\n              <button\n                class="js-pushowl-close-button action-button pushowl-close-button"\n                aria-label="Close"\n                tabindex="-1"\n                aria-hidden="true"\n                aria-expanded="false"\n                aria-controls="pushowl-simple-toast-content"\n              >\n                <svg\n                  width="12px"\n                  height="12px"\n                  viewBox="0 0 12 12"\n                  version="1.1"\n                  xmlns="http://www.w3.org/2000/svg"\n                  xmlns:xlink="http://www.w3.org/1999/xlink"\n                >\n                  <g\n                    stroke="none"\n                    stroke-width="1"\n                    fill="none"\n                    fill-rule="evenodd"\n                  >\n                    <g id="ic_close" transform="translate(-5.000000, -5.000000)">\n                      <g>\n                        <polygon\n                          points="17 6.20857143 15.7914286 5 11 9.79142857 6.20857143 5 5 6.20857143 9.79142857 11 5 15.7914286 6.20857143 17 11 12.2085714 15.7914286 17 17 15.7914286 12.2085714 11"\n                        ></polygon>\n                      </g>\n                    </g>\n                  </g>\n                </svg>\n              </button>\n            </div>\n            <div class="pushowl-simple-toast__yes-button-container">\n              <button\n                class="js-subscribe-button  pushowl-simple-toast__yes-button"\n                tabindex="-1"\n              ></button>\n            </div>\n          </div>\n        </div>\n      </div>\n    `,te(r)}}class uo extends lo{constructor(e){super(e)}_toggleState(){var e;const t=new G;var n=this.maximize;this.maximize=!this.maximize,this.toast.classList[n?"add":"remove"]("is-maximized"),n&&t.config.optin_report_enabled&&window.poAnalytics.track("FlyoutWidgetDesktopOpened");let i=this.config.desktop;const o=(null===(e=this.state.position)||void 0===e?void 0:e.default)||"bottom-left";let{left:r,right:s}=ee({position:o,device:"desktop",customConfig:i,isExpanded:n});this.toast.style.left=r,this.toast.style.right=s,this.toggleFocusableElement(this.bellButton,!n),this.toggleFocusableElement(this.closeButton,n),this.toggleFocusableElement(this.subscribeButton,n),this.bellButton.setAttribute("aria-expanded",String(n)),this.closeButton.setAttribute("aria-expanded",String(n)),this.contentWrap.setAttribute("aria-hidden",String(!n)),setTimeout((()=>{this.closeButton.style.opacity=n?"1":"0",this.bellButton.style.opacity=n?"0":"1",(n?this.title:this.bellButton).focus()}),400)}_createNode(){var e,t,n,i,o;let r=this.config.desktop,s=this.config.color;const a=(null===(e=this.state.position)||void 0===e?void 0:e.default)||"bottom-left";let{top:l,bottom:c,left:d,right:u}=ee({position:a,device:"desktop",customConfig:r,isExpanded:!1}),p=(null===(n=null===(t=this.state)||void 0===t?void 0:t.theme)||void 0===n?void 0:n.primaryColor)||"white",h=(null===(o=null===(i=this.state)||void 0===i?void 0:i.theme)||void 0===o?void 0:o.secondaryColor)||s;const m=`\n      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="22" fill="none" class="bell-icon">\n        <path fill="${p}" d="M8.533 0c-.589 0-1.066.478-1.066 1.067v1.066c0 .022 0 .044.002.066A8.535 8.535 0 0 0 0 10.667v5.584c0 1.04.843 1.882 1.882 1.882h13.302c1.04 0 1.882-.843 1.882-1.882v-5.585A8.535 8.535 0 0 0 9.598 2.2l.002-.066V1.067C9.6.477 9.122 0 8.533 0ZM8.533 21.333a2.133 2.133 0 0 0 2.133-2.133H6.4c0 1.178.955 2.133 2.133 2.133Z"/>\n      </svg>\n    `;let g;return g=`<div class="pushowl-widget-node pushowl-widget-node--desktop">\n    <style>    \n        .pushowl-simple-toast {\n            z-index: 2147483646;\n            top:${l};\n            bottom: ${c};\n            left: ${d};\n            right: ${u};\n            position: fixed;\n            height: ${r.diameter}px;\n            box-sizing: border-box;\n            background: ${h};\n            font-family: Roboto, sans-serif;\n            display: flex;\n            align-items: center;\n            box-shadow: 2px 2px 8px 0 rgba(0,0,0,0.35);\n            max-width: ${r.diameter}px;\n            transition: max-width 0.8s, left 0.6s;\n            border-radius: 12px;\n            overflow: hidden;\n        }\n\n        .pushowl-simple-toast button {\n          margin: 0 !important;\n          text-transform: none !important;\n          min-width: auto !important;\n          box-shadow: none !important;\n        }\n        \n        .is-maximized.pushowl-simple-toast {\n            max-width: 568px;\n        }\n        .is-maximized .pushowl-simple-toast__content{            \n            margin-left: 0;\n        }\n        .is-maximized .pushowl-simple-toast__title-container .bell-icon {\n          opacity: 1;\n        }\n        .pushowl-simple-toast__content {\n            display: flex;\n            align-items: center;\n            max-width: 0;\n            justify-content: space-between;\n            transition: max-width 0.8s;\n        }\n        .is-maximized .pushowl-simple-toast__content{\n          max-width: 524px;\n        }\n        .pushowl-simple-toast__title {\n            width: 282px;\n            color: ${p}; \n            font-size: 14px; \n            line-height: 14px;\n            padding-left: 8px;\n            opacity: 0;\n        }\n        .is-maximized .pushowl-simple-toast__title {         \n          opacity: 1;\n          transition: 0.25s opacity;\n        }\n        .pushowl-simple-toast__title-container{\n            display: flex;\n            align-items: center;\n            padding-left: 25px; \n            padding-right: 25px;\n        }\n        .pushowl-simple-toast__yes-button {\n            font-size: 14px;\n            line-height: 14px;\n            color: ${h};\n            background-color:${p} !important;\n            min-width: 100px;\n            cursor: pointer;\n            padding-right: 25px;\n            max-width: 150px;\n            letter-spacing: .3px;\n            text-transform: uppercase;\n            font-weight: 600;\n            border: 0;\n            flex-shrink: 0;\n            padding: 12px;\n            border-radius: 12px;\n            height: auto;\n            width: auto;\n        }\n        .pushowl-simple-toast__yes-button:hover{\n          color: ${h} !important;\n          background-color:${p} !important;\n        }\n\n        .pushowl-simple-toast__action-buttons {\n            height: 100%;\n        }\n        \n        .pushowl-simple-toast__action-buttons button {\n            padding: initial;\n            width: ${r.diameter}px;\n            height: 100%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            transition: opacity 0.3s;\n            border: 0 !important;\n            cursor: pointer !important;\n            will-change: opacity;\n            border-radius: 12px !important;\n        }\n        .pushowl-simple-toast__action-buttons .pushowl-bell-button {\n            background-color: ${h};\n            opacity: 1;\n            border-radius: 12px !important;\n            padding: 0 !important;\n        }\n        .pushowl-simple-toast__title-container .bell-icon {\n          flex-shrink: 0;\n          opacity: 0;\n          transition: 0.25s opacity;\n        }\n        .pushowl-simple-toast__action-buttons .pushowl-close-button {\n            position: absolute;\n            font-size: 16px;\n            line-height: 16px !important;\n            color: ${p};\n            background-color: ${h};\n            opacity: 0;\n        }\n        \n        .pushowl-simple-toast__action-buttons svg {\n            width: 14px;\n            height: 18px;\n            vertical-align: baseline;\n            transition: auto;\n        }\n        \n        .pushowl-bell-button svg{\n          width: 18px;\n          height: 20px;\n        }\n        .pushowl-simple-toast__action-buttons .pushowl-close-button g,\n        .pushowl-simple-toast__action-buttons .pushowl-bell-button g {\n            fill: ${p};\n            transition: auto;\n        }\n        /* Disable animations */\n        @media (prefers-reduced-motion: reduce) {\n          .pushowl-simple-toast,\n          .pushowl-simple-toast__content,\n          .is-maximized .pushowl-simple-toast__title,\n          .pushowl-simple-toast__action-buttons button,\n          .pushowl-simple-toast__title-container .bell-icon\n           {\n            transition: none;\n          }\n        }\n    </style>\n    <div class="pushowl-simple-toast">\n        <div id="pushowl-simple-toast-content" class="pushowl-simple-toast__content js-pushowl-widget-content" aria-hidden="true">\n            <div class="pushowl-simple-toast__title-container">\n                ${m}\n                <div class="pushowl-simple-toast__title" tabindex="-1"></div>\n            </div>\n            <button class="js-subscribe-button pushowl-simple-toast__yes-button" tabindex="-1" aria-hidden="true"></button>\n        </div>\n        <div class="pushowl-simple-toast__action-buttons action-button">\n            <button class="js-pushowl-close-button pushowl-close-button" aria-label="Close" tabindex="-1" aria-hidden="true"  aria-expanded="false" aria-controls="pushowl-simple-toast-content">\n              <svg width="12px" height="12px" viewBox="0 0 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                      <g transform="translate(-5.000000, -5.000000)">\n                        <g>\n                          <polygon points="17 6.20857143 15.7914286 5 11 9.79142857 6.20857143 5 5 6.20857143 9.79142857 11 5 15.7914286 6.20857143 17 11 12.2085714 15.7914286 17 17 15.7914286 12.2085714 11"></polygon>\n                        </g>\n                      </g>\n                  </g>\n              </svg>\n            </button>\n            \x3c!-- bell-buttn is kept for legacy purposes. --\x3e\n            <button class="js-pushowl-bell-button pushowl-bell-button bell-button" aria-label="Open" aria-expanded="false" aria-controls="pushowl-simple-toast-content" />\n              ${m}\n            </button>\n        </div>\n    </div>\n</div>\n        `,te(g)}}var po=Object.freeze({__proto__:null,FlyoutWidgetHandler:class{constructor(e){let t=ne()?co:uo;this.widget=new t(e)}setState(e){this.widget.setState(e)}remove(){this.widget.remove()}}})}();
