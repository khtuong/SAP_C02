/*! 
 * BuddyBoss Theme JavaScript Library 
 * @package BuddyBoss Theme 
 */
/*
	!function(d){"use strict";window.BBLMS={init:function(){this.switchLdGridList(),this.toggleTheme(),this.learnDashSidePanel(),this.lms_user_profile_js(),this.lms_single_course(),this.course_archive_js(),this.quizDetails(),this.quizUpload(),this.setElementorSpacing(),this.courseViewCookie(),this.bbStickyLdSidebar(),this.singleLesson(),this.singleTopic(),this.singleQuiz(),this.showMoreParticipants()},switchLdGridList:function(){var s=d(".bb-course-items:not(.is-cover)");if(window.sessionStorage){var e=sessionStorage.getItem("course-view");null==e&&(sessionStorage.setItem("course-view","grid"),e=sessionStorage.getItem("course-view")),d(".layout-view-course").removeClass("active"),s.removeClass("grid-view"),s.removeClass("bb-grid"),s.removeClass("list-view"),s.removeClass("bb-list"),"grid"===e?(d(".layout-view-course.layout-grid-view").addClass("active"),s.addClass("grid-view"),s.addClass("bb-grid")):(d(".layout-view-course.layout-list-view").addClass("active"),s.addClass("list-view"),s.addClass("bb-list"))}d(document).on("click",".grid-filters .layout-view-course",function(e){e.preventDefault(),s=d(".bb-course-items:not(.is-cover)"),d(this).hasClass("layout-list-view")?(window.sessionStorage&&sessionStorage.setItem("course-view","list"),d(".layout-view-course").removeClass("active"),s.removeClass("grid-view"),s.removeClass("bb-grid"),s.removeClass("list-view"),s.removeClass("bb-list"),d(".layout-view-course.layout-list-view").addClass("active"),s.addClass("list-view"),s.addClass("bb-list"),d.ajax({method:"GET",url:bs_data.ajaxurl,data:"action=buddyboss_lms_save_view&option=bb_theme_learndash_grid_list&type=list",success:function(e){}})):(window.sessionStorage&&sessionStorage.setItem("course-view","grid"),d(".layout-view-course").removeClass("active"),s.removeClass("grid-view"),s.removeClass("bb-grid"),s.removeClass("list-view"),s.removeClass("bb-list"),d(".layout-view-course.layout-grid-view").addClass("active"),s.addClass("grid-view"),s.addClass("bb-grid"),d.ajax({method:"GET",url:bs_data.ajaxurl,data:"action=buddyboss_lms_save_view&option=bb_theme_learndash_grid_list&type=grid",success:function(e){}}))})},showMoreParticipants:function(){var e=d(".lms-course-members-list .lms-course-sidebar-heading .lms-count").text(),s=2,t=d(".lms-course-members-list #buddyboss_theme_learndash_course_participants_course_id").val(),a=d(".lms-course-members-list .bb-course-member-wrap .lme-more i"),i=d(".lms-course-members-list .bb-course-member-wrap .lme-more");d(".lms-course-members-list").on("click",".bb-course-member-wrap .lme-more",function(){d(this).hasClass("loading-members")||(d(this).addClass("loading-members"),a.removeClass("bb-icon-chevron-down"),a.addClass("bb-icon-spin"),a.addClass("animate-spin"),d(".lms-course-members-list .bb-course-member-wrap .lme-less").hide(),d.ajax({method:"GET",url:bs_data.ajaxurl,data:"action=buddyboss_lms_get_course_participants&_wpnonce="+bs_data.learndash.nonce_get_courses+"&total="+e+"&page="+s+"&course="+t,success:function(e){d(".lms-course-members-list .bb-course-member-wrap .course-members-list.course-members-list-extra").show(),d(".lms-course-members-list .bb-course-member-wrap .course-members-list-extra").append(e.data.html),d(window).trigger("resize"),"false"===e.data.show_more&&d(".lms-course-members-list .bb-course-member-wrap .lme-more").remove(),s=e.data.page,0===d(".ld-sidebar-widgets").length&&d("html, body").animate({scrollTop:d(document).height()},1e3),a.addClass("bb-icon-chevron-down"),a.removeClass("bb-icon-spin"),a.removeClass("animate-spin"),i.removeClass("loading-members")}}))})},fetchCourses:function(){for(var i=d("#bb-courses-directory-form"),e=!1,s=["filter-categories","filter-instructors","search"],t=0;t<s.length;t++){var a=BBGetUrlParameter(window.location.search,s[t]),o=i.find('[name="'+s[t]+'"]').val();if(a!==o)switch(s[t]){case"filter-categories":case"filter-instructors":!a&&"all"===o||(e=!0);break;default:e=!0}if(e)break}e&&i.find('[name="current_page"]').val(1);var r=i.serialize(),n="grid";return i.find(".layout-list-view").hasClass("active")&&(n="list"),r+="&view="+n,d.ajax({method:"GET",url:bs_data.ajaxurl,data:r+"&action=buddyboss_lms_get_courses&_wpnonce="+bs_data.learndash.nonce_get_courses,success:function(e){var s=bs_data.learndash.course_archive_url;i.hasClass("bb-elementor-widget")&&(s=i.data("current_page_url"));var t=i.find('[name="current_page"]').val();if(isNaN(t)&&(t=1),1<t&&(s+="page/"+t+"/"),s+="?"+r,window.history.pushState({bblms_has_changes:!0,courses_html:e.data.html,type:i.find('[name="type"]').val()},"",s),i.find(".bs-dir-list").html(e.data.html),i.find("li.selected a span").text(e.data.count),e.data.scopes)for(var a in e.data.scopes)i.find("li#courses-"+a+" a span").text(e.data.scopes[a]).show();d(".courses-nav").find(".bb-icon-loader").remove()}}),!1},fetchCoursesPagination:function(){var i=d("#bb-courses-directory-form"),o=i.serialize(),e="list";return i.find(".layout-grid-view").hasClass("active")&&(e="grid"),o+="&view="+e,d.ajax({method:"GET",url:bs_data.ajaxurl,data:o+"&action=buddyboss_lms_get_courses&_wpnonce="+bs_data.learndash.nonce_get_courses,success:function(e){var s=bs_data.learndash.course_archive_url;i.hasClass("bb-elementor-widget")&&(s=i.data("current_page_url"));var t=i.find('[name="current_page"]').val();if(isNaN(t)&&(t=1),1<t&&(s+="page/"+t+"/"),s+="?"+o,window.history.pushState({bblms_has_changes:!0,courses_html:e.data.html,type:i.find('[name="type"]').val()},"",s),i.find(".bs-dir-list").html(e.data.html),i.find("li.selected a span").text(e.data.count),e.data.scopes)for(var a in e.data.scopes)i.find("li#courses-"+a+" a span").text(e.data.scopes[a]).show();d(".courses-nav").find(".bb-icon-loader").remove()}}),!1},course_archive_js:function(){d(document).on("change","#bb-courses-directory-form input[type=checkbox]",function(e){e.preventDefault(),window.BBLMS.fetchCourses()}),window.onpopstate=function(e){if(e.state&&(!!e.state.hasOwnProperty("bblms_has_changes")&&e.state.bblms_has_changes)){var s=d("#bb-courses-directory-form");s.find(".bs-dir-list").html(e.state.courses_html),s.find('[name="type"]').val(e.state.type),s.find(".component-navigation > li").each(function(){d(this).removeClass("selected"),BBGetUrlParameter(d(this).find(" > a").attr("href"),"type")===e.state.type&&d(this).addClass("selected")})}},d(document).on("click","#bb-course-list-grid-filters .grid-filters a",function(e){e.preventDefault(),d("#bb-course-list-grid-filters .grid-filters a").removeClass("active"),d(e.currentTarget).addClass("active");var s=d(e.currentTarget).data("view"),t=d(".ld-course-list-content");t.hasClass("list-view")&&t.removeClass("list-view"),t.hasClass("grid-view")&&t.removeClass("grid-view"),t.addClass(s+"-view"),d.ajax({method:"GET",url:bs_data.ajaxurl,data:"action=buddyboss_lms_save_view&option=bb_theme_learndash_grid_list&type="+s,success:function(e){}})}),d(document).ready(function(){if(d("body #bb-course-list-grid-filters").length){var e="";e=d("#bb-course-list-grid-filters .grid-filters .layout-grid-view").hasClass("active")?"grid-view":"list-view",d(".ld-course-list-content").addClass(e)}}),d(document).on("change","#bb-courses-directory-form [name='orderby'], #bb-courses-directory-form [name='filter-categories'], #bb-courses-directory-form [name='filter-instructors']",function(e){e.preventDefault(),window.BBLMS.fetchCourses()}),d(document).on("click","#bb-courses-directory-form .bs-sort-button",function(e){e.preventDefault(),e.currentTarget.classList.toggle("active"),d("#bs-courses-order-by").toggleClass("open")}),d(document).on("click","#bb-courses-directory-form .bb-lms-pagination a.page-numbers",function(e){e.preventDefault();var s=1,t=d(this).attr("href").split("/");if(0<t.length)for(var a=0;a<t.length;a++)if("page"===t[a]){s=t[a+1];break}d(this).closest("form").find('[name="current_page"]').val(s),window.BBLMS.fetchCoursesPagination()}),d(document).on("click","#bb-courses-directory-form .component-navigation a",function(e){e.preventDefault(),d(this).closest(".component-navigation").find("> li").removeClass("selected"),d(this).closest(".component-navigation").find("> li a span").hide(),d(this).closest(".component-navigation").find("> li a span").text(""),d(this).closest("li").addClass("selected").append('<i class="bb-icon-loader animate-spin"></i>'),d(this).closest("li").find("> a span").text(""),d(this).closest("li").find("> a span").show();var s=BBGetUrlParameter(d(this).attr("href"),"type");d(this).closest("form").find('[name="type"]').val(s),d(this).closest("form").find('[name="current_page"]').val(1),window.BBLMS.fetchCourses()}),document.addEventListener("click",function(e){var s=d("#course-order-dropdown"),t=e.target;if(s===t&&s.contains(t))return!1;for(var a=d("#bb-courses-directory-form .bs-dropdown"),i=d("#bb-courses-directory-form .bs-dropdown-link"),o=0;o<i.length;o++)i[o]===t||i[o].contains(t)||i[o].classList.remove("active");for(o=0;o<a.length;o++)a[o]!=t.parentElement.nextElementSibling&&a[o].classList.remove("open")}),d("#bb-courses-directory-form").on("submit",function(e){return window.BBLMS.fetchCourses(),!1})},toggleTheme:function(){d(document).on("click","#bb-toggle-theme",function(e){e.preventDefault();var s="";d("body").hasClass("bb-dark-theme")?(d.removeCookie("bbtheme",{path:"/"}),d("body").removeClass("bb-dark-theme")):(d.cookie("bbtheme","dark",{path:"/"}),d("body").addClass("bb-dark-theme"),s="dark"),"undefined"!=typeof toggle_theme_ajax&&null!=toggle_theme_ajax&&toggle_theme_ajax.abort();var t={action:"buddyboss_lms_toggle_theme_color",color:s};"undefined"!=typeof toggle_theme_ajax&&null!=toggle_theme_ajax&&(toggle_theme_ajax=d.post(ajaxurl,t,function(e){}))})},learnDashSidePanel:function(){d(document).on("click",".header-maximize-link",function(e){e.preventDefault(),d("body").addClass("lms-side-panel-close"),d(".lms-topic-sidebar-wrapper").addClass("lms-topic-sidebar-close"),d.cookie("lessonpanel","closed",{path:"/"})}),d(document).on("click",".header-minimize-link",function(e){e.preventDefault(),d("body").removeClass("lms-side-panel-close"),d(".lms-topic-sidebar-wrapper").removeClass("lms-topic-sidebar-close"),d.removeCookie("lessonpanel",{path:"/"})}),d(window).width()<768&&(d("body").addClass("lms-side-panel-close"),d(".lms-topic-sidebar-wrapper").addClass("lms-topic-sidebar-close"),d(document).on("click",".header-minimize-link",function(e){e.preventDefault(),d("body").addClass("lms-side-panel-close-sm")}),d(document).click(function(e){var s=d(".header-minimize-link");s.is(e.target)||0!==s.has(e.target).length||d("body").removeClass("lms-side-panel-close-sm")})),d(window).on("resize",function(){d(window).width()<768&&d(document).click(function(e){var s=d(".header-minimize-link");s.is(e.target)||0!==s.has(e.target).length||d("body").removeClass("lms-side-panel-close-sm")})})},lms_course_single_js:function(){d(document).on("click",".learndash-course-single-nav",function(e){e.preventDefault(),d("ul.learndash-course-single-main-nav").find("li.current.selected").removeClass("current").removeClass("selected");var s=d(e.currentTarget).closest("li");s.addClass("current"),s.addClass("selected");var t=d(e.currentTarget).data("tab"),a=d(".learndash-course-single-tab-content");d.each(a,function(e){var s=d(this);s.data("tab")==t?s.removeClass("hide"):s.addClass("hide")})})},lms_single_course:function(){function e(){var e=d(".bb-learndash-banner").height(),s=d(".bb-thumbnail-preview .bb-preview-course-link-wrap");if(s.length)var t=s.height();else t=0;var a=e/2+t/2;820<d(window).width()&&d(".bb-single-course-sidebar.bb-preview-wrap").css({"margin-top":"-"+a+"px"})}function s(){var e=d("#main").width();d(".bb-learndash-banner .bb-course-banner-info.container").width(e)}d(".bb-course-video-overlay").magnificPopup({fixedBgPos:!0,fixedContentPos:!0,items:{src:".bb_course_video_details",type:"inline"},callbacks:{open:function(){d.magnificPopup.instance.close=function(){d(".mfp-container .mfp-content .bb_course_video_details video".length)&&(d("video").trigger("pause"),d.magnificPopup.proto.close.call(this))}}}}),e(),s(),d(window).on("resize",function(){s(),e()}),d(".bb-toggle-panel").on("click",function(e){e.preventDefault(),setTimeout(function(){s()},300),setTimeout(function(){s()},600)}),d(".lms-topic-sidebar-wrapper .lms-toggle-lesson").on("click",function(){setTimeout(function(){d(window).trigger("resize")},300)})},lms_user_profile_js:function(){d(document).on("click",".bb-lms-user-profile-tab",function(e){e.preventDefault(),d("ul.bb-lms-user-profile-tabs").find("li.current.selected").removeClass("current").removeClass("selected");var s=d(e.currentTarget).closest("li");s.addClass("current"),s.addClass("selected");var t=d(e.currentTarget).data("tab"),a=d(".bb-lms-user-profile-tab-content");d.each(a,function(e){var s=d(this);s.data("tab")==t?s.removeClass("hide"):s.addClass("hide")})})},quizDetails:function(){if(d("#bb-lms-quiz-id").length){var e=d("#bb-lms-quiz-id").val();d("div.quiz_progress_container").insertBefore(d(".wpProQuiz_results .wpProQuiz_resultTable")),d("#wpProQuiz_"+e).on("learndash-quiz-init",function(){})}},ajaxCompleteProcess:function(){d(document).ajaxComplete(function(e,s,t){if((t.data.indexOf("action=wp_pro_quiz_load_quiz_data")||t.data.indexOf("action=wp_pro_quiz_completed_quiz"))&&t.data&&""!=t.data){var a=t.data.split("&"),i="";for(var o in a)if(-1!=a[o].indexOf("action")){i=void 0!==(i=a[o].split("="))[1]?i[1]:"";break}if(""!=i&&"wp_pro_quiz_load_quiz_data"==i&&d(".wpProQuiz_resultTable").length){d(".bb_avg_progress").show();var r=new ProgressBar.Path("#bb_avg_shape",{duration:3e3,from:{color:"#ECCBFF",width:8},to:{color:"#ECCBFF",width:8},easing:"easeInOut",step:function(e,s){s.path.setAttribute("stroke",e.color),s.path.setAttribute("stroke-width",e.width)}}),n=s.responseJSON.averageResult;n=0<n?-n/100:0,r.animate(n)}if(""!=i&&"wp_pro_quiz_completed_quiz"==i&&d(".wpProQuiz_resultTable").length){a=decodeURIComponent(t.data).split("&");var l="";for(var o in a)if(-1!=a[o].indexOf("results")){l=void 0!==(l=a[o].split("="))[1]?l[1]:"",l=JSON.parse(l);break}void 0!==l.comp.result&&(l=l.comp.result);var c=new ProgressBar.Path("#quiz_shape_progress",{duration:3e3,from:{color:"#00A2FF",width:8},to:{color:"#7FE0FF",width:8},easing:"easeInOut",step:function(e,s){s.path.setAttribute("stroke",e.color),s.path.setAttribute("stroke-width",e.width)}});jQuery(".bb_progressbar_label").text(l+"%"),jQuery(".bb_progressbar_points").text(jQuery(".wpProQuiz_points").text()),0<l&&(l=-l/100),c.animate(l)}}})},quizUpload:function(){function e(){d("input.wpProQuiz_upload_essay[type=file]:not(.styled)").each(function(){var e=d(this),s=e.attr("id");e.addClass("styled"),e.after('<label for="'+s+'">Choose a file</label>')}),d("input.wpProQuiz_upload_essay[type=file]").change(function(e){var s=d(this);s.next().html(s.val());0===s.val().length?s.next().html("Choose a file"):s.next().html(s.val().replace(/C:\\fakepath\\/i,""))})}e(),d(document).ajaxComplete(function(){e()})},courseViewCookie:function(){d("#bb-courses-directory-form .layout-grid-view").click(function(){d.cookie("courseview","grid")}),d("#bb-courses-directory-form .layout-list-view").click(function(){d.cookie("courseview","list")})},bbStickyLdSidebar:function(){var e=d("#masthead").outerHeight();768<d(window).width()&&0==d(".bb-ld-sticky-sidebar .ld-sidebar-widgets").length&&(d(".bb-ld-sticky-sidebar").stick_in_parent({offset_top:e+45}),d("body").hasClass("sticky-header")?d(".lms-topic-sidebar-data").stick_in_parent({offset_top:e+30}):d(".lms-topic-sidebar-data").stick_in_parent({offset_top:30})),d(window).on("resize",function(){768<d(window).width()&&0==d(".bb-ld-sticky-sidebar .ld-sidebar-widgets").length?d(".bb-ld-sticky-sidebar").stick_in_parent({offset_top:e+45}):(d(".bb-ld-sticky-sidebar").trigger("sticky_kit:detach"),d(".lms-topic-sidebar-data").trigger("sticky_kit:detach"))}),0<d(".wpProQuiz_matrixSortString").length&&d("html").addClass("quiz-sort")},setElementorSpacing:function(){if(0<d(".elementor-location-header").length){var e=d(".elementor-location-header").outerHeight();d(".lms-topic-sidebar-wrapper, #learndash-page-content").css({"min-height":"calc(100vh - "+e+"px)"})}},showQuizNavigation:function(){var e=d(".wpProQuiz_list").find(".wpProQuiz_listItem"),s=d("#bb-lms-quiz-navigation");if(e.length&&s.length){for(var t="<ul>",a=1;a<=e.length;a++)t+='<li><a href="#" class="bb-lms-quiz-questions" data-index="'+(a-1)+'">'+a+"</a></li>";t+="</ul>",s.html(t)}},StyleInputQuestion:function(){function e(){d('.wpProQuiz_questionInput:not([type="text"]):not([type="email"]):not([type="tel"]):not([type="date"])').each(function(){d(this).hasClass("bbstyled")||d(this).addClass("bbstyled").after('<span class="input-style"></span>')})}e(),d(document).ajaxComplete(function(){e()})},singleLesson:function(){document.getElementById("learndash-page-content")&&d("#learndash-page-content").scroll(function(){d(window).trigger("resize")})},singleTopic:function(){var e=d("body.single-sfwd-topic .lms-topic-item.current");e.length&&(e.closest("div").show(),e.parents().closest("li").removeClass("lms-lesson-turnover"));for(var s=[".sfwd-lessons-template-default",".sfwd-topic-template-default",".sfwd-quiz-template-default"],t=0;t<s.length;t++)0<d(s[t]+" #learndash-page-content #learndash-content #learndash-page-content .learndash_content_wrap #comments.comments-area").length&&d(s[t]+" #learndash-page-content #learndash-content #learndash-page-content .learndash_content_wrap #comments.comments-area").remove(),0<d(s[t]+" #learndash-page-content #learndash-content #learndash-page-content .learndash_content_wrap .ld-focus-comments").length&&d(s[t]+" #learndash-page-content #learndash-content #learndash-page-content .learndash_content_wrap .ld-focus-comments").remove()},singleQuiz:function(){var e=d("body.single-sfwd-quiz .lms-quiz-item.current");e.length&&(e.closest("div").show(),e.parents().closest("li").removeClass("lms-lesson-turnover"))}},d(document).ready(function(){window.BBLMS.init()})}(jQuery);
*/

//import learndash_sidebar from "./learndash-sidebar";

( function ( $ ) {

    "use strict";

    window.BBLMS = {
        init: function () {
            this.switchLdGridList();
            this.toggleTheme();
            this.learnDashSidePanel();
            this.lms_user_profile_js();
            //this.lms_course_single_js();
            this.lms_single_course();
            this.course_archive_js();
            //this.quiz_progress();
            this.quizDetails();
            //this.ajaxCompleteProcess();
            this.quizUpload();
            this.setElementorSpacing();
            this.courseViewCookie();
            this.bbStickyLdSidebar();
            this.StyleInputQuestion();
            this.singleLesson();
            this.singleTopic();
            this.singleQuiz();
            this.showMoreParticipants();
        },

        switchLdGridList: function() {

            var courseLoopSelector = $( '.bb-course-items:not(.is-cover)' );
            if ( window.sessionStorage ) {
                var getView = sessionStorage.getItem( 'course-view' );
                if ( typeof getView === 'undefined' || getView === null ) {
                    sessionStorage.setItem( 'course-view', 'grid' );
                    getView = sessionStorage.getItem( 'course-view' );
                }

                $( '.layout-view-course' ).removeClass( 'active' );
                courseLoopSelector.removeClass( 'grid-view' );
                courseLoopSelector.removeClass( 'bb-grid' );
                courseLoopSelector.removeClass( 'list-view' );
                courseLoopSelector.removeClass( 'bb-list' );

                if ( 'grid' === getView ) {
                    $( '.layout-view-course.layout-grid-view' ).addClass( 'active' );
                    courseLoopSelector.addClass( 'grid-view' );
                    courseLoopSelector.addClass( 'bb-grid' );
                } else {
                    $( '.layout-view-course.layout-list-view' ).addClass( 'active' );
                    courseLoopSelector.addClass( 'list-view' );
                    courseLoopSelector.addClass( 'bb-list' );
                }
            }
            $( document ).on('click', '.grid-filters .layout-view-course', function(e) {
                e.preventDefault();
                courseLoopSelector = $( '.bb-course-items:not(.is-cover)' );
                if ( $(this).hasClass('layout-list-view') ) {
                    if ( window.sessionStorage ) {
                        sessionStorage.setItem('course-view', 'list');
                    }
                    $( '.layout-view-course' ).removeClass( 'active' );
                    courseLoopSelector.removeClass( 'grid-view' );
                    courseLoopSelector.removeClass( 'bb-grid' );
                    courseLoopSelector.removeClass( 'list-view' );
                    courseLoopSelector.removeClass( 'bb-list' );
                    $( '.layout-view-course.layout-list-view' ).addClass( 'active' );
                    courseLoopSelector.addClass( 'list-view' );
                    courseLoopSelector.addClass( 'bb-list' );
                    $.ajax({
                        method  : 'GET',
                        url     : bs_data.ajaxurl,
                        data    : 'action=buddyboss_lms_save_view&option=bb_theme_learndash_grid_list&type=list',
                        success : function ( response ) {
                        }
                    });
                } else {
                    if ( window.sessionStorage ) {
                        sessionStorage.setItem('course-view', 'grid');
                    }
                    $( '.layout-view-course' ).removeClass( 'active' );
                    courseLoopSelector.removeClass( 'grid-view' );
                    courseLoopSelector.removeClass( 'bb-grid' );
                    courseLoopSelector.removeClass( 'list-view' );
                    courseLoopSelector.removeClass( 'bb-list' );
                    $( '.layout-view-course.layout-grid-view' ).addClass( 'active' );
                    courseLoopSelector.addClass( 'grid-view' );
                    courseLoopSelector.addClass( 'bb-grid' );
                    $.ajax({
                        method  : 'GET',
                        url     : bs_data.ajaxurl,
                        data    : 'action=buddyboss_lms_save_view&option=bb_theme_learndash_grid_list&type=grid',
                        success : function ( response ) {
                        }
                    });
                }
            });
        },

        showMoreParticipants: function() {

            var total            = $( '.lms-course-members-list .lms-course-sidebar-heading .lms-count' ).text();
            var paged            = 2;
            var course           = $( '.lms-course-members-list #buddyboss_theme_learndash_course_participants_course_id' ).val();
            var spinnerSelector  = $( '.lms-course-members-list .bb-course-member-wrap .lme-more i' );
            var viewMoreSelector = $( '.lms-course-members-list .bb-course-member-wrap .lme-more' );

            $( '.lms-course-members-list' ).on( 'click', '.bb-course-member-wrap .lme-more', function() {

                if ( $( this ).hasClass( 'loading-members' ) ) {
                    return;
                }

                $( this ).addClass( 'loading-members' );

                spinnerSelector.removeClass( 'bb-icon-chevron-down' );
                spinnerSelector.addClass( 'bb-icon-spin' );
                spinnerSelector.addClass( 'animate-spin' );
                $( '.lms-course-members-list .bb-course-member-wrap .lme-less' ).hide();

                $.ajax({
                    method  : 'GET',
                    url     : bs_data.ajaxurl,
                    data    : 'action=buddyboss_lms_get_course_participants&_wpnonce=' + bs_data.learndash.nonce_get_courses + '&total=' + total + '&page=' + paged + '&course=' + course,
                    success : function ( response ) {
                        $( '.lms-course-members-list .bb-course-member-wrap .course-members-list.course-members-list-extra' ).show();
                        $( '.lms-course-members-list .bb-course-member-wrap .course-members-list-extra' ).append( response.data.html );
                        $(window).trigger('resize');
                        if ( 'false' === response.data.show_more ) {
                            $( '.lms-course-members-list .bb-course-member-wrap .lme-more' ).remove();
                        }
                        paged = response.data.page;
                        if ( $( '.ld-sidebar-widgets' ).length === 0 ) {
                            $( 'html, body' ).animate({ scrollTop: $(document).height() }, 1000);
                        }
                        spinnerSelector.addClass( 'bb-icon-chevron-down' );
                        spinnerSelector.removeClass( 'bb-icon-spin' );
                        spinnerSelector.removeClass( 'animate-spin' );
                        viewMoreSelector.removeClass( 'loading-members' );
                    }
                });
            } );

        },

        fetchCourses: function() {
            var $form = $( '#bb-courses-directory-form' );

            var reset_pagination = false;

            //reset pagintion if categories or instructor filters are changed.
            //reset pagination if search term has changed
            var resetting_fields = [ 'filter-categories', 'filter-instructors', 'search' ];
            for ( var i = 0; i < resetting_fields.length; i++ ) {
                var prev_val = BBGetUrlParameter( window.location.search, resetting_fields[ i ] );
                var new_val = $form.find('[name="'+ resetting_fields[ i ] +'"]').val();

                if ( prev_val !== new_val ) {

                    switch ( resetting_fields[ i ] ) {
                        case 'filter-categories':
                        case 'filter-instructors':
                            if ( !prev_val && new_val === 'all' ) {
                                //hasn't really changed
                            } else {
                                reset_pagination = true;
                            }
                            break;
                        default:
                            reset_pagination = true;
                            break;
                    }

                }

                if ( reset_pagination ) {
                    break;
                }
            }

            if ( reset_pagination ) {
                $form.find( '[name="current_page"]' ).val(1);
            }

            var data = $form.serialize();

            //view
            var view = 'grid';
            if ( $form.find( '.layout-list-view' ).hasClass( 'active' ) ) {
                view = 'list';
            }
            data += '&view=' + view;

            $.ajax({
                method  : 'GET',
                url     : bs_data.ajaxurl,
                data    : data + '&action=buddyboss_lms_get_courses&_wpnonce=' + bs_data.learndash.nonce_get_courses,
                success : function ( response ) {
                    //update url
                    var new_url = bs_data.learndash.course_archive_url;
                    if ( $form.hasClass('bb-elementor-widget') ) {
                        new_url = $form.data('current_page_url');
                    }

                    var current_page = $form.find( '[name="current_page"]' ).val();
                    if ( isNaN( current_page ) ) {
                        current_page = 1;
                    }
                    if ( current_page > 1 ) {
                        new_url += 'page/' + current_page + '/';
                    }

                    new_url += '?' + data;

                    window.history.pushState( { 'bblms_has_changes' : true, 'courses_html' : response.data.html, 'type' : $form.find( '[name="type"]' ).val() }, "", new_url );

                    //update html
                    $form.find('.bs-dir-list').html( response.data.html );
                    //update count
                    $form.find('li.selected a span').text( response.data.count );

                    if ( response.data.scopes ) {
                        for (var i in response.data.scopes) {
                            $form.find('li#courses-' + i + ' a span').text( response.data.scopes[i] ).show();
                        }
                    }

                    $('.courses-nav').find('.bb-icon-loader').remove();
                }
            });

            return false;
            //$( '#bb-courses-directory-form' ).submit();
        },

        fetchCoursesPagination: function() {
            var $form = $( '#bb-courses-directory-form' );
            var data = $form.serialize();

            //view
            var view = 'list';
            if ( $form.find( '.layout-grid-view' ).hasClass( 'active' ) ) {
                view = 'grid';
            }
            data += '&view=' + view;

            $.ajax({
                method  : 'GET',
                url     : bs_data.ajaxurl,
                data    : data + '&action=buddyboss_lms_get_courses&_wpnonce=' + bs_data.learndash.nonce_get_courses,
                success : function ( response ) {
                    //update url
                    var new_url = bs_data.learndash.course_archive_url;
                    if ( $form.hasClass('bb-elementor-widget') ) {
                        new_url = $form.data('current_page_url');
                    }

                    var current_page = $form.find( '[name="current_page"]' ).val();
                    if ( isNaN( current_page ) ) {
                        current_page = 1;
                    }
                    if ( current_page > 1 ) {
                        new_url += 'page/' + current_page + '/';
                    }

                    new_url += '?' + data;

                    window.history.pushState( { 'bblms_has_changes' : true, 'courses_html' : response.data.html, 'type' : $form.find( '[name="type"]' ).val() }, "", new_url );

                    //update html
                    $form.find('.bs-dir-list').html( response.data.html );

                    //update count
                    $form.find('li.selected a span').text( response.data.count );

                    if ( response.data.scopes ) {
                        for (var i in response.data.scopes) {
                            $form.find('li#courses-' + i + ' a span').text( response.data.scopes[i] ).show();
                        }
                    }
                    $('.courses-nav').find('.bb-icon-loader').remove();
                }
            });

            return false;
            //$( '#bb-courses-directory-form' ).submit();
        },

        course_archive_js: function() {

            $( document ).on( 'change', '#bb-courses-directory-form input[type=checkbox]', function ( e ) {
                e.preventDefault();
                window.BBLMS.fetchCourses();
            } );

            window.onpopstate = function(e) {
                if ( !e.state ) {
                    return;
                }

                var has_changes = e.state.hasOwnProperty( 'bblms_has_changes' ) ? e.state.bblms_has_changes : false;
                if ( has_changes ) {
                    var $form = $('#bb-courses-directory-form');

                    //update courses html
                    $form.find( '.bs-dir-list' ).html( e.state.courses_html );

                    //highlight correct nav
                    $form.find( '[name="type"]' ).val( e.state.type );

                    $form.find( '.component-navigation > li').each(function(){
                        $(this).removeClass('selected');
                        var type = BBGetUrlParameter( $(this).find(' > a').attr('href'), 'type' );
                        if ( type === e.state.type ) {
                            $(this).addClass('selected');
                        }
                    });
                }
            };

            $( document ).on( 'click', '#bb-course-list-grid-filters .grid-filters a', function ( e ) {
                e.preventDefault();
                $( '#bb-course-list-grid-filters .grid-filters a' ).removeClass( 'active' );
                $( e.currentTarget ).addClass( 'active' );
                var view = $( e.currentTarget ).data( 'view' );
                var selector = $('.ld-course-list-content');
                if ( selector.hasClass('list-view') ) {
                    selector.removeClass('list-view');
                }

                if ( selector.hasClass('grid-view') ) {
                    selector.removeClass('grid-view');
                }

                selector.addClass( view + '-view');

                $.ajax({
                    method  : 'GET',
                    url     : bs_data.ajaxurl,
                    data    : 'action=buddyboss_lms_save_view&option=bb_theme_learndash_grid_list&type=' + view,
                    success : function ( response ) {
                    }
                });

            } );

            $( document ).ready(function() {
                if ( $('body #bb-course-list-grid-filters').length ) {
                    var active = '';
                    if ($('#bb-course-list-grid-filters .grid-filters .layout-grid-view').hasClass('active')) {
                        active = 'grid-view';
                    } else {
                        active = 'list-view';
                    }
                    $('.ld-course-list-content').addClass(active);
                }
            });

            $( document ).on( 'change', '#bb-courses-directory-form [name=\'orderby\'], #bb-courses-directory-form [name=\'filter-categories\'], #bb-courses-directory-form [name=\'filter-instructors\']', function ( e ) {
                e.preventDefault();
                window.BBLMS.fetchCourses();
            } );

            $( document ).on( 'click', '#bb-courses-directory-form .bs-sort-button', function ( e ) {
                e.preventDefault();
                e.currentTarget.classList.toggle( 'active' );
                $( '#bs-courses-order-by' ).toggleClass( 'open' );
            } );

            $( document ).on( 'click', '#bb-courses-directory-form .bb-lms-pagination a.page-numbers', function ( e ) {
                e.preventDefault();
                var page_number = 1;
                var url_parts = $(this).attr('href').split('/');
                if ( url_parts.length > 0 ) {
                    for ( var i = 0; i < url_parts.length; i++ ) {
                        if ( 'page' === url_parts[i] ) {
                            page_number = url_parts[ i + 1 ];
                            break;
                        }
                    }
                }

                $(this).closest( 'form' ).find( '[name="current_page"]' ).val( page_number );
                window.BBLMS.fetchCoursesPagination();
            } );

            $( document ).on( 'click', '#bb-courses-directory-form .component-navigation a', function ( e ) {
                e.preventDefault();

                $(this).closest( '.component-navigation').find( '> li' ).removeClass('selected');
                $(this).closest( '.component-navigation').find( '> li a span' ).hide();
                $(this).closest( '.component-navigation').find( '> li a span' ).text('');
                $(this).closest('li').addClass('selected').append('<i class="bb-icon-loader animate-spin"></i>');
                $(this).closest('li').find( '> a span' ).text('');
                $(this).closest('li').find( '> a span' ).show();

                var type = BBGetUrlParameter( $(this).attr('href'), 'type' );
                $(this).closest( 'form' ).find( '[name="type"]' ).val( type );

                //resetting the page number if important, as sometimes 'all courses' can have more items than 'my courses'
                $(this).closest( 'form' ).find( '[name="current_page"]' ).val( 1 );
                window.BBLMS.fetchCourses();
            } );

            document.addEventListener( 'click', function ( e ) {
                var openFilterDropdown = $( '#course-order-dropdown' );
                var target = e.target;
                if ( openFilterDropdown === target && openFilterDropdown.contains( target ) ) {
                    return false;
                }

                var dropdowns = $( '#bb-courses-directory-form .bs-dropdown' );
                var download_link = $( '#bb-courses-directory-form .bs-dropdown-link' );

                for ( var i = 0; i < download_link.length; i++ ) {
                    if ( download_link[i] !== target && !download_link[i].contains( target ) ) {
                        download_link[i].classList.remove( 'active' );
                    }
                }

                for ( var i = 0; i < dropdowns.length; i++ ) {
                    if ( dropdowns[i] != target.parentElement.nextElementSibling ) {
                        dropdowns[i].classList.remove( 'open' );
                    }
                }
            } );

            $('#bb-courses-directory-form').on( 'submit', function(e){
                window.BBLMS.fetchCourses();
                return false;
            } );

        },

        toggleTheme: function() {

            $( document ).on( 'click', '#bb-toggle-theme', function ( e ) {
                e.preventDefault();
                var color = '';
                if ( !$( 'body' ).hasClass( 'bb-dark-theme' ) ) {
                    $.cookie( 'bbtheme', 'dark', { path: '/' });
                    $( 'body' ).addClass( 'bb-dark-theme' );
                    color = 'dark';
                } else {
                    $.removeCookie('bbtheme', { path: '/' });
                    $( 'body' ).removeClass( 'bb-dark-theme' );
                }

                if ( typeof( toggle_theme_ajax ) != 'undefined' && toggle_theme_ajax != null ) {
                    toggle_theme_ajax.abort();
                }

                var data = {
                    'action': 'buddyboss_lms_toggle_theme_color',
                    'color': color
                };

                // since 2.8 ajaxurl is always defined in the admin header and points to admin-ajax.php
                if ( typeof( toggle_theme_ajax ) != 'undefined' && toggle_theme_ajax != null ) {
                    toggle_theme_ajax = $.post( ajaxurl, data, function ( response ) {} );
                }
            } );
        },

        learnDashSidePanel: function() {

            $( document ).on( 'click', '.header-maximize-link', function ( e ) {
                e.preventDefault();
                $( 'body' ).addClass( 'lms-side-panel-close' );
                $( '.lms-topic-sidebar-wrapper' ).addClass( 'lms-topic-sidebar-close' );
                $.cookie( 'lessonpanel', 'closed', { path: '/' });
            } );

            $( document ).on( 'click', '.header-minimize-link', function ( e ) {
                e.preventDefault();
                $( 'body' ).removeClass( 'lms-side-panel-close' );
                $( '.lms-topic-sidebar-wrapper' ).removeClass( 'lms-topic-sidebar-close' );
                $.removeCookie('lessonpanel', { path: '/' });
            } );

            if ( $( window ).width() < 768 ) {
                $( 'body' ).addClass( 'lms-side-panel-close' );
                $( '.lms-topic-sidebar-wrapper' ).addClass( 'lms-topic-sidebar-close' );

                $( document ).on( 'click', '.header-minimize-link', function ( e ) {
                    e.preventDefault();
                    $( 'body' ).addClass( 'lms-side-panel-close-sm' );
                } );

                $( document ).click( function(e) {
                    var container = $( '.header-minimize-link' );
                    if ( !container.is( e.target ) && container.has( e.target ).length === 0 ) {
                        $( 'body' ).removeClass( 'lms-side-panel-close-sm' );
                    }
                } );
            }

            $( window ).on( 'resize', function () {
                if ( $( window ).width() < 768 ) {
                    $( document ).click( function(e) {
                        var container = $( '.header-minimize-link' );
                        if ( !container.is( e.target ) && container.has( e.target ).length === 0 ) {
                            $( 'body' ).removeClass( 'lms-side-panel-close-sm' );
                        }
                    } );
                }
            } );
        },

        lms_course_single_js: function() {
            $( document ).on( 'click', '.learndash-course-single-nav', function ( e ) {
                e.preventDefault();
                $( 'ul.learndash-course-single-main-nav' ).find( 'li.current.selected' ).removeClass( 'current' ).removeClass( 'selected' );

                var li = $( e.currentTarget ).closest( 'li' );
                li.addClass( 'current' );
                li.addClass( 'selected' );

                var currentTab = $( e.currentTarget );
                var tab_to_change = currentTab.data( 'tab' );

                var content_elems = $( '.learndash-course-single-tab-content' );
                $.each( content_elems, function ( elem ) {
                    var _this = $( this );
                    if ( _this.data( 'tab' ) == tab_to_change ) {
                        _this.removeClass( 'hide' );
                    } else {
                        _this.addClass( 'hide' );
                    }
                } );

            } );
        },

        lms_single_course: function() {
            $( '.bb-course-video-overlay' ).magnificPopup( {
                fixedBgPos: true,
                fixedContentPos: true,
                items: {
                    src: '.bb_course_video_details',
                    type: 'inline'
                },
                callbacks: {
                    open: function () {
                        // Pause the video if someone click on the close button of the magnificPopup.
                        $.magnificPopup.instance.close = function () {
                            if ($('.mfp-container .mfp-content .bb_course_video_details video'.length)) {
                                $('video').trigger('pause');
                                $.magnificPopup.proto.close.call(this);
                            }
                        };
                    }
                }
            } );

            function sideBarPosition() {
                var courseBannerHeight = $( '.bb-learndash-banner' ).height();
                var courseBannerVideo = $( '.bb-thumbnail-preview .bb-preview-course-link-wrap' );
                if ( courseBannerVideo.length ) {
                    var thumbnailContainerHeight = courseBannerVideo.height();
                } else {
                    var thumbnailContainerHeight = 0;
                }
                var sidebarOffset = ( courseBannerHeight/2 ) + ( thumbnailContainerHeight/2 );
                if ( $(window).width() > 820 ) {
                    $( '.bb-single-course-sidebar.bb-preview-wrap' ).css( { 'margin-top' : '-' + sidebarOffset + 'px' } );
                }
            }

            function courseBanner() {
                var mainWidth = $( '#main' ).width();
                $( '.bb-learndash-banner .bb-course-banner-info.container' ).width( mainWidth );
            }

            sideBarPosition();
            courseBanner();

            $( window ).on( 'resize', function () {
                courseBanner();
                sideBarPosition();
            } );

            $( '.bb-toggle-panel' ).on( 'click', function(e) {
                e.preventDefault();

                setTimeout(function(){
                    courseBanner();
                },300);
                setTimeout(function(){
                    courseBanner();
                },600);
            } );

            $('.lms-topic-sidebar-wrapper .lms-toggle-lesson').on('click', function() {
                setTimeout(function(){ $(window).trigger('resize'); }, 300 );
            });
        },

        lms_user_profile_js: function() {
            $( document ).on( 'click', '.bb-lms-user-profile-tab', function ( e ) {
                e.preventDefault();
                $( 'ul.bb-lms-user-profile-tabs' ).find( 'li.current.selected' ).removeClass( 'current' ).removeClass( 'selected' );

                var li = $( e.currentTarget ).closest( 'li' );
                li.addClass( 'current' );
                li.addClass( 'selected' );

                var currentTab = $( e.currentTarget );
                var tab_to_change = currentTab.data( 'tab' );

                var content_elems = $( '.bb-lms-user-profile-tab-content' );
                $.each( content_elems, function ( elem ) {
                    var _this = $( this );
                    if ( _this.data( 'tab' ) == tab_to_change ) {
                        _this.removeClass( 'hide' );
                    } else {
                        _this.addClass( 'hide' );
                    }
                } );

            } );
        },

        quizDetails: function() {

            if ( $( '#bb-lms-quiz-id' ).length ) {
                var quiz_id = $('#bb-lms-quiz-id').val();

                $( 'div.quiz_progress_container' ).insertBefore( $( '.wpProQuiz_results .wpProQuiz_resultTable' ) );

                $('#wpProQuiz_' + quiz_id).on('learndash-quiz-init', function () {
                    // $( document ).find( 'input[name="startQuiz"]' ).click( function () {
                    //     BBLMS.showQuizNavigation();
                    // } );
                    //
                    // $( document ).on( 'click', '.bb-lms-quiz-questions', function ( e ) {
                    //     e.preventDefault();
                    //     var index = $( e.currentTarget ).data( 'index' );
                    //     if ( typeof index !== 'undefined' ) {
                    //         $( '#wpProQuiz_' + quiz_id ).data( "wpProQuizFront" ).methode.showQuestion( index );
                    //     }
                    // } );
                });
            }
        },

        ajaxCompleteProcess: function () {
            $(document).ajaxComplete(function (event, request, settings) {
                if (settings.data.indexOf('action=wp_pro_quiz_load_quiz_data') || settings.data.indexOf('action=wp_pro_quiz_completed_quiz')) {
                    if (settings.data && settings.data != '') {
                        var splitted = settings.data.split('&');
                        var action = '';
                        for (var i in splitted) {
                            if (splitted[i].indexOf('action') != -1) {
                                action = splitted[i].split('=');
                                action = typeof action[1] !== 'undefined' ? action[1] : '';
                                break;
                            }
                        }
                        if (action != '' && action == 'wp_pro_quiz_load_quiz_data') {
                            if ($('.wpProQuiz_resultTable').length) {
                                $('.bb_avg_progress').show();

                                var pathAvg = new ProgressBar.Path("#bb_avg_shape", {
                                    duration: 3000,
                                    from: {
                                        color: "#ECCBFF",
                                        width: 8
                                    },
                                    to: {
                                        color: "#ECCBFF",
                                        width: 8
                                    },
                                    easing: "easeInOut",
                                    step: function (state, shape) {
                                        shape.path.setAttribute("stroke", state.color);
                                        shape.path.setAttribute("stroke-width", state.width);
                                    }
                                });

                                var avarage = request.responseJSON.averageResult;
                                if (avarage > 0) {
                                    avarage = -avarage / 100;
                                } else {
                                    avarage = 0;
                                }
                                pathAvg.animate(avarage);
                            }
                        }
                        if (action != '' && action == 'wp_pro_quiz_completed_quiz') {
                            if ($('.wpProQuiz_resultTable').length) {

                                var data = decodeURIComponent(settings.data);
                                var splitted = data.split('&');
                                var result = '';
                                for (var i in splitted) {
                                    if (splitted[i].indexOf('results') != -1) {
                                        result = splitted[i].split('=');
                                        result = typeof result[1] !== 'undefined' ? result[1] : '';
                                        result = JSON.parse(result);
                                        break;
                                    }
                                }

                                if (typeof result.comp.result !== 'undefined') {
                                    result = result.comp.result;
                                }

                                var path = new ProgressBar.Path("#quiz_shape_progress", {
                                    duration: 3000,
                                    from: {
                                        color: "#00A2FF",
                                        width: 8
                                    },
                                    to: {
                                        color: "#7FE0FF",
                                        width: 8
                                    },
                                    easing: "easeInOut",
                                    step: function (state, shape) {
                                        shape.path.setAttribute("stroke", state.color);
                                        shape.path.setAttribute("stroke-width", state.width);
                                    }
                                });

                                jQuery('.bb_progressbar_label').text(result + '%');
                                jQuery('.bb_progressbar_points').text(jQuery('.wpProQuiz_points').text());

                                if (result > 0) {
                                    result = -result / 100;
                                }

                                path.animate(result);
                            }
                        }
                    }
                }
            });
        },

        quizUpload: function() {
            function inputFileStyle() {
                $( 'input.wpProQuiz_upload_essay[type=file]:not(.styled)' ).each( function () {
                    var $fileInput = $( this );
                    var $fileInputFor = $fileInput.attr( 'id' );
                    $fileInput.addClass('styled');
                    $fileInput.after( '<label for="' + $fileInputFor + '">Choose a file</label>' );
                } );

                $( 'input.wpProQuiz_upload_essay[type=file]' ).change( function ( e ) {
                    var $in = $( this );
                    var $inval = $in.next().html( $in.val() );
                    if ( $in.val().length === 0 ) {
                        $in.next().html( 'Choose a file' );
                    } else {
                        $in.next().html( $in.val().replace( /C:\\fakepath\\/i, '' ) );
                    }
                } );
            }

            inputFileStyle();
            $( document ).ajaxComplete(function() {
                inputFileStyle();
            });
        },

        courseViewCookie: function () {
            $( '#bb-courses-directory-form .layout-grid-view' ).click( function () {
                $.cookie( 'courseview', 'grid' );
            } );

            $( '#bb-courses-directory-form .layout-list-view' ).click( function () {
                $.cookie( 'courseview', 'list' );
            } );
        },

        bbStickyLdSidebar: function () {
            var bbHeaderHeight = $('#masthead').outerHeight();

            if ( $(window).width() > 768 && $('.bb-ld-sticky-sidebar .ld-sidebar-widgets').length == 0 ) {
                $('.bb-ld-sticky-sidebar').stick_in_parent({offset_top: bbHeaderHeight + 45});

                if( $('body').hasClass('sticky-header') ) {
                    $('.lms-topic-sidebar-data').stick_in_parent({offset_top: bbHeaderHeight + 30 });
                } else {
                    $('.lms-topic-sidebar-data').stick_in_parent({offset_top: 30});
                }
            }

            $(window).on('resize', function () {
                if ( $(window).width() > 768 && $('.bb-ld-sticky-sidebar .ld-sidebar-widgets').length == 0 ) {
                    $('.bb-ld-sticky-sidebar').stick_in_parent({offset_top: bbHeaderHeight + 45});
                } else {
                    $('.bb-ld-sticky-sidebar').trigger("sticky_kit:detach");
                    $('.lms-topic-sidebar-data').trigger("sticky_kit:detach");
                }
            });

            if ($('.wpProQuiz_matrixSortString').length > 0) {
                $('html').addClass('quiz-sort');
            }
        },

        setElementorSpacing: function() {
            if ( $('.elementor-location-header').length > 0 ) {
                var setHeight = $('.elementor-location-header').outerHeight();
                $('.lms-topic-sidebar-wrapper, #learndash-page-content').css({'min-height': 'calc(100vh - '+setHeight+'px)'});
            }
        },

        showQuizNavigation: function() {
            var question_list = $( '.wpProQuiz_list' ).find( '.wpProQuiz_listItem' );
            var nav_wrapper = $( '#bb-lms-quiz-navigation' );
            if ( question_list.length && nav_wrapper.length ) {
                var str = '<ul>';
                for ( var i = 1; i <= question_list.length; i++ ) {
                    str += '<li><a href="#" class="bb-lms-quiz-questions" data-index="' + ( i - 1 ) + '">' + i + '</a></li>';
                }
                str += '</ul>';
                nav_wrapper.html( str );
            }
        },

        StyleInputQuestion: function() {
            function styleInputs() {
                $( '.wpProQuiz_questionInput:not([type="text"]):not([type="email"]):not([type="tel"]):not([type="date"])' ).each(function() {
                    if( ! $(this).hasClass('bbstyled') ) {
                        $(this).addClass('bbstyled').after('<span class="input-style"></span>');
                    }
                });
            }

            styleInputs();

            $( document ).ajaxComplete( function() {
                styleInputs();
            });
        },

        singleLesson: function() {
            var lsPageContent = document.getElementById('learndash-page-content');
            if( lsPageContent ) {
                $( '#learndash-page-content' ).scroll(function() {
                    $( window ).trigger('resize');
                });
            }
        },

        singleTopic: function() {
            var lsPageContent = $( 'body.single-sfwd-topic .lms-topic-item.current' );
            if( lsPageContent.length ) {
                lsPageContent.closest( 'div' ).show();
                lsPageContent.parents().closest( 'li' ).removeClass( 'lms-lesson-turnover' );
            }
            //Remove comment system added by shortcodes
            var learndash_pages = ['.sfwd-lessons-template-default', '.sfwd-topic-template-default', '.sfwd-quiz-template-default'];
            for(var i=0; i<learndash_pages.length; i++){
                if($(learndash_pages[i]+' #learndash-page-content #learndash-content #learndash-page-content .learndash_content_wrap #comments.comments-area').length > 0){
                    $(learndash_pages[i]+' #learndash-page-content #learndash-content #learndash-page-content .learndash_content_wrap #comments.comments-area').remove();
                }
                if($(learndash_pages[i]+' #learndash-page-content #learndash-content #learndash-page-content .learndash_content_wrap .ld-focus-comments').length > 0){
                    $(learndash_pages[i]+' #learndash-page-content #learndash-content #learndash-page-content .learndash_content_wrap .ld-focus-comments').remove();
                }
            }
        },

        singleQuiz: function() {
            var lsPageContent = $( 'body.single-sfwd-quiz .lms-quiz-item.current' );
            if( lsPageContent.length ) {
                lsPageContent.closest( 'div' ).show();
                lsPageContent.parents().closest( 'li' ).removeClass( 'lms-lesson-turnover' );
            }
        }

    };

    $( document ).ready( function () {
        window.BBLMS.init();
    } );

} )( jQuery );